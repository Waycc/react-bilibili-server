{"version":3,"sources":["public/img/BILIBILI_LOGO.svg","public/img/search.svg","public/img/bilibili-tv.svg","components/Header.jsx","api/url.js","util/tools.js","public/img/arrow down.svg","components/ChannelBar.jsx","public/img/play-box-outline.svg","public/img/danmushu.svg","components/LazyLoadImg.jsx","public/img/tv.svg","components/VideoCard.jsx","public/img/right.svg","components/ChannelVideoArea.jsx","api/fetch.js","api/ranking.js","pages/channel/Channel.jsx","components/Carousel.jsx","api/index.js","api/channel_bar.js","api/video.js","util/customHook.js","public/img/TV-Pause .svg","public/img/TV-Play.svg","pages/video/Player.jsx","public/img/noface.svg","components/CommentListItem.jsx","pages/video/Comment.jsx","pages/video/Video.jsx","router/routes.js","pages/index/Index.jsx","router/NestRoutes.jsx","redux/action_types.js","redux/actions.js","App.jsx","serviceWorker.js","redux/reducers.js","redux/saga/index.js","redux/store.js","index.jsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","createElement","d","fill","props","className","viewBox","width","height","_ref4","_ref5","Header","href","style","borderRadius","CHANNEL_URL","URL_PREFIX","LOC_URL","INDEX_RANKING_URL","RANKING_REGION_URL","ARCHIVE_RANK_URL","VIDEO_URL","VIDEO_MP4_URL","VIDEO_RELATED_URL","COMMENT_URL","PIC_URL","createChannelBar","data","partitionList","indexPartition","tid","typename","children","isParent","channelBarList","channelBarMap","0","keys","sort","a","b","parseInt","forEach","partition","map","childPartition","parentId","unshift","childrenIds","child","push","isEmpty","obj","empty","Array","isArray","getPicUrl","url","format","suffix","terminal","test","navigator","userAgent","getPicSuffix","numberToW","num","toFixed","getPubdate","timestamp","publicDate","Date","publicDateStr","date","getFullYear","getMonth","getDate","getHours","getMinutes","ifFetch","fetcher","history","pageKey","action","sessionStorage","getItem","setCacheData","funcList","cacheMap","reduce","accumulate","func","setItem","JSON","stringify","clearPageCache","console","log","removeItem","channelPathRe","pathToRegexp","ChannelBar","useMappedState","useCallback","state","channelBar","useState","channelModalVisible","setChannelModalVisible","match","exec","location","pathname","currentRid","useEffect","tabDom","document","querySelector","scrollIntoView","currentChannel","childChannel","isSelected","rid","includes","onLinkClick","path","cacheData","Helmet","onClick","id","onModalLinkClick","defaultProps","withRouter","LazyLoadImg","src","imgRef","useRef","hasLoadedRef","timeoutRef","loadImg","window","addEventListener","removeEventListener","current","clearTimeout","setTimeout","isInViewArea","imgDom","getBoundingClientRect","top","innerHeight","alt","ref","VideoCard","isRelated","pic","indexOf","playNum","stat","view","play","videoView","danmaku","video_review","aid","title","ChannelVideoArea","videos","setVideos","fetchFunc","limit","currentPage","loadMoreComponent","page","videoData","concat","fetchData","slice","to","display","video","get","params","fetch","result","jsonData","success","message","errorCode","json","status","fetchRankingRegion","day","fetchArchiveRank","videoAreasDatas","setVideoAreaDatas","setCurrentPage","genVideoAreasWhenIsParent","genVideoAreasWhenIsChild","onLoadMoreClick","videoAreaData","Carousel","innerRef","startXRef","timeOutRef","movingRef","viewWidth","setViewWidth","autoPlay","setAutoPlay","currentIndex","setCurrentIndex","innerItems","setInnerItems","childrenCount","React","Children","count","innerItemsCount","infiniteSlide","infinite","autoPlayTime","duration","offsetWidth","transition","move","finalMove","touchStart","touchMove","touchEnd","computeEachItemWidth","firstEle","lastEle","newChildren","index","cloneElement","innerItem","x","moveX","transform","direction","distance","changeX","nextIndex","Math","abs","setPosition","e","stopPropagation","changedTouches","pageX","preventDefault","fetchChannelBar","fetchLoc","fetchIndexRanking","fetchVideoInfo","fetchRelated","fetchCommentData","pn","useCacheState","initial","stateKey","dependence","setData","useLayoutEffect","pageCache","parse","useClearPageCache","clearFunc","xlinkHref","Player","videoInfo","videoRef","isPlay","setIsPlay","isShowCover","setIsShowCover","pause","preload","x5-playsinline","webkit-playsinline","playsInline","controls","initUrl","encodeURIComponent","type","CommentListItem","member","avatar","uname","ctime","content","Comment","commentListData","setCommentListData","pageInfo","setPageInfo","loadingRef","getCommentData","commentPage","api","replies","_","acount","rpid","component","locData","setLocData","getCacheLocDataMap","rankingData","setRankingData","getCacheRankingDataMap","Api","rankingIndex","imgItem","rkData","Channel","setVideoInfo","getCacheVideoInfoMap","relatedVideo","setRelatedVideo","getCacheRelatedVideoMap","descOpen","setDescOpen","getCacheDescOpenMap","resetStateWhenToOtherVideo","related","owner","name","pubdate","desc","reid","toptype","tname","rv","NestRoutes","routes","route","exact","undefined","from","SET_CHANNEL_BAR","FETCH_CHANNEL_BAR","setChannelBar","actionTypes","App","dispatch","useDispatch","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","initState","combineReducers","mySaga","put","takeLatest","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","run","ReactDOM","render","Provider","value","store","getElementById","URL","process","origin","response","contentType","headers","ready","unregister","reload","checkValidServiceWorker"],"mappings":"+fAAA,SAASA,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,EAEJ,IAAMS,cAAc,OAAQ,KAAM,IAAMA,cAAc,QAAS,OAE3D,EAEJ,IAAMA,cAAc,OAAQ,CAC1BC,EAAG,84FACHC,KAAM,YAYO,EATO,SAAyBC,GAC7C,OAAO,IAAMH,cAAc,MAAOd,EAAS,CACzCkB,UAAW,0BACXC,QAAS,gBACTC,MAAO,QACPC,OAAQ,KACPJ,GAAQ,EAAM,ICrBnB,SAAS,IAA2Q,OAA9P,EAAWhB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,EAEJ,IAAMS,cAAc,OAAQ,KAAM,IAAMA,cAAc,QAAS,OAE3D,EAEJ,IAAMA,cAAc,OAAQ,CAC1BC,EAAG,6SACHC,KAAM,SAYO,EATC,SAAmBC,GACjC,OAAO,IAAMH,cAAc,MAAO,EAAS,CACzCI,UAAW,mBACXC,QAAS,gBACTC,MAAO,IACPC,OAAQ,KACPJ,GAAQ,EAAM,ICrBnB,SAAS,IAA2Q,OAA9P,EAAWhB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,EAEJ,IAAMS,cAAc,OAAQ,CAC1BE,KAAM,UACND,EAAG,kBAGD,EAEJ,IAAMD,cAAc,OAAQ,CAC1BC,EAAG,wYACHC,KAAM,SAGJ,EAEJ,IAAMF,cAAc,OAAQ,CAC1B,YAAa,iBACbC,EAAG,6OACHC,KAAM,SAGJM,EAEJ,IAAMR,cAAc,OAAQ,CAC1B,YAAa,iBACbC,EAAG,oQACHC,KAAM,SAGJO,EAEJ,IAAMT,cAAc,OAAQ,CAC1B,YAAa,iBACbC,EAAG,4ZACHC,KAAM,SAUO,EAPK,SAAuBC,GACzC,OAAO,IAAMH,cAAc,MAAO,EAAS,CACzC,YAAa,+BACbK,QAAS,aACRF,GAAQ,EAAM,EAAO,EAAOK,EAAOC,ICpBzBC,G,MApBA,WACb,OACE,yBAAKN,UAAW,cACd,uBAAGO,KAAM,SAAUP,UAAW,mBAC5B,kBAAC,EAAD,CAAUQ,MAAO,CAAEN,MAAO,OAAQC,OAAQ,WAE5C,yBAAKH,UAAW,qBACd,kBAAC,EAAD,CAAYA,UAAW,uBACvB,0BAAMA,UAAW,sBAAjB,iEAEF,yBAAKA,UAAW,gBACd,kBAAC,EAAD,CAAYQ,MAAO,CAAEC,aAAc,UAErC,yBAAKT,UAAW,8BAAhB,sB,gDCjBOU,G,MAAcC,mBAGdC,EAAUD,WACVE,EAAoBF,eACpBG,EAAqBH,sBACrBI,EAAmBJ,4CACnBK,EAAYL,aACZM,EAAgBN,WAChBO,EAAoBP,uBACpBQ,EAAcR,aAEdS,EAAUT,a,8NCZhB,SAASU,EAAiBC,GAC/B,IAAIC,EAAgBD,EAAKC,cAErBC,EAAiB,CAACC,IAAK,EAAGC,SAAU,eAAMC,SAAU,GAAIC,UAAU,GAClEC,EAAiB,CAACL,GAElBM,EAAgB,CAACC,EAAGP,GAyBxB,OAxBAzC,OAAOiD,KAAKT,GAAeU,MAAK,SAACC,EAAGC,GAAJ,OAAUC,SAASF,GAAKE,SAASD,MAAIE,SAAQ,SAAA/C,GAC3E,IAAIsC,GAAW,EACO,IAAlBQ,SAAS9C,KACXsC,GAAW,GAEbL,EAAcjC,GAAK+C,SAAQ,SAAAC,GACzBR,EAAcQ,EAAUb,KAAOa,EAC/BA,EAAUV,SAAWA,EACC,IAAlBQ,SAAS9C,KACXgD,EAAUX,UAAYJ,EAAce,EAAUb,MAAQ,IAAIc,KAAI,SAAAC,GAE5D,OADAA,EAAeC,SAAWH,EAAUb,IAC7Be,KAETF,EAAUX,SAASe,QAAQ,CACzBjB,IAAKa,EAAUb,IACfC,SAAU,eACVE,UAAU,EACVa,SAAUH,EAAUb,MAEtBa,EAAUK,YAAcpB,EAAce,EAAUb,KAAKc,KAAI,SAAAK,GAAK,OAAIA,EAAMnB,OACxEI,EAAegB,KAAKP,UAInB,CACLT,iBACAC,iBAIG,SAASgB,EAAQC,GACtB,IAAIC,GAAQ,EAIZ,QAHKD,GAAQE,MAAMC,QAAQH,IAAuB,IAAfA,EAAI3D,QAA0E,KAAzC,kBAAR2D,GAAoBhE,OAAOiD,KAAKe,GAAK3D,WACnG4D,GAAQ,GAEHA,EAmBF,SAASG,EAAUC,EAAKC,GAC7B,IAAIC,EAjBC,WACL,IAAMC,EACG,0BAA0BC,KAAKC,UAAUC,WAD5CH,EAEO,aAAaC,KAAKC,UAAUC,WAUzC,OAPwB,IAApBH,EACO,QACuB,IAAvBA,EACA,QAEA,OAMEI,GAEb,MAAM,GAAN,OAAUvC,EAAV,gBAAyBgC,GAAzB,OAA+BC,EAASC,GAGnC,SAASM,EAAUC,GAAkB,IAAbP,EAAY,uDAAL,SACpC,OAAIO,EAAM,IAAcA,EAClB,GAAN,QAAWA,EAAM,KAAOC,QAAQ,IAAhC,OAAqCR,GAGhC,IAAMS,EAAa,SAACC,GACzB,IAAMC,EAAa,IAAIC,KAAiB,IAAZF,GACxBG,EAAgB,GACdC,EAAO,IAAIF,KACjB,GAAID,EAAWI,gBAAkBD,EAAKC,cACpC,GAAIJ,EAAWK,aAAeF,EAAKE,WAEjC,OADiBF,EAAKG,UAAYN,EAAWM,WAE3C,KAAK,EAEDJ,EADEC,EAAKI,WAAaP,EAAWO,aAAe,EAC9BJ,EAAKK,aAAeR,EAAWQ,aAAe,qBAE9CL,EAAKI,WAAaP,EAAWO,WAAa,qBAE5D,MACF,QACEL,EAAgBF,EAAWK,WAAa,EAAI,IAAML,EAAWM,eAGjEJ,EAAgBF,EAAWK,WAAa,EAAI,IAAML,EAAWM,eAG/DJ,EAAgBF,EAAWI,cAAgB,KACxCJ,EAAWK,WAAa,GAAK,IAC9BL,EAAWM,UAEf,OAAOJ,GAGEO,EAAU,SAACC,EAASC,EAASC,GACf,SAAnBD,EAAQE,QAAsBC,eAAeC,QAAQH,IACvDF,KAIOM,EAAe,SAACJ,EAASK,GAClC,IAAIC,EAAWD,EAASE,QAAO,SAACC,EAAYC,GAAb,O,yVAAA,IAA2BD,EAA3B,GAA2CC,OAAW,IACrFP,eAAeQ,QAAQV,EAASW,KAAKC,UAAUN,KAGtCO,EAAiB,SAACb,GAAD,OAAa,WACvCc,QAAQC,IAAI,4BACZb,eAAec,WAAWhB,KCpH5B,SAAS,IAA2Q,OAA9P,EAAW9F,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,EAEJ,IAAMS,cAAc,OAAQ,KAAM,IAAMA,cAAc,QAAS,OAE3D,EAEJ,IAAMA,cAAc,OAAQ,CAC1BC,EAAG,qPACHC,KAAM,SAYO,EATI,SAAsBC,GACvC,OAAO,IAAMH,cAAc,MAAO,EAAS,CACzCI,UAAW,uBACXC,QAAS,gBACTC,MAAO,IACPC,OAAQ,KACPJ,GAAQ,EAAM,I,QCXf+F,EAAgBC,IAAa,iBAE3BC,GAAa,SAAUjG,GAAQ,IAAD,EACckG,YAAeC,uBAAY,SAAAC,GAAK,OAAIA,EAAMC,aAAY,KADpE,IAC7BvE,sBAD6B,MACZ,GADY,MACRC,qBADQ,MACQ,GADR,IAEkBuE,oBAAS,GAF3B,mBAE7BC,EAF6B,KAERC,EAFQ,KAI9BC,EAAQV,EAAcW,KAAK1G,EAAM2G,SAASC,UAC1CC,EAAa,EACbJ,IACFI,EAAaxE,SAASoE,EAAM,KAE9BK,qBAAU,WACR,IAAIC,EAASC,SAASC,cAAc,OAASJ,GACzCE,GACFA,EAAOG,gBAAe,KAEvB,CAACL,EAAY9E,IAEhB,IAAIoF,EAAiBpF,EAAc8E,IAAe,GAE9CO,EAAeD,EAAevF,UAAY,GACzCuF,EAAetF,WAElBuF,GADoBrF,EAAcoF,EAAezE,WAAa,IACjCd,UAAY,IAE3C,IAAIyF,EAAa,SAACC,EAAKjB,GACrB,OAAOiB,IAAQT,IAAeR,EAAWzD,aAAe,IAAI2E,SAASV,IASnEW,EAAc,SAACC,GACjBzH,EAAM6E,QAAQ/B,KAAK2E,GACnBzH,EAAM0H,aAGR,OACE,yBAAKzH,UAAW,yBAEgB,iBAA5BkH,EAAexF,UACb,kBAACgG,EAAA,OAAD,KACE,+BAAQR,EAAexF,WAG7B,kBAACgG,EAAA,OAAD,MAIA,yBAAK1H,UAAW,iCACd,yBAAKA,UAAW,qBACd,yBAAKA,UAAW,4BAEZ6B,EAAeU,KAAI,SAAA6D,GACjB,IAAIiB,EAAMjB,EAAW3E,IACrB,OACE,uBAAGkG,QAAS,kBAAMJ,EAAoB,IAARF,EAAY,SAAZ,mBAAmCA,KAAQ/H,IAAK+H,EAAKrH,UAAS,uBAA0B4H,GAAE,aAAQP,IAC9H,uBAAGrH,UAAWoH,EAAWC,EAAKjB,GAAc,eAAiB,IAAKA,EAAW1E,gBAOzF,yBAAK1B,UAAW,kBAAmB2H,QAAS,kBAAMpB,GAAuB,KACvE,kBAAC,EAAD,SAKDzD,EAAQqE,IACT,yBAAKnH,UAAW,kCACd,yBAAKA,UAAW,qBACd,yBAAKA,UAAW,4BAEZmH,EAAa5E,KAAI,SAAA4E,GACf,IAAIE,EAAMF,EAAa1F,IACvB,OACE,uBAAGkG,QAAS,kBAAMJ,EAAY,YAAD,OAAaF,KAAQ/H,IAAK+H,EAAKrH,UAAW,YACrE,uBAAGA,UAAWoH,EAAWC,EAAKF,GAAhB,eAAiD,IAAKA,EAAazF,iBAUjG,yBAAK1B,UAAS,sCAAiCsG,EAAsB,OAAS,KAC5E,6BAEIzE,EAAeU,KAAI,SAAA6D,GACjB,IAAIiB,EAAMjB,EAAW3E,IACrB,OACE,uBAAGkG,QAAS,kBArEH,SAACN,GACtBd,GAAuB,GACvBxG,EAAM6E,QAAQ/B,KAAa,IAARwE,EAAY,QAAZ,mBAAkCA,IACrDtH,EAAM0H,YAkEwBI,CAAiBR,IAAM/H,IAAK+H,EAC3CrH,UAAS,mBAAcoG,EAAW1E,SAAStC,OAAS,EAAI,aAAe,KACxE,uBAAGY,UAAWoH,EAAWC,EAAKjB,GAAc,eAAiB,IAAKA,EAAW1E,eAMvF,yBAAK1B,UAAW,kBAAmB2H,QAAS,kBAAMpB,GAAuB,KACvE,kBAAC,EAAD,CAAevG,UAAW,mCAOpCgG,GAAW8B,aAAe,CACxBL,UADwB,cAQXM,mBAAW/B,I,uCCpI1B,SAAS,KAA2Q,OAA9P,GAAWjH,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,GAEJ,IAAMS,cAAc,OAAQ,KAAM,IAAMA,cAAc,QAAS,OAE3D,GAEJ,IAAMA,cAAc,OAAQ,CAC1BC,EAAG,0PACHC,KAAM,SAYO,GATS,SAA2BC,GACjD,OAAO,IAAMH,cAAc,MAAO,GAAS,CACzCI,UAAW,6BACXC,QAAS,gBACTC,MAAO,IACPC,OAAQ,KACPJ,GAAQ,GAAM,KCrBnB,SAAS,KAA2Q,OAA9P,GAAWhB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,GAEJ,IAAMS,cAAc,OAAQ,KAAM,IAAMA,cAAc,QAAS,OAE3D,GAEJ,IAAMA,cAAc,OAAQ,CAC1BC,EAAG,0OACHC,KAAM,SAGJ,GAEJ,IAAMF,cAAc,OAAQ,CAC1BC,EAAG,6EACHC,KAAM,SAYO,GATG,SAAqBC,GACrC,OAAO,IAAMH,cAAc,MAAO,GAAS,CACzCI,UAAW,qBACXC,QAAS,gBACTC,MAAO,IACPC,OAAQ,KACPJ,GAAQ,GAAM,GAAO,K,6jBCd1B,SAASiI,GAAYjI,GAAQ,IACrBS,EAA0BT,EAA1BS,MAAOyH,EAAmBlI,EAAnBkI,IAAKjI,EAAcD,EAAdC,UACdkI,EAASC,mBACTC,EAAeD,kBAAO,GACtBE,EAAaF,mBAEjBtB,qBAAU,WAGR,OAFAyB,IACAC,OAAOC,iBAAiB,SAAUF,GAC3B,WACL,OAAOC,OAAOE,oBAAoB,SAAUH,MAE7C,CAACL,IAEJ,IAAIK,EAAU,WACRF,EAAaM,UACjBC,aAAaN,EAAWK,SACxBL,EAAWK,QAAUE,YAAW,WAC1BC,MACFX,EAAOQ,QAAQT,IAAMA,EACrBG,EAAaM,SAAU,KAExB,OAGDG,EAAe,WACjB,IAAIC,EAASZ,EAAOQ,QACpB,GAAKI,EAGL,OAFcA,EAAOC,wBAAfC,KACWT,OAAOU,aAI1B,OACE,kBAAC,WAAD,KACE,yBAAMzI,MAAK,IAAKN,MAAO,OAAQC,OAAQ,QAAWK,GAAS0I,IAAK,GAAIC,IAAKjB,EAAQD,IAAK,GAAIjI,UAAWA,KAK3GgI,GAAYF,aAlDO,CACjBtH,MAAO,GACPyH,IAAK,IAmDQD,UCzDf,SAAS,KAA2Q,OAA9P,GAAWjJ,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,GAEJ,IAAMS,cAAc,IAAK,CACvBE,KAAM,QACL,IAAMF,cAAc,OAAQ,CAC7BC,EAAG,k6BACD,IAAMD,cAAc,OAAQ,CAC9BC,EAAG,62BAWU,GARH,SAAeE,GACzB,OAAO,IAAMH,cAAc,MAAO,GAAS,CACzCM,MAAO,IACPC,OAAQ,IACRF,QAAS,iBACRF,GAAQ,K,6jBCTb,IAeIqJ,GAAY,SAAUrJ,GAAQ,IAC3BS,EAA0BT,EAA1BS,MAAO6I,EAAmBtJ,EAAnBsJ,UAAW/H,EAAQvB,EAARuB,MAEiB,IAApCA,EAAKgI,IAAIC,QAAQ,gBACnBjI,EAAKgI,IAAMnG,EAAU7B,EAAKgI,IAAK,eAGjC,IAAIE,EAAUH,EAAY/H,EAAKmI,KAAKC,KAAOpI,EAAKqI,KAC5CC,EAAYP,EAAY/H,EAAKmI,KAAKI,QAAUvI,EAAKwI,aAOrD,OACE,yBAAK9J,UAAW,uBAAwBQ,MAAK,MAAMA,IACjD,uBAAGmH,QAAS,kBAPGH,EAOe,UAAD,OAAWlG,EAAKyI,KAN/ChK,EAAM6E,QAAQ/B,KAAK2E,QACnBzH,EAAM0H,YAFU,IAACD,GAOsCxH,UAAW,iBAC9D,yBAAKA,UAAW,iBACd,kBAAC,GAAD,CAAaiI,IAAK3G,EAAKgI,IAAKtJ,UAAW,QACvC,kBAAC,GAAD,CAAQA,UAAW,gBAEdwJ,GAAaI,EAEd,yBAAK5J,UAAW,yBAEVwJ,GACF,6BACE,kBAAC,GAAD,CAAUxJ,UAAW,SACrB,0BAAMA,UAAW,QAAS4D,EAAU4F,OAIpCI,GACF,6BACE,kBAAC,GAAD,CAAU5J,UAAW,SACrB,0BAAMA,UAAW,QAAS4D,EAAUgG,MAIxC,MAGR,yBAAK5J,UAAW,mBAAoBsB,EAAK0I,UAOjDZ,GAAUtB,aAjES,CACjBxG,KAAM,GACNd,MAAO,GACP6I,WAAW,EACX5B,UAJiB,cAmEJM,mBAAWqB,I,QC7E1B,SAAS,KAA2Q,OAA9P,GAAWrK,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,GAEJ,IAAMS,cAAc,OAAQ,KAAM,IAAMA,cAAc,QAAS,OAE3D,GAEJ,IAAMA,cAAc,OAAQ,CAC1BC,EAAG,sQACHC,KAAM,SAYO,GATA,SAAkBC,GAC/B,OAAO,IAAMH,cAAc,MAAO,GAAS,CACzCI,UAAW,kBACXC,QAAS,gBACTC,MAAO,IACPC,OAAQ,KACPJ,GAAQ,GAAM,KCIfkK,GAAmB,SAAUlK,GAAQ,IAAD,EACVsG,mBAAS,IADC,mBAChC6D,EADgC,KACxBC,EADwB,OAEoCpK,EAAMuB,KAA1EI,EAFgC,EAEhCA,SAAU0I,EAFsB,EAEtBA,UAAWC,EAFW,EAEXA,MAAO5I,EAFI,EAEJA,IAAK6I,EAFD,EAECA,YAAaC,EAFd,EAEcA,kBAC9C3I,EAAa7B,EAAb6B,SAkBN,OAhBAiF,qBAAU,WAAM,8CACd,6BAAA3E,EAAA,sEACwBkI,EAAU,CAAC/C,IAAK5F,EAAK+I,KAAMF,IADnD,UACMG,EADN,QAEMH,EAFN,uBAGIH,EAAUD,EAAOQ,OAAOD,EAAUnJ,OAHtC,0BAME6I,EAAUM,EAAUnJ,MAAQ,IAN9B,4CADc,uBAAC,WAAD,wBASdqJ,KACC,CAAClJ,EAAK6I,IAELD,IACFH,EAASA,EAAOU,MAAM,EAAGP,IAIzB,yBAAKrK,UAAW,sBACd,yBAAKA,UAAW,4BACd,yBAAKA,UAAW,SAAuB,iBAAb0B,EAAoB,2BAASA,GACvD,yBAAK1B,UAAW,eAEZ4B,GACA,kBAAC,KAAD,CAAMiJ,GAAI,YAAcpJ,GACtB,yBAAKzB,UAAW,QAAhB,4BACA,yBAAKQ,MAAO,CAAEsK,QAAS,iBAAiB,kBAAC,GAAD,CAAU9K,UAAW,oBAKrE,yBAAKA,UAAW,mBAEZ8C,EAAQoH,GACN,yBAAKlK,UAAW,qBAAhB,yBAEAkK,EAAO3H,KAAI,SAAAwI,GACT,OAAO,kBAAC,GAAD,CAAWzJ,KAAMyJ,EAAOzL,IAAKyL,EAAMhB,UAKhDQ,IAMRN,GAAiBnC,aAlEE,CACjBxG,KAAM,GACNgJ,YAAa,EACbF,UAAW,aACXxI,UAAU,GAiEGqI,UC9DR,SAAee,GAAtB,mC,gDAAO,WAAmB5H,GAAnB,kCAAAlB,EAAA,6DAAwBZ,EAAxB,+BAA+B,GAChC2J,EAAS,GACblM,OAAOiD,KAAKV,GAAMe,SAAQ,SAAA/C,GACxB2L,EAASA,EAAS,IAAM3L,EAAM,IAAMgC,EAAKhC,MAEvC2L,IAAQ7H,EAAMA,EAAM,IAAM6H,GALzB,SAMcC,MAAM9H,GANpB,cAMD+H,EANC,OAODC,EAAW,CAACC,SAAS,EAAOC,QAAS,GAAIC,UAAW,GAPnD,mBAScJ,EAAOK,OATrB,QASHJ,EATG,yDAWHA,EAASE,QAAT,KACAF,EAASG,UAAYJ,EAAOM,OAZzB,iCAcEL,GAdF,2D,sBCPA,SAASM,GAAT,GAA6C,IAAfrE,EAAc,EAAdA,IAAc,IAATsE,WAAS,MAAL,EAAK,EAEjD,OAAOX,GADA,UAAMlK,EAAN,gBAAgCuG,EAAhC,gBAA2CsE,IAI7C,SAASC,GAAT,GAA0C,IAAdvE,EAAa,EAAbA,IAAKmD,EAAQ,EAARA,KAEtC,OAAOQ,GADA,UAAKjK,EAAL,gBAA6BsG,EAA7B,eAAuCmD,I,mkBCRhD,IAAI1E,GAAgBC,IAAa,iBAqFlBgC,oBAnFf,SAAiBhI,GAAQ,IAAD,EAC0BkG,YAAeC,uBAAY,SAAAC,GAAK,OAAIA,EAAMC,aAAY,KADhF,KACjBvE,eADiB,EACIC,sBADJ,MACoB,GADpB,IAEqBuE,mBAAS,IAF9B,mBAEjBwF,EAFiB,KAEAC,EAFA,OAGczF,mBAAS,GAHvB,mBAGjBiE,EAHiB,KAGJyB,EAHI,KAKlBvF,EAAQV,GAAcW,KAAK1G,EAAM2G,SAASC,UAC1CC,EAAa,EACbJ,IACFI,EAAaxE,SAASoE,EAAM,KAG9B,IAAIU,EAAiBpF,EAAc8E,GAEnCC,qBAAU,WACJK,IACEA,EAAetF,SACjBoK,IAEAC,OAGH,CAACrF,EAAY9E,EAAewI,IAE/B,IAAI0B,EAA4B,WAC9B,IAAIH,EAAkB,GACtB3E,EAAevF,SAASU,SAAQ,SAAAO,GAC9BiJ,EAAgBhJ,KAAhB,MACKD,EADL,CAEEwH,UAAWsB,GACXhK,SAAUkB,EAAMlB,SAChB2I,MAAO,QAGXyB,EAAkBD,IAGhBI,EAA2B,WAC7B,IAAIJ,EAAkB,CAAC,MAEhB3E,EAFe,CAGlBkD,UAAWsB,GACXhK,SAAU,2BACVD,IAAKyF,EAAezF,IAEpB4I,MAAO,IAPW,MAUfnD,EAVe,CAWlBkD,UAAWwB,GACXlK,SAAU,2BACVD,IAAKyF,EAAezF,IACpB6I,YAAaA,EACbD,OAAO,EACPE,kBACE,yBAAKvK,UAAW,uBACd,0BAAM2H,QAASuE,GAAf,4CAKRJ,EAAkBD,IAGhBK,EAAkB,WACpBH,EAAezB,EAAc,IAG/B,OACE,yBAAKtK,UAAW,qBACd,kBAAC,GAAD,MAEE6L,EAAgBtJ,KAAI,SAAA4J,GAClB,OAAO,kBAAC,GAAD,CACL7M,IAAK6M,EAAczK,SAAWyK,EAAc1K,IAC5CH,KAAM6K,EACNvK,SAAUsF,EAAetF,kB,SC5EjCwK,I,MAAW,SAAUrM,GACvB,IAAIsM,EAAWlE,iBAAO,MAClBmE,EAAYnE,iBAAO,GACnBoE,EAAapE,iBAAO,MACpBqE,EAAYrE,kBAAO,GAJO,EAKE9B,mBAAS,GALX,mBAKzBoG,EALyB,KAKdC,EALc,OAMArG,mBAAStG,EAAM4M,UANf,mBAMzBA,EANyB,KAMfC,EANe,OAOQvG,mBAAS,GAPjB,mBAOzBwG,EAPyB,KAOXC,EAPW,OAQIzG,mBAAS,MARb,mBAQzB0G,EARyB,KAQbC,EARa,KAU1BC,EAAgBC,IAAMC,SAASC,MAAMrN,EAAM4B,UAC3C0L,EAAkBJ,EAAgB,EAAIA,EAAgB,EAAIA,EAC1DK,EAAgBL,EAAgB,GAAIlN,EAAMwN,SAC1CC,EAAezN,EAAMyN,aACrBC,EAAW1N,EAAM0N,SAAW,IACfpB,EAAS3D,SAAW2D,EAAS3D,QAAQgF,YAYtD7G,qBAAU,WAWR,OAVI8F,GAAYF,GAAaQ,EAAgB,IACvCV,EAAW7D,SAASC,aAAa4D,EAAW7D,SAChD6D,EAAW7D,QAAUE,YAAW,WAC9ByD,EAAS3D,QAAQlI,MAAMmN,WAAa,OACpCC,EAAK,GACLhF,YAAW,WACTiF,EAAU,OAAQpB,EAAWA,EAAY,KACxC,KACFe,IAEE,WACL7E,aAAa4D,EAAW7D,aAI5B7B,qBAAU,WAQR,OAPAwF,EAAS3D,QAAQF,iBAAiB,aAAcsF,GAChDzB,EAAS3D,QAAQF,iBAAiB,YAAauF,GAC/C1B,EAAS3D,QAAQF,iBAAiB,WAAYwF,GAC9CzF,OAAOC,iBAAiB,SAAUyF,GACZ,IAAlBhB,GACFH,EAAgB,GAEX,WACLT,EAAS3D,QAAQD,oBAAoB,aAAcqF,GACnDzB,EAAS3D,QAAQD,oBAAoB,YAAasF,GAClD1B,EAAS3D,QAAQD,oBAAoB,WAAYuF,GACjDzF,OAAOE,oBAAoB,SAAUwF,OAKzCpH,qBAAU,WACRoH,MACC,CAACZ,IAGJxG,qBAAU,WACJ4F,GAEFmB,EAAK,EADOX,GAAiB,EAAI,EAAI,KAGtC,CAACR,EAAW1M,EAAM4B,WAErBkF,qBAAU,WAER,GAAI4F,EAAW,CACb,IAAIyB,EAAW,KACXC,EAAU,KAEVC,EAAclB,IAAMC,SAAS5K,IAAIxC,EAAM4B,UAAU,SAACiB,EAAOyL,GAC3DzL,EAAQsK,IAAMoB,aAAa1L,EAAO,CAACpC,MAAO,CAACN,MAAO,OAAQC,OAAQ,OAAQ2K,QAAS,kBACnF,IAAIyD,EACF,yBAAKjP,IAAK+O,EAAQ,EAAG7N,MAAO,CAACN,MAAOuM,GAAYzM,UAAW,iBACxD4C,GAKL,OAFc,IAAVyL,GAAepB,EAAgB,IAAGiB,EAAWhB,IAAMoB,aAAaC,EAAW,CAACjP,IAAK,KACjF+O,IAAUpB,EAAgB,GAAKA,EAAgB,IAAGkB,EAAUjB,IAAMoB,aAAaC,EAAW,CAACjP,IAAK2N,EAAgB,KAC7GsB,KAELxB,EAAU,CAAIoB,GAAJ,oBAAgBC,GAAhB,CAA6BF,IAC3ClB,EAAcD,MAEf,CAACN,EAAW1M,EAAM4B,WAGrB,IAAIsM,EAAuB,WACzB,IAAIxB,EAAYJ,EAAS3D,QAAQgF,YAAcL,EAC1CA,IACHZ,EAAY,GAEdC,EAAaD,IAIXmB,EAAO,SAACY,EAAGH,GAEb,IAAII,IADJJ,EAAQA,GAASxB,GACKJ,EAAa+B,EACnCnC,EAAS3D,QAAQlI,MAAMkO,UAAvB,qBAAiDD,EAAjD,QAIEZ,EAAY,SAACc,EAAWC,EAAUC,GACpCrC,EAAU9D,SAAU,EACpB2D,EAAS3D,QAAQlI,MAAMmN,WAAvB,oBAAiDF,GACjD,IAAIqB,EAA0B,SAAdH,EAAuB9B,EAAe,EAAIA,EAAe,EACzE+B,EAAWG,KAAKC,IAAIJ,IAChBE,EAAYzB,EAAkB,GAAKyB,EAAY,GAAKC,KAAKC,IAAIH,GAAWpC,EAAY,KACtFqC,EAAYjC,EACZ+B,EAAW,GAGXhB,EADgB,SAAde,GACIC,EAEDA,GAEHtB,IACgB,IAAdwB,GACFG,EAAY5B,EAAkB,GAE5ByB,IAAczB,EAAkB,GAClC4B,EAAY,IAGhBnC,EAAgBgC,GAChBtC,EAAU9D,SAAU,GAGlBuG,EAAc,SAACH,GACjBlG,YAAW,WAGTkE,EAAgBgC,KAEf,IAGDhB,EAAa,SAACoB,GAChBA,EAAEC,kBA7HFxG,aAAa4D,EAAW7D,SACxBkE,GAAY,GA8HZP,EAAS3D,QAAQlI,MAAMmN,WAAa,OACpCrB,EAAU5D,QAAUwG,EAAEE,eAAe,GAAGC,MACxCzB,EAAK,IAGHG,EAAY,SAACmB,GACfA,EAAEC,kBACFD,EAAEI,iBACF,IAAId,EAAIU,EAAEE,eAAe,GAAGC,MAC5BzB,EAAKY,EAAIlC,EAAU5D,UAGjBsF,EAAW,SAACkB,GACdA,EAAEC,kBACF,IACIN,EADOK,EAAEE,eAAe,GAAGC,MACV/C,EAAU5D,QAG/BmF,EADgBgB,EAAU,EAAI,OAAS,QAClBpC,EAAWoC,GAChCvC,EAAU5D,QAAU,EAtJpBkE,GAAY,IA0Jd,OACE,yBAAK5M,UAAW,4BACd,yBAAKA,UAAW,iBACd,yBACEmJ,IAAKkD,EACLrM,UAAW,2BACXQ,MAAO,CAACN,MAAM,GAAD,OAAK,IAAMmN,EAAX,OAEZN,IAIe,IAAlBE,EAAsB,KACtB,yBAAKjN,UAAW,yBAEZ,aAAI,IAAIiD,MAAMgK,GAAejL,QAAQO,KAAI,SAAAjD,GAEvC,OADAA,EAAM2N,EAAgB,EAAI3N,EAAM,EAAIA,EAElC,0BAAMA,IAAKA,EAAKU,UAAS,0BAAqB6M,IAAiBvN,EAAM,WAAa,aAUlG8M,GAAStE,aA/MU,CACjByF,UAAU,EACVZ,UAAU,EACVa,aAAc,IACdC,SAAU,IA6MGrB,UChNA,QACbmD,gBCFK,WACL,OAAOvE,GAAItK,IDEX8O,SHHK,WACL,OAAOxE,GAAIpK,IGGX6O,kBHAK,WACL,OAAOzE,GAAInK,IGAX6O,eELK,YAAkC,IAAR3F,EAAO,EAAPA,IAE/B,OAAOiB,GADA,UAAMhK,EAAN,gBAAuB+I,KFK9B4F,aEDK,YAAgC,IAAR5F,EAAO,EAAPA,IAE7B,OAAOiB,GADA,UAAM9J,EAAN,gBAA+B6I,KFCtC6F,iBEGK,YAAwC,IAAZ7F,EAAW,EAAXA,IAAK8F,EAAM,EAANA,GAEtC,OAAO7E,GADA,UAAM7J,EAAN,gBAAyB4I,EAAzB,eAAmC8F,M,MCVrC,SAASC,GAAcC,EAASlL,EAASmL,EAAUpL,GAAyB,IAAhBqL,EAAe,uDAAJ,GAAI,EAC1D5J,mBAAS0J,GADiD,mBAC3EzO,EAD2E,KACrE4O,EADqE,KAGhFC,2BAAgB,WACd,GAAIvL,GACqB,QAAnBA,EAAQE,OAAkB,CAC5B,IAAIsL,EAAYrL,eAAeC,QAAQH,GACnCuL,IACFA,EAAY5K,KAAK6K,MAAMD,GACvBF,EAAQE,EAAUJ,IAAaD,OAIpCE,GACHtK,QAAQC,IAAItE,EAAM0O,EAAUnL,EAAS,OAOrC,MAAO,CAACvD,EAAM4O,EALQ,WAEpB,OADAvK,QAAQC,IAAItE,EAAM0O,EAAUnL,EAAS,SAC9B,eAAEmL,EAAW1O,KAMjB,IAAIgP,GAAoB,SAACzL,GAA4B,IAAnBoL,EAAkB,uDAAP,GAClDE,2BAAgB,WACd,IAAII,EAAY7K,EAAeb,GAE/B,OADA0D,OAAOC,iBAAiB,eAAgB+H,GACjC,kBAAMhI,OAAOE,oBAAoB,eAAgB8H,MACvDN,I,MCjCL,SAAS,KAA2Q,OAA9P,GAAWlR,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,GAEJ,IAAMS,cAAc,QAAS,CAC3BM,MAAO,OACPC,OAAQ,OACRqQ,UAAW,m2GAUE,GAPE,SAAoBzQ,GACnC,OAAO,IAAMH,cAAc,MAAO,GAAS,CACzCM,MAAO,GACPC,OAAQ,IACPJ,GAAQ,KChBb,SAAS,KAA2Q,OAA9P,GAAWhB,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,GAEJ,IAAMS,cAAc,QAAS,CAC3BM,MAAO,OACPC,OAAQ,OACRqQ,UAAW,qiHAUE,GAPC,SAAmBzQ,GACjC,OAAO,IAAMH,cAAc,MAAO,GAAS,CACzCM,MAAO,GACPC,OAAQ,IACPJ,GAAQ,K,MCQb,SAAS0Q,GAAO1Q,GAAQ,IACjB2Q,EAAwB3Q,EAAxB2Q,UAAW1Q,EAAaD,EAAbC,UACZ2Q,EAAWxI,mBAFM,EAGW9B,oBAAS,GAHpB,gCAIKA,oBAAS,IAJd,mBAIhBuK,EAJgB,KAIRC,EAJQ,OAKexK,oBAAS,GALxB,mBAKhByK,EALgB,KAKHC,EALG,KAOrBlK,qBAAU,WACJ8J,EAASjI,UACPkI,EACFD,EAASjI,QAAQiB,OAEjBgH,EAASjI,QAAQsI,WAGpB,CAACJ,IAEJ,IAtBmBxN,EA2BnB,OACE,yBAAKpD,UAAWA,IAGX8C,EAAQ4N,IACT,kBAAC,WAAD,KACE,2BACEvQ,OAAO,OACPD,MAAM,OACN+Q,QAAQ,OACRC,iBAAe,OACfC,qBAAmB,OACnBC,aAAa,EACbjI,IAAKwH,EACLU,UAAQ,EACR7Q,MAAO,CAAEsK,QAASgG,EAAc,OAAS,UAEzC,4BAAQ7I,KA5CC7E,EA4CgBsN,EAAUY,QA1CvC,GAAN,OAAUrQ,EAAV,wBAAuCsQ,mBAAmBnO,KA0CHoO,KAAM,eAGnDV,GAAe,yBAAK7I,IAAK9E,EAAUuN,EAAUpH,IAAK,cAAetJ,UAAW,cAC9E,yBAAKA,UAAW,gBAAiB2H,QA1BrB,WAClBkJ,GAAU,SAAAD,GAAM,OAAKA,KACrBG,GAAe,IAwBgDvQ,MAAO,CAAEsK,QAASgG,EAAc,QAAU,SAE/FF,EAAS,kBAAC,GAAD,CAAa5Q,UAAW,SAAY,kBAAC,GAAD,CAAYA,UAAW,YASlFyQ,GAAO3I,aAhEY,CACjB4I,UAAW,GACX1Q,UAAW,oBAiEEyQ,U,MCjFf,SAAS,KAA2Q,OAA9P,GAAW1R,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAIhT,IAAI,GAEJ,IAAMS,cAAc,OAAQ,CAC1BC,EAAG,4BACHC,KAAM,YAGJ,GAEJ,IAAMF,cAAc,IAAK,CACvBE,KAAM,WACL,IAAMF,cAAc,OAAQ,CAC7BC,EAAG,4bACD,IAAMD,cAAc,OAAQ,CAC9BC,EAAG,ulCAGD,GAEJ,IAAMD,cAAc,IAAK,CACvBE,KAAM,WACL,IAAMF,cAAc,OAAQ,CAC7BC,EAAG,gaACD,IAAMD,cAAc,OAAQ,CAC9BC,EAAG,yXACD,IAAMD,cAAc,OAAQ,CAC9BC,EAAG,kfAWU,GARC,SAAmBE,GACjC,OAAO,IAAMH,cAAc,MAAO,GAAS,CACzCM,MAAO,IACPC,OAAQ,IACRF,QAAS,iBACRF,GAAQ,GAAM,GAAO,KCvB1B,SAAS0R,GAAgB1R,GAAQ,IACzBuB,EAASvB,EAATuB,KACN,OACE,yBAAKtB,UAAW,+BACd,yBAAKA,UAAW,yBACd,kBAAC,GAAD,CAAYA,UAAW,cACvB,kBAAC,GAAD,CAAaA,UAAW,SAAUiI,IAAK9E,EAAU7B,EAAKoQ,OAAOC,OAAQ,iBAEvE,yBAAK3R,UAAW,+BACd,yBAAKA,UAAW,uBACd,0BAAMA,UAAW,aAAcsB,EAAKoQ,OAAOE,OAC3C,0BAAM5R,UAAW,wBAAyB+D,EAAWzC,EAAKuQ,SAE5D,yBAAK7R,UAAW,qBACd,8BAAOsB,EAAKwQ,QAAQxG,YAQ9BmG,GAAgB3J,aA1BG,CACjBxG,KAAM,IA2BOmQ,U,MCtBf,SAASM,GAAQhS,GAAQ,IACjBgK,EAAQhK,EAARgK,IADgB,EAEc1D,mBAAS,GAFvB,mBAEjBiE,EAFiB,KAEJyB,EAFI,OAGsB1F,mBAAS,IAH/B,mBAGjB2L,EAHiB,KAGAC,EAHA,OAIQ5L,mBAAS,IAJjB,mBAIjB6L,EAJiB,KAIPC,EAJO,KAKlBC,EAAajK,kBAAO,GALF,SAiCPkK,EAjCO,kFAiCtB,WAA8BtI,EAAKuI,GAAnC,UAAApQ,EAAA,sEACgBqQ,GAAI3C,iBAAiB,CAAE7F,MAAK8F,GAAIyC,IADhD,oFAjCsB,sBActBzL,qBAAU,WANRkF,EAAe,GACfkG,EAAmB,IACnBE,EAAY,MAMX,CAACpI,IAEJlD,qBAAU,WACRuL,EAAW1J,SAAU,EAChB,yCAAG,mCAAAxG,EAAA,sEACamQ,EAAetI,EAAKO,GADjC,OACFa,EADE,OAEF7J,EAAO6J,EAAO7J,MAAQ,GACtBkR,EAAUlR,EAAKkR,SAAW,GAC1BN,EAAW5Q,EAAKkJ,MAAQ,GAC5ByH,GAAmB,SAAAD,GAAe,OAAIA,EAAgBtH,OAAO8H,MAC7DL,EAAYD,GACZE,EAAW1J,SAAU,EAPf,2CAAH,oDASL+J,KACC,CAAC1I,EAAKO,IAaT,OACE,yBAAKtK,UAAW,0BACd,yBAAKA,UAAW,qBAAhB,eAEE,0BAAMA,UAAW,aAAjB,SAAgCkS,EAASQ,QAAU,EAAnD,WAEF,6BAEI5P,EAAQkP,GAAmB,uDACzBA,EAAgBzP,KAAI,SAAA1C,GAClB,OACE,kBAAC,GAAD,CAAiByB,KAAMzB,EAAGP,IAAKO,EAAE8S,YAMxC7P,EAAQkP,IACT,yBAAKhS,UAAW,sBAAuB2H,QAxBrB,WACjByK,EAAW1J,SACdqD,GAAe,SAAAzB,GAAW,OAAIA,EAAc,OAuBxC,wEAQVyH,GAAQjK,aA3EW,CACjBxG,KAAM,GACN4Q,SAAU,IA2EGH,UCyBAhK,IC9GA,IACb,CACEP,KAAM,SACNoL,UCEW,SAAe7S,GAC5B,IACI6E,EAAU7E,EAAM6E,QAFe,EAGakL,GAAc,GAFhD,QAE6D,UAAWlL,GAHnD,mBAG9BiO,EAH8B,KAGrBC,EAHqB,KAGTC,EAHS,OAIyBjD,GAAc,GAH5D,QAGyE,cAAelL,GAJnE,mBAI9BoO,EAJ8B,KAIjBC,EAJiB,KAIDC,EAJC,KAMnC5C,GALc,SAOdjK,mBAAQ,wBAAC,uBAAAnE,EAAA,sDACPwC,EAAO,wBAAC,6BAAAxC,EAAA,sEACciR,GAAI3D,WADlB,OACFqD,EADE,OAENC,EAAWD,EAAQvR,MAFb,2CAGLsD,EAXS,SAOL,2CAKN,CAACiO,EAASjO,IAEbyB,mBAAQ,wBAAC,uBAAAnE,EAAA,sDACPwC,EAAO,wBAAC,6BAAAxC,EAAA,sEACmBiR,GAAI1D,oBADvB,OACF2D,EADE,OAENH,EAAeG,EAAa9R,MAFtB,2CAGLsD,EAlBS,SAcL,2CAKN,CAACoO,EAAapO,IAEjB,IAAI6C,EAAY,WACdxC,EAAa,QAAS,CAAC8N,EAAoBG,KAG7C,OACE,yBAAKlT,UAAW,iCACd,kBAAC,GAAD,CAAYyH,UAAWA,IACvB,kBAAC,GAAD,KAEIoL,EAAQtQ,KAAI,SAAA8Q,GACV,OACE,uBAAG9S,KAAM8S,EAAQjQ,IAAK9D,IAAK+T,EAAQzL,IACjC,yBAAKsB,IAAI,GAAGjB,IAAK9E,EAAUkQ,EAAQ/J,IAAK,qBAMlD,yBAAKtJ,UAAW,8BAEZgT,EAAYzQ,KAAI,SAAA+Q,GACd,OACE,kBAAC,GAAD,CAAWhS,KAAMgS,EAAQhU,IAAKgU,EAAOvJ,IAAKtC,UAAWA,WD5CjE,CACED,KAAM,gBACNoL,UAAWW,IAEb,CACE/L,KAAM,cACNoL,UDmGW7K,aApGf,SAAehI,GAAQ,IAEjBgK,EADUhK,EAATyG,MACWyE,OAAOlB,IACnBlF,EAAO,gBAAYkF,GAAOnF,EAAU7E,EAAM6E,QAH1B,EAIkCkL,GAAc,GAAIjL,EAAS,YAAaD,EAAS,CAACC,IAJpF,mBAIf6L,EAJe,KAIJ8C,EAJI,KAIUC,EAJV,OAK2C3D,GAAc,GAAIjL,EAAS,eAAgBD,EAAS,CAACC,IALhG,mBAKf6O,EALe,KAKDC,EALC,KAKgBC,EALhB,OAM+B9D,IAAc,EAAOjL,EAAS,WAAYD,EAAS,CAACC,IANnF,mBAMfgP,EANe,KAMLC,EANK,KAMQC,EANR,KAQpBzD,GAAkBzL,EAAS,CAACA,IAG5B,IAAImP,EAA6B,WAC/BR,EAAa,IACbG,EAAgB,KAIlBxD,2BAAgB,WACdzL,EAAQsP,EAA4BpP,EAASC,KAC5C,CAACkF,IAEJlD,qBAAU,WAAM,8CACd,6BAAA3E,EAAA,sEACqBqQ,GAAI7C,eAAe,CAAC3F,QADzC,OACMoB,EADN,OAEEqI,EAAarI,EAAO7J,KAAKoP,WAF3B,4CADc,sBAMdhM,GANe,WAAD,iCAMQE,EAASC,KAC9B,CAACkF,EAAKnF,EAASC,IAGlBgC,qBAAU,WAAM,8CACd,6BAAA3E,EAAA,sEACsBqQ,GAAI5C,aAAa,CAAC5F,QADxC,OACMkK,EADN,OAEEN,EAAgBM,EAAQ3S,MAF1B,4CADc,sBAMdoD,GANe,WAAD,iCAMWE,EAASC,KACjC,CAACkF,IAEJ,IAAItC,EAAY,WACdxC,EAAaJ,EAAS,CAAC4O,EAAsBG,EAAyBG,KAIxE,OADApO,QAAQC,IAAI8K,EAAW,aAErB,yBAAK1Q,UAAW,kBAAmBV,IAAKS,EAAM2G,SAASC,UACrD,kBAACe,EAAA,OAAD,KACE,+BAAQgJ,EAAU1G,QAEpB,kBAAC,GAAD,CAAQ0G,UAAWA,EAAW1Q,UAAW,qBAEzC,yBAAKA,UAAW,cAEZ8C,EAAQ4N,GAAa,uDACnB,kBAAC,WAAD,KACE,yBAAK1Q,UAAW,mBAKd,yBAAKA,UAAS,gBAAW6T,EAAW,OAAS,KAC1CnD,EAAU1G,OAEb,kBAAC,EAAD,CAAWhK,UAAS,iCAA4B6T,EAAW,WAAa,IAC7DlM,QAAS,kBAAMmM,GAAaD,OAEzC,yBAAK7T,UAAS,2BAAsB6T,EAAW,OAAS,KACtD,6BACE,0BAAM7T,UAAW,SAAU0Q,EAAUwD,MAAMC,MAC3C,0BAAMnU,UAAW,QAAS4D,EAAU8M,EAAUjH,KAAKC,MAAnD,sBACA,0BAAM1J,UAAW,SAAU0Q,EAAUjH,KAAKI,QAA1C,gBACA,0BAAM7J,UAAW,QAAS+D,EAAW2M,EAAU0D,WAEjD,yBAAKpU,UAAW,gBAAhB,gEACA,uBAAGA,UAAW,eAAgB0Q,EAAU2D,MACxC,yBAAKrU,UAAW,gBACd,kBAAC,KAAD,CAAM6K,GAAI,SAAU7K,UAAW,cAA/B,gBACA,kBAAC,KAAD,CAAM6K,GAAE,mBAAc6F,EAAU4D,MAAQtU,UAAW,cAAe0Q,EAAU6D,SAC5E,kBAAC,KAAD,CAAM1J,GAAE,mBAAc6F,EAAUjP,KAAOzB,UAAW,cAAe0Q,EAAU8D,OAC3E,0BAAMxU,UAAW,eAAjB,KAAmC+J,OAM/C,yBAAK/J,UAAW,2BAEZ0T,EAAa9I,MAAM,EAAG,IAAIrI,KAAI,SAAAkS,GAC5B,OACE,kBAAC,GAAD,CAAWnT,KAAMmT,EAAInV,IAAKmV,EAAG1K,IAAKV,WAAW,EAAM5B,UAAWA,QAKtE,kBAAC,GAAD,CAASsC,IAAKA,UGvFL2K,OAlBf,WACE,OACE,kBAAC,IAAD,KAEIC,GAAOpS,KAAI,SAAAqS,GAAK,OACd,kBAAC,IAAD,CACEtV,IAAKsV,EAAMpN,KACXqN,WAAuBC,IAAhBF,EAAMC,OAA6BD,EAAMC,MAChDjC,UAAWgC,EAAMhC,UACjBpL,KAAMoN,EAAMpN,UAIlB,kBAAC,IAAD,CAAUuN,KAAM,IAAKlK,GAAI,SAAUgK,OAAO,MCbjC,IACbG,gBALsB,kBAMtBC,kBALwB,qBCCnB,SAASC,GAAc9O,GAC5B,MAAO,CAAEoL,KAAM2D,GAAYH,gBAAiB5O,cCmC/BgP,OA7Bf,WACE,IAAIC,EAAWC,cAaf,OAXAzO,qBAAU,WACRwO,EDNK,CAAE7D,KAAM2D,GAAYF,sBCOxB,CAACI,IAEJxO,qBAAU,WACR0B,OAAOC,iBAAiB,YAAY,SAAC0G,GAAKvJ,QAAQC,IAAIsJ,EAAG,kBAG3DrI,qBAAU,WACR0B,OAAOC,iBAAiB,gBAAgB,SAAC0G,GAAKvJ,QAAQC,IAAIsJ,EAAG,kBAG7D,kBAAC,KAAD,KACE,6BACE,kBAACxH,EAAA,OAAD,KACE,6HAEF,kBAAC,EAAD,MACA,yBAAK1H,UAAW,qBACd,kBAAC,GAAD,UCnBJuV,I,YAAcC,QACW,cAA7BjN,OAAO7B,SAAS+O,UAEe,UAA7BlN,OAAO7B,SAAS+O,UAEhBlN,OAAO7B,SAAS+O,SAASjP,MACvB,4DAsCN,SAASkP,GAAgBC,EAAOC,GAC9BnS,UAAUoS,cACPC,SAASH,GACTI,MAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB/P,QACf1C,UAAUoS,cAAcQ,YAI1B1Q,QAAQC,IACN,iHAKEgQ,GAAUA,EAAOU,UACnBV,EAAOU,SAASN,KAMlBrQ,QAAQC,IAAI,sCAGRgQ,GAAUA,EAAOW,WACnBX,EAAOW,UAAUP,WAO5BQ,OAAM,SAAAC,GACL9Q,QAAQ8Q,MAAM,4CAA6CA,M,aC7F3DC,GAAY,CAChBtQ,WAAY,IAYCuQ,oBAAgB,CAC7BvQ,WAVK,WAAqE,IAA1CA,EAAyC,uDAA9BsQ,GAAUtQ,WAAYtB,EAAQ,uCACzE,OAAQA,EAAO0M,MACb,KAAK2D,GAAYH,gBACf,OAAOlQ,EAAOsB,WAChB,QACE,OAAOA,M,sBCNHmJ,I,aAUAqH,IAVV,SAAUrH,KAAV,0EACiB,OADjB,SACuB9P,aAAK0T,GAAI5D,iBADhC,OAME,OALMpE,EADR,OAEM/E,EAAa,GACb+E,EAAOE,UACTjF,EAAa/E,EAAiB8J,EAAO7J,OAJzC,SAMQuV,aAAI3B,GAAc9O,IAN1B,wCAUA,SAAUwQ,KAAV,kEACE,OADF,SACQE,aAAW3B,GAAYF,kBAAmB1F,IADlD,wCAIeqH,U,SCfXG,GAAiBC,eACjBC,GAAmB1O,OAAO2O,sCAAwCC,KAEvDC,gBACbC,GACAJ,GAAiBK,aAAgBP,MAGnCA,GAAeQ,IAAIX,ICJnBY,IAASC,OACP,kBAAC,IAAaC,SAAd,CAAuBC,MAAOC,IAC5B,kBAAC,GAAD,OAEF7Q,SAAS8Q,eAAe,SJSnB,SAAkBjC,GACvB,GAA6C,kBAAmBnS,UAAW,CAGzE,GADkB,IAAIqU,IAAIC,GAAwBxP,OAAO7B,SAASnG,MACpDyX,SAAWzP,OAAO7B,SAASsR,OAIvC,OAGFzP,OAAOC,iBAAiB,QAAQ,WAC9B,IAAMmN,EAAK,UAAMoC,GAAN,sBAEPxC,KAgEV,SAAiCI,EAAOC,GAEtC1K,MAAMyK,GACHI,MAAK,SAAAkC,GAEJ,IAAMC,EAAcD,EAASE,QAAQnN,IAAI,gBAEnB,MAApBiN,EAASxM,QACO,MAAfyM,IAA8D,IAAvCA,EAAY3O,QAAQ,cAG5C9F,UAAUoS,cAAcuC,MAAMrC,MAAK,SAAAC,GACjCA,EAAaqC,aAAatC,MAAK,WAC7BxN,OAAO7B,SAAS4R,eAKpB5C,GAAgBC,EAAOC,MAG1BY,OAAM,WACL7Q,QAAQC,IACN,oEArFA2S,CAAwB5C,EAAOC,GAI/BnS,UAAUoS,cAAcuC,MAAMrC,MAAK,WACjCpQ,QAAQC,IACN,iHAMJ8P,GAAgBC,EAAOC,OIhC/BC,K","file":"static/js/main.20b81bd9.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M1775.84 322.588c6.017 1.003 53.146-9.526 55.151-6.016 3.008 4.512 24.066 155.925 18.55 156.927s-44.62 10.028-44.62 10.028c-3.01-20.556-28.579-147.903-29.08-160.939m75.205-14.54l20.556 162.945c10.529-.502 53.145-3.51 57.156-4.011-6.017-61.668-16.545-158.934-16.545-158.934-20.055-4.01-41.113-4.01-61.167 0m-40.61 226.117s92.752-23.564 126.344-12.033c17.046 61.668 48.13 407.611 51.139 421.65-21.057 2.506-90.246 8.523-95.761 10.027-4.512-26.071-81.723-403.1-81.723-419.644m343.436-207.566c5.515 1.504 54.65-5.014 55.15-1.504 1.003 12.033 6.017 157.429.502 157.93s-44.622 4.011-44.622 4.011c-1.002-20.054-12.032-146.9-11.03-160.437m75.707-4.011l4.01 160.939c10.53 0 52.644 2.507 57.156 2.005-1.002-61.668 0-158.933 0-158.933-20.054-3.51-40.61-5.014-61.166-4.011M2164.9 538.677s94.759-12.534 126.846 2.507c7.02 72.197 6.017 408.614 7.02 422.652-21.56 0-90.247 1.003-95.762 2.005-1.003-26.07-39.608-410.619-38.104-427.164m-220.1-413.627c54.65 278.76 96.263 755.058 97.767 785.641 0 0 43.117 1.003 91.75 4.011-28.578-300.319-63.674-780.127-63.172-795.669-12.033-13.537-126.345 6.017-126.345 6.017m-120.328 659.297c-10.528-78.213-290.29-166.955-447.72-138.377 0 0-19.553-172.47-27.074-339.426-6.518-143.39-1.003-282.77.501-305.833-10.528-7.52-123.837 46.627-185.004 69.188 0 0 73.2 309.845 126.345 952.597 0 0 84.73 9.025 230.127-19.052s317.365-115.816 302.825-219.097M1482.541 925.23l-24.567-176.983c6.017-3.008 156.928 53.145 172.972 63.173-2.507 11.03-148.405 113.81-148.405 113.81M610.665 322.588c6.016 1.003 53.144-9.526 55.15-6.016 3.008 4.512 24.066 155.925 18.55 156.927s-44.621 10.028-44.621 10.028c-3.008-20.556-28.578-147.903-29.08-160.939m75.206-14.54l20.556 162.945c10.528-.502 53.145-3.51 57.155-4.011-6.517-61.668-16.545-158.934-16.545-158.934-20.054-4.01-41.112-4.01-61.166 0m-40.611 226.117s92.753-23.564 126.344-12.033c17.047 61.668 48.132 407.611 51.14 421.65-21.058 2.506-90.246 8.523-95.761 10.027-4.513-26.071-81.723-403.1-81.723-419.644m343.436-207.566c5.515 1.504 54.65-5.014 55.15-1.504 1.003 12.033 6.017 157.429.502 157.93s-44.622 4.011-44.622 4.011c-1.003-20.054-11.531-146.9-11.03-160.437m75.706-4.011l4.011 160.939c10.53 0 52.644 2.507 57.156 2.005-1.003-61.668 0-158.933 0-158.933-20.054-3.51-40.61-4.512-61.167-4.011m-64.676 216.089s94.758-12.534 126.846 2.507c7.02 72.197 6.016 408.614 7.02 422.652-21.56 0-90.247 1.003-95.762 2.005-.501-26.07-39.608-410.619-38.104-427.164m-220.1-413.627c54.65 278.76 96.263 755.058 97.767 785.641 0 0 43.117 1.003 91.75 4.011-28.578-300.319-63.674-780.127-63.172-796.17-12.033-13.036-126.345 6.518-126.345 6.518M659.297 784.347c-10.529-78.213-290.291-166.955-447.72-138.377 0 0-19.554-172.47-27.074-339.426-6.518-143.39-1.003-282.77.501-305.833C174.476-6.31 61.167 47.338 0 69.899c0 0 73.2 309.845 126.344 952.597 0 0 84.731 9.025 230.128-19.052s317.365-115.816 302.825-219.097M317.365 925.23l-24.567-176.983c6.017-3.008 156.928 53.145 172.972 63.173-2.507 11.03-148.405 113.81-148.405 113.81\",\n  fill: \"#de698c\"\n});\n\nvar SvgBilibiliLogo = function SvgBilibiliLogo(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"BILIBILI_LOGO_svg__icon\",\n    viewBox: \"0 0 2299 1024\",\n    width: 449.023,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgBilibiliLogo;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M886.4 841.6l-192-192C739.2 595.2 768 524.8 768 448c0-176-144-320-320-320S128 272 128 448s144 320 320 320c76.8 0 147.2-25.6 201.6-73.6l192 192c6.4 6.4 16 9.6 22.4 9.6s16-3.2 22.4-9.6c12.8-12.8 12.8-32 0-44.8zM448 704c-140.8 0-256-115.2-256-256s115.2-256 256-256 256 115.2 256 256-115.2 256-256 256z\",\n  fill: \"#aaa\"\n});\n\nvar SvgSearch = function SvgSearch(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"search_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgSearch;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#e7e7e7\",\n  d: \"M0 0h80v80H0z\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M45.78 57.73h2.29a73.4 73.4 0 014.23 9.5 57.14 57.14 0 012.62 10.5 50.58 50.58 0 01-29.86 0 57.14 57.14 0 012.62-10.5 73.4 73.4 0 014.23-9.5h2.29l2.67 7.21 2.41-7.21h1.42l2.41 7.21zM31.72 18.51l4.87 4.87a1.8 1.8 0 010 2.55 1.8 1.8 0 01-2.55 0l-4.87-4.87a1.8 1.8 0 010-2.55 1.8 1.8 0 012.55 0zm16.85 0a1.8 1.8 0 012.55 0 1.8 1.8 0 010 2.55l-4.87 4.87a1.8 1.8 0 01-2.55 0 1.8 1.8 0 010-2.55z\",\n  fill: \"#ccc\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  \"data-name\": \"Combined-Shape\",\n  d: \"M24.2 24.22h31.6a7.2 7.2 0 017.2 7.2v20.12a7.2 7.2 0 01-7.2 7.2H24.2a7.2 7.2 0 01-7.2-7.2V31.42a7.2 7.2 0 017.2-7.2zm1 4a4.24 4.24 0 00-4.2 4.29v17.94a4.24 4.24 0 004.21 4.27h29.5A4.24 4.24 0 0059 50.45V32.51a4.24 4.24 0 00-4.21-4.27z\",\n  fill: \"#ccc\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  \"data-name\": \"Combined-Shape\",\n  d: \"M25.88 29.84h28.24a3.22 3.22 0 013.22 3.21v16.86a3.22 3.22 0 01-3.22 3.21H25.88a3.22 3.22 0 01-3.22-3.21V33.05a3.22 3.22 0 013.22-3.21zm0 .8a2.42 2.42 0 00-2.42 2.41v16.86a2.42 2.42 0 002.42 2.41h28.24a2.42 2.42 0 002.42-2.41V33.05a2.42 2.42 0 00-2.42-2.41z\",\n  fill: \"#ccc\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  \"data-name\": \"Combined-Shape\",\n  d: \"M26.73 40.1l7-3.1a1.81 1.81 0 111.48 3.3l-7 3.1a1.81 1.81 0 11-1.48-3.3zm26.54 0a1.81 1.81 0 11-1.48 3.3l-7-3.1a1.81 1.81 0 111.48-3.3zm-15.69 7.8c-1 0-1.9-.7-2.7-2a.8.8 0 01.26-1.11.81.81 0 011.11.26c.54.86 1 1.23 1.33 1.23s.79-.37 1.33-1.23a.81.81 0 011.37 0c.54.86 1 1.23 1.33 1.23s.79-.37 1.33-1.23a.81.81 0 011.11-.26.8.8 0 01.26 1.11c-.8 1.28-1.69 2-2.7 2a2.71 2.71 0 01-2-1.06 2.71 2.71 0 01-2.03 1.06z\",\n  fill: \"#ccc\"\n});\n\nvar SvgBilibiliTv = function SvgBilibiliTv(props) {\n  return React.createElement(\"svg\", _extends({\n    \"data-name\": \"\\\\\\\\\\\\\\\\u56FE\\\\\\\\\\\\\\\\u5C42 1\",\n    viewBox: \"0 0 80 80\"\n  }, props), _ref, _ref2, _ref3, _ref4, _ref5);\n};\n\nexport default SvgBilibiliTv;","import React from 'react'\r\nimport BiliLogo from '../public/img/BILIBILI_LOGO.svg'\r\nimport SearchIcon from '../public/img/search.svg'\r\nimport BiliTvIcon from '../public/img/bilibili-tv.svg'\r\nimport './style/header.scss'\r\n\r\nconst Header = function () {\r\n  return (\r\n    <div className={'app-header'}>\r\n      <a href={'/index'} className={'app-header-logo'}>\r\n        <BiliLogo style={{ width: '100%', height: '100%'}}/>\r\n      </a>\r\n      <div className={'app-header-search'}>\r\n        <SearchIcon className={'header-search-icon'}/>\r\n        <span className={'header-search-text'}>我和我的祖我和我的祖</span>\r\n      </div>\r\n      <div className={'bili-tv-icon'}>\r\n        <BiliTvIcon style={{ borderRadius: '50%' }}/>\r\n      </div>\r\n      <div className={'app-header-download-button'}>\r\n        下载App\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","let URL_PREFIX = '/api';\r\n\r\nexport const CHANNEL_URL = URL_PREFIX + '/partitions';\r\n\r\n//轮播图\r\nexport const LOC_URL = URL_PREFIX + '/loc';\r\nexport const INDEX_RANKING_URL = URL_PREFIX + '/ranking';\r\nexport const RANKING_REGION_URL = URL_PREFIX + '/ranking/region';\r\nexport const ARCHIVE_RANK_URL = URL_PREFIX + '/archive_rank/getarchiverankbypartion';\r\nexport const VIDEO_URL = URL_PREFIX + '/video';\r\nexport const VIDEO_MP4_URL = URL_PREFIX + '/mp4';\r\nexport const VIDEO_RELATED_URL = URL_PREFIX + '/archive/related';\r\nexport const COMMENT_URL = URL_PREFIX + '/reply';\r\n\r\nexport const PIC_URL = URL_PREFIX + '/image';\r\n","import {PIC_URL} from \"../api/url\";\r\n\r\nexport function createChannelBar(data) {\r\n  let partitionList = data.partitionList;\r\n  // 树结构的导航栏\r\n  let indexPartition = {tid: 0, typename: '首页', children: [], isParent: true}\r\n  let channelBarList = [indexPartition];\r\n  // 包含所有导航栏的对象，key为导航的tid\r\n  let channelBarMap = {0: indexPartition};\r\n  Object.keys(partitionList).sort((a, b) => parseInt(a) - parseInt(b)).forEach(key => {\r\n    let isParent = false\r\n    if (parseInt(key) === 0) {\r\n      isParent = true\r\n    }\r\n    partitionList[key].forEach(partition => {\r\n      channelBarMap[partition.tid] = partition;\r\n      partition.isParent = isParent;\r\n      if (parseInt(key) === 0) {\r\n        partition.children = (partitionList[partition.tid] || []).map(childPartition => {\r\n          childPartition.parentId = partition.tid;\r\n          return childPartition\r\n        });\r\n        partition.children.unshift({\r\n          tid: partition.tid,\r\n          typename: '推荐',\r\n          isParent: false,\r\n          parentId: partition.tid\r\n        });\r\n        partition.childrenIds = partitionList[partition.tid].map(child => child.tid)\r\n        channelBarList.push(partition)\r\n      }\r\n    })\r\n  })\r\n  return {\r\n    channelBarList,\r\n    channelBarMap\r\n  }\r\n}\r\n\r\nexport function isEmpty(obj) {\r\n  let empty = false\r\n  if (!obj || (Array.isArray(obj) && obj.length === 0) || (typeof obj === 'object' && Object.keys(obj).length) === 0) {\r\n    empty = true\r\n  }\r\n  return empty\r\n}\r\n\r\nexport function getPicSuffix(){\r\n  const terminal = {\r\n    isIOS: /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent),\r\n    isAndroid: /(Android)/i.test(navigator.userAgent)\r\n  }\r\n  let suffix = \".webp\";\r\n  if (terminal.isIOS ===  true) {\r\n    suffix = \".jpg\";\r\n  } else if (terminal.isAndroid === true) {\r\n    suffix = \".webp\";\r\n  } else {\r\n    suffix = \".jpg\";\r\n  }\r\n  return suffix;\r\n}\r\n\r\nexport function getPicUrl(url, format) {\r\n  let suffix = getPicSuffix();\r\n  // picURL + \"?pic=\" + url + \"@480w_300h.webp\"\r\n  return `${PIC_URL}?pic=${url}${format + suffix}`;\r\n}\r\n\r\nexport function numberToW(num, suffix='万') {\r\n  if (num < 10000) return num;\r\n  return `${(num / 10000).toFixed(1)}${suffix}`\r\n}\r\n\r\nexport const getPubdate = (timestamp) => {\r\n  const publicDate = new Date(timestamp * 1000); // unix时间转换成本地时间戳\r\n  let publicDateStr = \"\";\r\n  const date = new Date();\r\n  if (publicDate.getFullYear() === date.getFullYear()) {\r\n    if (publicDate.getMonth() === date.getMonth()) {\r\n      const diffDate = date.getDate() - publicDate.getDate();\r\n      switch (diffDate) {\r\n        case 0:\r\n          if (date.getHours() - publicDate.getHours() === 0) {\r\n            publicDateStr = date.getMinutes() - publicDate.getMinutes() + \"分钟前\";\r\n          } else {\r\n            publicDateStr = date.getHours() - publicDate.getHours() + \"小时前\";\r\n          }\r\n          break;\r\n        default:\r\n          publicDateStr = publicDate.getMonth() + 1 + \"-\" + publicDate.getDate();\r\n      }\r\n    } else {\r\n      publicDateStr = publicDate.getMonth() + 1 + \"-\" + publicDate.getDate();\r\n    }\r\n  } else {\r\n    publicDateStr = publicDate.getFullYear() + \"-\" +\r\n      (publicDate.getMonth() + 1) + \"-\" +\r\n      publicDate.getDate();\r\n  }\r\n  return publicDateStr;\r\n};\r\n\r\nexport let ifFetch = (fetcher, history, pageKey) => {\r\n  if (history.action === 'PUSH' || !sessionStorage.getItem(pageKey)) {\r\n    fetcher()\r\n  }\r\n}\r\n\r\nexport let setCacheData = (pageKey, funcList) => {\r\n  let cacheMap = funcList.reduce((accumulate, func) => ({...accumulate,  ...func() }), {});\r\n  sessionStorage.setItem(pageKey, JSON.stringify(cacheMap))\r\n};\r\n\r\nexport let clearPageCache = (pageKey) => () => {\r\n  console.log('清除数据')\r\n  sessionStorage.removeItem(pageKey)\r\n};\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M472.064 751.552L72.832 352.32c-22.08-22.08-22.08-57.792 0-79.872 22.016-22.016 57.792-22.08 79.872 0L512 631.744l359.296-359.296c22.016-22.016 57.792-22.08 79.872 0s22.016 57.792 0 79.872L551.936 751.552c-22.08 22.016-57.792 22.016-79.872 0z\",\n  fill: \"#aaa\"\n});\n\nvar SvgArrowdown = function SvgArrowdown(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"arrow_down_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgArrowdown;","import React, {useCallback, useEffect, useState} from 'react';\r\nimport {useMappedState} from \"redux-react-hook\";\r\nimport {Link, withRouter} from 'react-router-dom'\r\nimport pathToRegexp from 'path-to-regexp';\r\nimport './style/channel_bar.scss'\r\nimport {isEmpty} from \"../util/tools\";\r\nimport ArrowDownIcon from '../public/img/arrow down.svg'\r\nimport {Helmet} from \"react-helmet\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nlet channelPathRe = pathToRegexp('/channel/:rid')\r\n\r\nconst ChannelBar = function (props) {\r\n  let {channelBarList = [], channelBarMap = {}} = useMappedState(useCallback(state => state.channelBar, []));\r\n  let [channelModalVisible, setChannelModalVisible] = useState(false);\r\n\r\n  let match = channelPathRe.exec(props.location.pathname);\r\n  let currentRid = 0;\r\n  if (match) {\r\n    currentRid = parseInt(match[1])\r\n  }\r\n  useEffect(() => {\r\n    let tabDom = document.querySelector('#rid' + currentRid);\r\n    if (tabDom) {\r\n      tabDom.scrollIntoView(true)\r\n    }\r\n  }, [currentRid, channelBarMap])\r\n\r\n  let currentChannel = channelBarMap[currentRid] || {};\r\n  // 如果当前所选频道是二级频道，就从一级频道中取出二级频道渲染\r\n  let childChannel = currentChannel.children || [];\r\n  if (!currentChannel.isParent) {\r\n    let parentChannel = channelBarMap[currentChannel.parentId] || {};\r\n    childChannel = parentChannel.children || []\r\n  }\r\n  let isSelected = (rid, channelBar) => {\r\n    return rid === currentRid || (channelBar.childrenIds || []).includes(currentRid)\r\n  };\r\n\r\n  let onModalLinkClick = (rid) => {\r\n    setChannelModalVisible(false);\r\n    props.history.push(rid === 0 ? 'index' : `/channel/${rid}`)\r\n    props.cacheData();\r\n  };\r\n\r\n  let onLinkClick = (path) => {\r\n    props.history.push(path);\r\n    props.cacheData();\r\n  }\r\n\r\n  return (\r\n    <div className={'channel-bar-container'}>\r\n      {\r\n        currentChannel.typename !== '首页' &&\r\n          <Helmet>\r\n            <title>{currentChannel.typename}</title>\r\n          </Helmet>\r\n      }\r\n      <Helmet>\r\n\r\n      </Helmet>\r\n      {/*一级频道*/}\r\n      <div className={'first-class-channel-container'}>\r\n        <div className={'tab-bar-container'}>\r\n          <div className={'tab-bar-scroll-container'}>\r\n            {\r\n              channelBarList.map(channelBar => {\r\n                let rid = channelBar.tid;\r\n                return (\r\n                  <a onClick={() => onLinkClick(rid === 0 ? '/index' : `/channel/${rid}`)} key={rid} className={`first-class-tab-item`} id={`rid${rid}`}>\r\n                    <p className={isSelected(rid, channelBar) ? 'selected-tab' : ''}>{channelBar.typename}</p>\r\n                  </a>\r\n                )\r\n              })\r\n            }\r\n          </div>\r\n        </div>\r\n        <div className={'arrow-container'} onClick={() => setChannelModalVisible(true)}>\r\n          <ArrowDownIcon/>\r\n        </div>\r\n      </div>\r\n      {/*二级频道*/}\r\n      {\r\n        !isEmpty(childChannel) &&\r\n        <div className={'second-class-channel-container'}>\r\n          <div className={'tab-bar-container'}>\r\n            <div className={'tab-bar-scroll-container'}>\r\n              {\r\n                childChannel.map(childChannel => {\r\n                  let rid = childChannel.tid;\r\n                  return (\r\n                    <a onClick={() => onLinkClick(`/channel/${rid}`)} key={rid} className={'tab-item'}>\r\n                      <p className={isSelected(rid, childChannel) ? `selected-tab` : ''}>{childChannel.typename}</p>\r\n                    </a>\r\n                  )\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      }\r\n      {/*点击下拉按钮时的模态框*/}\r\n      <div className={`fixed-first-class-container ${channelModalVisible ? 'open' : ''}`}>\r\n        <div>\r\n          {\r\n            channelBarList.map(channelBar => {\r\n              let rid = channelBar.tid;\r\n              return (\r\n                <a onClick={() => onModalLinkClick(rid)} key={rid}\r\n                   className={`tab-item ${channelBar.typename.length > 2 ? 'three-word' : ''}`}>\r\n                  <p className={isSelected(rid, channelBar) ? 'selected-tab' : ''}>{channelBar.typename}</p>\r\n                </a>\r\n              )\r\n            })\r\n          }\r\n        </div>\r\n        <div className={'arrow-container'} onClick={() => setChannelModalVisible(false)}>\r\n          <ArrowDownIcon className={'normal-arrow-size arrow-up'}/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nChannelBar.defaultProps = {\r\n  cacheData() {},\r\n}\r\n\r\nChannelBar.propTypes = {\r\n  cacheData: PropTypes.func\r\n}\r\n\r\nexport default withRouter(ChannelBar)\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M810.667 810.667H213.333V213.333h597.334m0-85.333H213.333A85.333 85.333 0 00128 213.333v597.334A85.333 85.333 0 00213.333 896h597.334A85.333 85.333 0 00896 810.667V213.333A85.333 85.333 0 00810.667 128m-384 213.333v341.334L640 512 426.667 341.333z\",\n  fill: \"#fff\"\n});\n\nvar SvgPlayBoxOutline = function SvgPlayBoxOutline(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"play-box-outline_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgPlayBoxOutline;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M800 128H224c-89.6 0-160 70.4-160 160v448c0 89.6 70.4 160 160 160h576c89.6 0 160-70.4 160-160V288c0-89.6-70.4-160-160-160zm96 608c0 54.4-41.6 96-96 96H224c-54.4 0-96-41.6-96-96V288c0-54.4 41.6-96 96-96h576c54.4 0 96 41.6 96 96v448z\",\n  fill: \"#fff\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M240 384h64v64h-64zm128 0h384v64H368zm64 192h352v64H432zm-128 0h64v64h-64z\",\n  fill: \"#fff\"\n});\n\nvar SvgDanmushu = function SvgDanmushu(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"danmushu_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2, _ref3);\n};\n\nexport default SvgDanmushu;","import React, {Fragment, useEffect, useRef} from \"react\";\r\nimport {getPicUrl} from \"../util/tools\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nlet defaultProps = {\r\n  style: {},\r\n  src: ''\r\n};\r\n\r\nlet propTypes = {\r\n  style: PropTypes.object,\r\n  src: PropTypes.string\r\n}\r\n\r\nfunction LazyLoadImg(props) {\r\n  let { style, src, className } = props;\r\n  let imgRef = useRef();\r\n  let hasLoadedRef = useRef(false);\r\n  let timeoutRef = useRef();\r\n\r\n  useEffect(() => {\r\n    loadImg();\r\n    window.addEventListener('scroll', loadImg);\r\n    return () => {\r\n      return window.removeEventListener('scroll', loadImg)\r\n    }\r\n  }, [src]);\r\n\r\n  let loadImg = () => {\r\n    if (hasLoadedRef.current) return;\r\n    clearTimeout(timeoutRef.current);\r\n    timeoutRef.current = setTimeout(() => {\r\n      if (isInViewArea()) {\r\n        imgRef.current.src = src;\r\n        hasLoadedRef.current = true\r\n      }\r\n    }, 300)\r\n  };\r\n\r\n  let isInViewArea = () => {\r\n    let imgDom = imgRef.current;\r\n    if (!imgDom) return\r\n    let { top } = imgDom.getBoundingClientRect();\r\n    let viewHeight = window.innerHeight;\r\n    return top <= viewHeight\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <img  style={ { width: '100%', height: '100%', ...style }} alt={''} ref={imgRef} src={''} className={className}/>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nLazyLoadImg.defaultProps = defaultProps;\r\nLazyLoadImg.propTypes = propTypes;\r\n\r\nexport default LazyLoadImg\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ccc\"\n}, React.createElement(\"path\", {\n  d: \"M2510 4605c-14-7-37-36-50-64-16-31-32-50-42-51-36 0-241-48-248-58-3-4-20-15-39-26-56-31-139-124-174-195l-32-66-3-694c-2-471 1-712 8-747 19-93 108-209 209-273 87-56 139-65 429-71l263-5-116-116c-96-97-115-122-115-147 0-45 30-90 68-103 70-23 87-12 283 186l183 185h340l186-184c119-119 195-187 213-192 70-17 137 35 137 107 0 28-16 48-117 150l-116 118 259 3c213 3 270 7 319 21 142 43 277 173 311 302 21 76 20 1412 0 1480-16 51-69 137-107 172-50 47-85 73-104 79-10 4-25 12-32 20-7 7-39 17-71 23-31 6-76 15-100 21-23 5-53 10-67 10s-25 5-25 11c0 27-36 83-64 100-23 14-50 19-103 19-67 0-75-2-108-31-19-17-35-40-35-50s-4-19-10-19c-5 0-10-7-10-15 0-13-65-15-527-15h-528l-19 46c-26 64-62 84-151 84-40-1-81-7-95-15zm1758-449c15-8 38-27 52-43l25-28V2775l-22-25c-13-13-23-27-23-31s-21-19-46-33l-47-26h-923c-535 0-924 4-924 9s-11 11-23 15c-35 8-76 53-86 95-6 22-7 275-3 667l7 630 29 35c15 19 40 39 55 46 20 9 254 12 964 13 787 0 942-2 965-14z\"\n}), React.createElement(\"path\", {\n  d: \"M3083 3903c-13-2-23-8-23-13 0-4-11-11-24-14s-45-29-70-57c-39-44-46-57-46-93 0-51 13-66 59-66 31 0 42 7 79 50 36 42 49 50 77 50 18 0 41-3 50-6 15-6 95-120 95-136 0-4 9-8 19-8 12 0 29 17 46 48 45 78 73 102 118 102 38 0 62-17 115-84 7-9 27-16 47-16 45 0 70 35 61 83-7 38-80 121-117 132-13 4-27 12-30 17s-29 11-58 15c-45 5-61 2-112-22-32-16-59-33-59-38 0-6-8-3-17 5-50 44-137 65-210 51zM2435 3358c-3-18-10-55-16-83-6-27-12-68-13-90l-1-40 115-21c63-11 122-23 130-27 8-3 65-13 125-22 61-9 119-20 130-25s36-11 56-15c44-7 43-7 69 138l16 99-23 9c-14 5-35 9-47 9s-26 3-30 8c-4 4-65 17-134 29-70 12-172 31-227 42-139 28-143 28-150-11zM4000 3369c-52-11-147-28-210-39s-124-24-135-29-37-12-59-15c-21-3-41-8-44-10-3-3 3-59 14-123l19-118 40 2c22 2 49 7 60 12 11 6 70 17 130 26 61 9 119 20 130 24 11 5 67 17 125 26 106 16 140 32 124 57-5 7-16 56-24 108-15 95-15 95-45 97-16 1-73-7-125-18z\"\n}));\n\nvar SvgTv = function SvgTv(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 660,\n    height: 660,\n    viewBox: \"0 0 6600 6600\"\n  }, props), _ref);\n};\n\nexport default SvgTv;","import React, {Fragment, useMemo} from \"react\";\r\nimport './style/video_card.scss';\r\nimport {getPicUrl, numberToW} from \"../util/tools\";\r\nimport PropTypes from \"prop-types\";\r\nimport PlayIcon from '../public/img/play-box-outline.svg';\r\nimport DanMuShu from '../public/img/danmushu.svg';\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport LazyLoadImg from \"./LazyLoadImg\";\r\nimport TVIcon from '../public/img/tv.svg';\r\n\r\nlet defaultProps = {\r\n  data: [],\r\n  style: {},\r\n  isRelated: false,\r\n  cacheData() {\r\n  },\r\n};\r\n\r\nlet propTypes = {\r\n  data: PropTypes.object,\r\n  style: PropTypes.object,\r\n  isRelated: PropTypes.bool,\r\n  cacheData: PropTypes.func,\r\n};\r\n\r\nlet VideoCard = function (props) {\r\n  let {style, isRelated, data} = props;\r\n\r\n  if (data.pic.indexOf(\"@320w_200h\") === -1) {\r\n    data.pic = getPicUrl(data.pic, \"@320w_200h\");\r\n  }\r\n\r\n  let playNum = isRelated ? data.stat.view : data.play;\r\n  let videoView = isRelated ? data.stat.danmaku : data.video_review;\r\n\r\n  let onLinkClick = (path) => {\r\n    props.history.push(path);\r\n    props.cacheData();\r\n  };\r\n\r\n  return (\r\n    <div className={'video-card-container'} style={{...style}}>\r\n      <a onClick={() => onLinkClick(`/video/${data.aid}`)} className={'link-to-video'}>\r\n        <div className={'img-container'}>\r\n          <LazyLoadImg src={data.pic} className={'img'}/>\r\n          <TVIcon className={'no-img-icon'}/>\r\n          {\r\n            (!!playNum || !!videoView)\r\n              ?\r\n              <div className={'play-view-container'}>\r\n                {\r\n                  !!playNum &&\r\n                  <div>\r\n                    <PlayIcon className={'icon'}/>\r\n                    <span className={'text'}>{numberToW(playNum)}</span>\r\n                  </div>\r\n                }\r\n                {\r\n                  !!videoView &&\r\n                  <div>\r\n                    <DanMuShu className={'icon'}/>\r\n                    <span className={'text'}>{numberToW(videoView)}</span>\r\n                  </div>\r\n                }\r\n              </div>\r\n              : null\r\n          }\r\n        </div>\r\n        <div className={'title-container'}>{data.title}</div>\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nVideoCard.propTypes = propTypes;\r\nVideoCard.defaultProps = defaultProps;\r\n\r\nexport default withRouter(VideoCard);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M723.1 483.4c-1.3-1.3-2.6-2.4-4-3.4L355.9 116c-14.6-14.6-38.4-14.6-53 0-14.6 14.6-14.6 38.5 0 53.1l340.4 341.2L302.9 851c-14.6 14.6-14.6 38.4 0 53 14.6 14.6 38.4 14.6 53 0l362.9-363.3c1.5-1.1 2.9-2.3 4.3-3.7 7.4-7.4 11-17.1 10.9-26.8.1-9.7-3.6-19.4-10.9-26.8z\",\n  fill: \"#aaa\"\n});\n\nvar SvgRight = function SvgRight(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"right_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgRight;","// 除了主页外的其他channel使用这个组件，根据不同的type生成不同的视频区\r\n// 比如推荐区，MAD·AMV区\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport './style/channel_video_area.scss'\r\nimport VideoCard from \"./VideoCard\";\r\nimport {isEmpty} from \"../util/tools\";\r\nimport {Link} from \"react-router-dom\";\r\nimport RithIcon from '../public/img/right.svg'\r\n\r\nlet defaultProps = {\r\n  data: {},\r\n  currentPage: 1,\r\n  fetchFunc: () => {},\r\n  isParent: true,\r\n}\r\n\r\nlet propTypes = {\r\n  data: PropTypes.object,\r\n  currentPage: PropTypes.number,\r\n  fetchFunc: PropTypes.func,\r\n  isParent: PropTypes.bool\r\n}\r\n\r\nlet ChannelVideoArea = function (props) {\r\n  let [ videos, setVideos ] = useState([]);\r\n  let { typename, fetchFunc, limit, tid, currentPage, loadMoreComponent } = props.data;\r\n  let { isParent } = props;\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      let videoData = await fetchFunc({rid: tid, page: currentPage});\r\n      if (currentPage) {\r\n        setVideos(videos.concat(videoData.data))\r\n        return\r\n      }\r\n      setVideos(videoData.data || [])\r\n    }\r\n    fetchData()\r\n  }, [tid, currentPage]);\r\n\r\n  if (limit) {\r\n    videos = videos.slice(0, limit)\r\n  }\r\n\r\n  return (\r\n    <div className={'channel-video-area'}>\r\n      <div className={'top-type-title-container'}>\r\n        <div className={'title'}>{typename === '推荐' ? '热门推荐' : typename}</div>\r\n        <div className={'title-right'}>\r\n          {\r\n            isParent &&\r\n            <Link to={'/channel/' + tid}>\r\n              <div className={'text'}>查看更多</div>\r\n              <div style={{ display: 'inline-block'}}><RithIcon className={'arrow-right'}/></div>\r\n            </Link>\r\n          }\r\n        </div>\r\n      </div>\r\n      <div className={'video-container'}>\r\n        {\r\n          isEmpty(videos) ?\r\n            <div className={'loading-container'}>加载中...</div>\r\n            :\r\n            videos.map(video => {\r\n              return <VideoCard data={video} key={video.aid}/>\r\n            })\r\n        }\r\n      </div>\r\n      {\r\n        loadMoreComponent\r\n      }\r\n    </div>\r\n  )\r\n};\r\n\r\nChannelVideoArea.defaultProps = defaultProps;\r\nChannelVideoArea.propTypes = propTypes;\r\n\r\nexport default ChannelVideoArea\r\n","export async function post(url, data = {}) {\r\n  let result = await fetch(url, {\r\n    method: 'post',\r\n    body: JSON.stringify(data),\r\n    headers: {\r\n      'Content-Type': 'application/json: charset=utf-8'\r\n    }\r\n  });\r\n  let jsonData = {success: false, message: '', errorCode: 0};\r\n  try {\r\n    jsonData = await result.json()\r\n  } catch (e) {\r\n    jsonData.message = e;\r\n    jsonData.errorCode = result.status\r\n  }\r\n  return jsonData\r\n}\r\n\r\nexport async function get(url, data = {}) {\r\n  let params = ''\r\n  Object.keys(data).forEach(key => {\r\n    params = params + '&' + key + '=' + data[key]\r\n  })\r\n  if (params) url = url + '?' + params;\r\n  let result = await fetch(url);\r\n  let jsonData = {success: false, message: '', errorCode: 0};\r\n  try {\r\n    jsonData = await result.json();\r\n  } catch (e) {\r\n    jsonData.message = e;\r\n    jsonData.errorCode = result.status\r\n  }\r\n  return jsonData\r\n}\r\n","import {get} from \"./fetch\";\r\nimport {LOC_URL, INDEX_RANKING_URL, RANKING_REGION_URL, ARCHIVE_RANK_URL} from \"./url\";\r\n\r\nexport function fetchLoc() {\r\n  return get(LOC_URL)\r\n}\r\n\r\nexport function fetchIndexRanking() {\r\n  return get(INDEX_RANKING_URL)\r\n}\r\n\r\nexport function fetchRankingRegion({ rid, day=7 }) {\r\n  let url = `${RANKING_REGION_URL}?rid=${rid}&day=${day}`;\r\n  return get(url)\r\n}\r\n\r\nexport function fetchArchiveRank({ rid, page }) {\r\n  let url =`${ARCHIVE_RANK_URL}?tid=${rid}&pn=${page}`;\r\n  return get(url)\r\n}\r\n","import React, {useCallback, useEffect, useState} from \"react\";\r\nimport ChannelBar from \"../../components/ChannelBar\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {useMappedState} from \"redux-react-hook\";\r\nimport pathToRegexp from \"path-to-regexp\";\r\nimport ChannelVideoArea from \"../../components/ChannelVideoArea\";\r\nimport {fetchArchiveRank, fetchRankingRegion} from \"../../api/ranking\";\r\nimport './style/channel.scss'\r\n\r\nlet channelPathRe = pathToRegexp('/channel/:rid');\r\n\r\nfunction Channel(props) {\r\n  let {channelBarList = [], channelBarMap = {}} = useMappedState(useCallback(state => state.channelBar, []));\r\n  let [videoAreasDatas, setVideoAreaDatas] = useState([]);\r\n  let [currentPage, setCurrentPage] = useState(1);\r\n\r\n  let match = channelPathRe.exec(props.location.pathname);\r\n  let currentRid = 0;\r\n  if (match) {\r\n    currentRid = parseInt(match[1])\r\n  }\r\n\r\n  let currentChannel = channelBarMap[currentRid];\r\n\r\n  useEffect(() => {\r\n    if (currentChannel) {\r\n      if (currentChannel.isParent) {\r\n        genVideoAreasWhenIsParent()\r\n      } else {\r\n        genVideoAreasWhenIsChild()\r\n      }\r\n    }\r\n  }, [currentRid, channelBarMap, currentPage]);\r\n\r\n  let genVideoAreasWhenIsParent = () => {\r\n    let videoAreasDatas = [];\r\n    currentChannel.children.forEach(child => {\r\n      videoAreasDatas.push({\r\n        ...child,\r\n        fetchFunc: fetchRankingRegion,\r\n        typename: child.typename,\r\n        limit: 4,\r\n      })\r\n    });\r\n    setVideoAreaDatas(videoAreasDatas)\r\n  };\r\n\r\n  let genVideoAreasWhenIsChild = () => {\r\n    let videoAreasDatas = [\r\n      {\r\n        ...currentChannel,\r\n        fetchFunc: fetchRankingRegion,\r\n        typename: '热门推荐',\r\n        tid: currentChannel.tid,\r\n        // 每一块区域显示的视频数量\r\n        limit: 4,\r\n      },\r\n      {\r\n        ...currentChannel,\r\n        fetchFunc: fetchArchiveRank,\r\n        typename: '最新视频',\r\n        tid: currentChannel.tid,\r\n        currentPage: currentPage,\r\n        limit: false,\r\n        loadMoreComponent: (\r\n          <div className={'load-more-container'}>\r\n            <span onClick={onLoadMoreClick}>点击加载更多</span>\r\n          </div>\r\n        )\r\n      }\r\n    ];\r\n    setVideoAreaDatas(videoAreasDatas)\r\n  };\r\n\r\n  let onLoadMoreClick = () => {\r\n    setCurrentPage(currentPage + 1)\r\n  }\r\n\r\n  return (\r\n    <div className={'channel-container'}>\r\n      <ChannelBar/>\r\n      {\r\n        videoAreasDatas.map(videoAreaData => {\r\n          return <ChannelVideoArea\r\n            key={videoAreaData.typename + videoAreaData.tid}\r\n            data={videoAreaData}\r\n            isParent={currentChannel.isParent}\r\n          />\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(Channel)\r\n","import React, {Children, useCallback, useEffect, useRef, useState} from \"react\";\r\nimport './style/carousel.scss';\r\n\r\nlet defaultProps = {\r\n  infinite: true,\r\n  autoPlay: true,\r\n  autoPlayTime: 2000,\r\n  duration: 0.3\r\n};\r\n\r\nlet Carousel = function (props) {\r\n  let innerRef = useRef(null);\r\n  let startXRef = useRef(0);\r\n  let timeOutRef = useRef(null);\r\n  let movingRef = useRef(false);\r\n  let [viewWidth, setViewWidth] = useState(0);\r\n  let [autoPlay, setAutoPlay] = useState(props.autoPlay);\r\n  let [currentIndex, setCurrentIndex] = useState(1);\r\n  let [innerItems, setInnerItems] = useState(null); // 经过处理后的元素\r\n\r\n  let childrenCount = React.Children.count(props.children);\r\n  let innerItemsCount = childrenCount > 1 ? childrenCount + 2 : childrenCount;\r\n  let infiniteSlide = childrenCount > 1 ? props.infinite : false;\r\n  let autoPlayTime = props.autoPlayTime;\r\n  let duration = props.duration + 's';\r\n  let innerWidth = innerRef.current && innerRef.current.offsetWidth || 0\r\n\r\n  let startAutoPlay = () => {\r\n    setAutoPlay(true)\r\n  };\r\n\r\n  let stopAutoPlay = () => {\r\n    clearTimeout(timeOutRef.current)\r\n    setAutoPlay(false)\r\n  };\r\n\r\n  // 自动播放轮播图\r\n  useEffect(() => {\r\n    if (autoPlay && viewWidth && childrenCount > 1) {\r\n      if (timeOutRef.current) clearTimeout(timeOutRef.current);\r\n      timeOutRef.current = setTimeout(() => {\r\n        innerRef.current.style.transition = 'none';\r\n        move(0);\r\n        setTimeout(() => {\r\n          finalMove('left', viewWidth, viewWidth / 2);\r\n        }, 0);\r\n      }, autoPlayTime);\r\n    }\r\n    return () => {\r\n      clearTimeout(timeOutRef.current)\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    innerRef.current.addEventListener('touchstart', touchStart);\r\n    innerRef.current.addEventListener('touchmove', touchMove);\r\n    innerRef.current.addEventListener('touchend', touchEnd);\r\n    window.addEventListener('resize', computeEachItemWidth)\r\n    if (childrenCount === 1) {\r\n      setCurrentIndex(0);\r\n    }\r\n    return () => {\r\n      innerRef.current.removeEventListener('touchstart', touchStart);\r\n      innerRef.current.removeEventListener('touchmove', touchMove);\r\n      innerRef.current.removeEventListener('touchend', touchEnd);\r\n      window.removeEventListener('resize', computeEachItemWidth)\r\n    };\r\n  });\r\n\r\n  // 获取可视区域大小\r\n  useEffect(() => {\r\n    computeEachItemWidth();\r\n  }, [innerItemsCount]);\r\n\r\n  // 第一次进入时初始化图片位置\r\n  useEffect(() => {\r\n    if (viewWidth) {\r\n      let index = childrenCount <= 1 ? 0 : 1;\r\n      move(0, index);\r\n    }\r\n  }, [viewWidth, props.children]);\r\n\r\n  useEffect(() => {\r\n    // 将原来的children中的第一个元素和最后一个元素，分别复制后放在末尾和头部，方便无限轮播\r\n    if (viewWidth) {\r\n      let firstEle = null;\r\n      let lastEle = null;\r\n\r\n      let newChildren = React.Children.map(props.children, (child, index) => {\r\n        child = React.cloneElement(child, {style: {width: '100%', height: '100%', display: 'inline-block'}});\r\n        let innerItem = (\r\n          <div key={index + 1} style={{width: viewWidth}} className={'carousel-item'}>\r\n            {child}\r\n          </div>\r\n        );\r\n        if (index === 0 && childrenCount > 1) firstEle = React.cloneElement(innerItem, {key: 0});\r\n        if (index === childrenCount - 1 && childrenCount > 1) lastEle = React.cloneElement(innerItem, {key: childrenCount + 1});\r\n        return innerItem;\r\n      });\r\n      let innerItems = [lastEle, ...newChildren, firstEle];\r\n      setInnerItems(innerItems);\r\n    }\r\n  }, [viewWidth, props.children]);\r\n\r\n  // 计算轮播图可视区域的大小\r\n  let computeEachItemWidth = () => {\r\n    let viewWidth = innerRef.current.offsetWidth / innerItemsCount;\r\n    if (!innerItemsCount) {\r\n      viewWidth = 0;\r\n    }\r\n    setViewWidth(viewWidth);\r\n  };\r\n\r\n  // 屏幕触摸时的移动\r\n  let move = (x, index) => {\r\n    index = index || currentIndex;\r\n    let moveX = -(index * viewWidth) + x;\r\n    innerRef.current.style.transform = `translateX(${moveX}px)`;\r\n  };\r\n\r\n  // 触摸结束后，整个图片的移动\r\n  let finalMove = (direction, distance, changeX) => {\r\n    movingRef.current = true;\r\n    innerRef.current.style.transition = `transform ${duration}`;\r\n    let nextIndex = direction === 'left' ? currentIndex + 1 : currentIndex - 1;\r\n    distance = Math.abs(distance);\r\n    if (nextIndex > innerItemsCount - 1 || nextIndex < 0 || Math.abs(changeX) < viewWidth / 4) {\r\n      nextIndex = currentIndex;\r\n      distance = 0;\r\n    }\r\n    if (direction === 'left') {\r\n      move(-distance);\r\n    } else {\r\n      move(distance);\r\n    }\r\n    if (infiniteSlide) {\r\n      if (nextIndex === 0) {\r\n        setPosition(innerItemsCount - 2);\r\n      }\r\n      if (nextIndex === innerItemsCount - 1) {\r\n        setPosition(1);\r\n      }\r\n    }\r\n    setCurrentIndex(nextIndex);\r\n    movingRef.current = false;\r\n  };\r\n\r\n  let setPosition = (nextIndex) => {\r\n    setTimeout(() => {\r\n      // 设置正确索引，下一次touchStart事件触发时，会正确设置translateX的值\r\n      // innerRef.current.style.transition = 'none';\r\n      setCurrentIndex(nextIndex);\r\n      // move(0, nextIndex)\r\n    }, 0);\r\n  };\r\n\r\n  let touchStart = (e) => {\r\n    e.stopPropagation();\r\n    stopAutoPlay();\r\n    innerRef.current.style.transition = 'none';\r\n    startXRef.current = e.changedTouches[0].pageX;\r\n    move(0);\r\n  };\r\n\r\n  let touchMove = (e) => {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    let x = e.changedTouches[0].pageX;\r\n    move(x - startXRef.current);\r\n  };\r\n\r\n  let touchEnd = (e) => {\r\n    e.stopPropagation()\r\n    let endX = e.changedTouches[0].pageX;\r\n    let changeX = endX - startXRef.current;\r\n    // 触摸滑动方向\r\n    let direction = changeX < 0 ? 'left' : 'right';\r\n    finalMove(direction, viewWidth, changeX);\r\n    startXRef.current = 0;\r\n    startAutoPlay()\r\n  };\r\n\r\n  return (\r\n    <div className={'carousel-outer-container'} >\r\n      <div className={'carousel-wrap'}>\r\n        <div\r\n          ref={innerRef}\r\n          className={'carousel-inner-container'}\r\n          style={{width: `${100 * innerItemsCount}%`}}\r\n        >\r\n          {innerItems}\r\n        </div>\r\n      </div>\r\n      {\r\n        childrenCount === 0 ? null :\r\n        <div className={'carousel-button-wrap '}>\r\n          {\r\n            [...new Array(childrenCount).keys()].map(key => {\r\n              key = childrenCount > 1 ? key + 1 : key;\r\n              return (\r\n                <span key={key} className={`carousel-button ${currentIndex === key ? 'selected' : ''}`}/>\r\n              )\r\n            })\r\n          }\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nCarousel.defaultProps = defaultProps;\r\n\r\nexport default Carousel;\r\n","import { fetchChannelBar } from \"./channel_bar\";\r\nimport {fetchIndexRanking, fetchLoc} from \"./ranking\";\r\nimport {fetchVideoInfo, fetchRelated, fetchCommentData} from \"./video\";\r\n\r\nexport default {\r\n  fetchChannelBar,\r\n  fetchLoc,\r\n  fetchIndexRanking,\r\n  fetchVideoInfo,\r\n  fetchRelated,\r\n  fetchCommentData\r\n}\r\n","import { get } from './fetch'\r\nimport { CHANNEL_URL } from \"./url\";\r\n\r\nexport function fetchChannelBar() {\r\n  return get(CHANNEL_URL)\r\n}\r\n","import {VIDEO_RELATED_URL, VIDEO_URL, COMMENT_URL} from \"./url\";\r\nimport {get} from \"./fetch\";\r\n\r\nexport function fetchVideoInfo({ aid }) {\r\n  let url = `${VIDEO_URL}?aid=${aid}`;\r\n  return get(url)\r\n}\r\n\r\nexport function fetchRelated({ aid }) {\r\n  let url = `${VIDEO_RELATED_URL}?aid=${aid}`;\r\n  return get(url)\r\n}\r\n\r\nexport function fetchCommentData({ aid, pn }) {\r\n  let url = `${COMMENT_URL}?aid=${aid}&pn=${pn}`\r\n  return get(url)\r\n}\r\n","import {useEffect, useLayoutEffect, useState} from \"react\";\r\nimport {clearPageCache} from \"./tools\";\r\n\r\n// 每个使用useState的地方都用这个替换，当action为POP时会检测是否有缓存数据\r\nexport function useCacheState(initial, pageKey, stateKey, history, dependence=[]) {\r\n  let [data, setData] = useState(initial);\r\n\r\n  useLayoutEffect(() => {\r\n    if (history) {\r\n      if (history.action === 'POP') {\r\n        let pageCache = sessionStorage.getItem(pageKey);\r\n        if (pageCache) {\r\n          pageCache = JSON.parse(pageCache);\r\n          setData(pageCache[stateKey] || initial);\r\n        }\r\n      }\r\n    }\r\n  }, dependence);\r\n  console.log(data, stateKey, pageKey, 'out')\r\n\r\n  let getCacheDataMap = () => {\r\n    console.log(data, stateKey, pageKey, 'inner')\r\n    return {[stateKey]: data};\r\n  };\r\n\r\n  return [data, setData, getCacheDataMap];\r\n}\r\n\r\nexport let useClearPageCache = (pageKey, dependence=[]) => {\r\n  useLayoutEffect(() => {\r\n    let clearFunc = clearPageCache(pageKey);\r\n    window.addEventListener('beforeunload', clearFunc);\r\n    return () => window.removeEventListener('beforeunload', clearFunc);\r\n  }, dependence);\r\n};\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"image\", {\n  width: \"100%\",\n  height: \"100%\",\n  xlinkHref: \"data:image/png;base64,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 AElFTkSuQmCC\"\n});\n\nvar SvgTvPause = function SvgTvPause(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 96,\n    height: 96\n  }, props), _ref);\n};\n\nexport default SvgTvPause;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"image\", {\n  width: \"100%\",\n  height: \"100%\",\n  xlinkHref: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAmASURB VHja7Vx7bBTHHf52dvfuOBuDXWNiwAYTwDgqUOMY00doSBsMEWpAhBaK6lZViYSoSNUQpcFJmv4R WqVIVZsmkBbSllQtBUJSIMGiUCgyKQED4VEetnnUthzsYBt8731N/9jZ2z1zwO3tPYzKt7J1d+P9 zffdb+Y3szPzM3Af9/H/DS7JO/Tf1PLbGQPOYseWPXsCOAAcu/SqjCt58qY9CkADtSeB2K6SQOif R9fTreqrFyeAB4nKSYY+Ab/YFVpK36Zb1PrGIvAg9r5WO1Vz4EDA98wqWMU+CTX/svwMFGhJeIHR f3rIGz8SHtY/0tornzstQWN+SAj2PMCBQMx7JPp+yKQX2qohgrc0q8S/DB7CK3lvrDHoA6Tk12UQ 7PkzCQGKYvlELFndOQuiTdczX/6q4KV64SFrwTmVfRlpEgAQkL0HoVo/KV7ZVQsRJGEJjP7mkate JhOsBf5jK/vs9ii7AgA82fbuJkhWQkXf712YsBd0+sLu0ct+SsZYC26ertxuPxzYE0ChQYPyVOvr f6Rha0H+ksCyhCQw+v8qm/czUmQt6D42bltrmAUEG+Bt/K0RtQnInqB6+dHJnNssFMufz3//1Gd6 FOdua4EDgXh08pfquTxrQVvjuIZgECGEIUODlk4B7PWh8PXWueXEY5Ew/gejjp9s1Qc2Lu79HHiI zVOn/ARea8H5/RMPakEEEYIExQ59ewLMAZ+CAsek5pYnx/M5FmMl3xp//XiTGqcRcEbgvFLz4Gq4 rEVHP6j8CEEEEEIEciqakDG4E6PBRC8uNt6fVT5q+eZYYah5KymurVCaGvVAG3snAQ+xfXbpD2Pq pPvem/UJggghBAkyNGBArWadceMTH5c8AQHPLvOV8d40TK7Q3S11D4j5FgmFj07NOblPjrHBg4cA sWtu8fIYEurWbd+4iDDCiECGykTH1sZHpyvWaWRMo7C+ZvTbJo6ocZWTUci12chSDw1BrUtt7j2+ 5NRBFXTgdM8UwBlO76gsXkrGZ5l2PHT3bZ9+4KrKZl40VgDrZK/kvrDc9ZVsM709tHO7frugG6o5 fTTaFQcCfmvhojWkNNsk74IbJ9ZWXTYlGCMnB/61/EUvDXr6wPDpL+4bC8F4DuGhzzH5Ea7tz/IT s80uIbjHTek7fFTWB0wj1otna4Wp2WaWKMiotUuMmRcBQCDUDy9anG1adpD7+O5xEMDpHiAQfjwH Oc7NZhDc1+ZDAA+OgICf5B7+WLYZ2YWn5tl8Q4CwsZwMzzYh2xBWVEIAISAQKiqyzSYZFFVAAE9A wOcOxonDXeEdBwFEAAHvGuncXOeJEx2TPjexivM4t5UY+BE5JKALIMOcGms/WnoIKjCzaeuMkplJ rtTZhfhF776QHkbdTm399QwC8MN3pLd0//MbA5czIgBjXMZI7BgX+hCAD/3oh++19vy//H2beiP9 AlQuZQJcEoLww6+LkP0Lzlb8vvkAFOeW7wSNA2dzLfh28CiQEEFIb0joh6+lr/xQ3Ya+c+mVkNTK XDy4VCiQIUFCGEH44YMPvneuFezY+Ge5O13kNS5lAnh9zU5jMsII6BLgW94yZlNTA42kS0SKBDBQ 0KiIkNGtu/urP35i/bXj94IAQ4QKBRLCTIQPvobPij/8+aZw+70gwNjr0qAggpDZI9b8t2Dz3vdV /+AXYGz+aVCZCBZeQ77aT6o3XG20t/qZDQGmCL0xmQHWd7K37J/PvNXfOvgFmCI01iMCRmP6Teew LX/bIvemogohrQJ0EUZ00puUDBkSPEvOl7XtnP75r0J0Zj69HjAkmOE1gqDhiSs3phxevKHn9OAX YIrQPWCM1f3wbe8q3Pn6nyLXBr8AXQSgQYWMSLRH9MO36vKIP1w4mKzR9PeBgRJMbxg9QvYpFY2f 5j7wcDImM+kBQ4RBX5/4BeBHAMED55Mzl1kPmCI4aODYdgUFB35awb0kwHrSSAEPZceYh75+bwmw bGg9l1O/cNjcZBtzdgQY5PkqoeGxwiVwsCqSeQHmViL/n4rJ33O6G5dpATp9Av7dEfO/7XrEsb2M CjDIk2WeN+fnLURK1vAyJcBsOEJb9eg6koLFzEwK0PegOfBHSqu+K0xLpen0C4i2+nVDVyzyzkv1 zn96BVjC5T9m5y91Ei4zLyDF4TLTAlIeLjMpIC3hMnMCuPSEy8wIiB6XSn24vLMAzemDTVlOlDy/ buiKp7xzM3FQKqwxAVRyujVXOxktEICp3P7ZzmaXdnBG0gVQrY8vdmZq7LyWm6cu1owa9QQpywx5 QPO3qoAAChroznMoAK4JdRMcmrCLSBc0UAIKeu1qhutOCXqugIISaNB2NWebTDI43AwVGgGFuvpT 2cHaWHag3lh5BRo0Ag0KlNON2SZkFy2NPRIUaAQqVMgLTqg92aZkB5rvO0ch601IgwK5I/TezmyT soP9u5r8YB6gUCEhsvhix+Fs00oU14/NOYMIZF1AdL24Zu/NJNcnM4tA68wP2FF9FoX0LaBQp3/6 tr5T2aZ3N9w8N2PLJT87766BGokJIjzwIlf0/ntGVW0WFxzvDPXs/i8f6fchgCBCkKGCmnNGCgAa ftfdcnYmySvK+rH7gVCunXxmx9MXIoGYXA9q5MUQ5gUPhmAI3JU5L5d+YXR+oeglbKLtGXmrX+Re NZQKbnFt96hhAKCqHO7rOdPxi/bDPkQQRojR13NtqJkVoUtwwQ03PHBBgGBmakDwLcy9ZZ659p36 LqgOsln11aK4tl/d/KJxzF5jgUZCBGFEIOndFwA1Hmj0DQdYjmqIEMGDj6ajiJeapw2ohIbf6kTI fuaXBaz/XWq5xXbozU6EoUBlO/6qvhkFiX33jL75SKlLMA4ISBAgsNwVAgIB7rqmpiqx0FrJkT1t /QjrXcmBBwS46441TR9gu6HThzAjaxxa0H/U2CSUgV114Ja0bDisS+1onTNGNJ61lFN7qo+waKC7 Nbkraru2RDBtf1j9MbMdQQQSazayJfE3Tg6N9T0Ha/ITgQA3hsDrzVk/fmapy93Vs655ew8CCCIM yUETQtR2jte74cGakri2rRcwIN87/nm52IQnvXu79fgEERzbYQxFM++cCDBteyDc1vZts/fjD1mx f27qVxGBAA4aZNZs5KSyua01mbYl8PZtJzbmUqgAKBSWu0KhsMsZ/VjbkWRsJ3bkMppjBsLu0Nhl 838QpN524knkgDWPkg6MBg4lJG3bXiJ/LFJBPhO27yOt+B8jC0u7WNENHgAAACV0RVh0ZGF0ZTpj cmVhdGUAMjAxOS0xMC0yMFQxNjo1OTo0NyswMzowMIa5kDcAAAAldEVYdGRhdGU6bW9kaWZ5ADIw MTktMTAtMjBUMTY6NTk6NDcrMDM6MDD35CiLAAAAAElFTkSuQmCC\"\n});\n\nvar SvgTvPlay = function SvgTvPlay(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 96,\n    height: 96\n  }, props), _ref);\n};\n\nexport default SvgTvPlay;","// 原本是想自定义video的播放栏，但发现移动端似乎很难定制，放弃了\r\nimport React, {Fragment, useEffect, useRef, useState} from \"react\";\r\nimport {getPicUrl, isEmpty} from \"../../util/tools\";\r\nimport TVPauseIcon from \"../../public/img/TV-Pause .svg\";\r\nimport TVPlayIcon from \"../../public/img/TV-Play.svg\";\r\nimport {VIDEO_MP4_URL} from \"../../api/url\";\r\nimport PropTypes from \"prop-types\";\r\nimport './style/player.scss'\r\n\r\nlet propTypes = {\r\n  videoInfo: PropTypes.object,\r\n  className: PropTypes.string\r\n}\r\n\r\nlet defaultProps = {\r\n  videoInfo: {},\r\n  className: 'player-container',\r\n}\r\n\r\nfunction getVideoUrl(url) {\r\n  // 拼接播放源地址\r\n  return `${VIDEO_MP4_URL}?video=https:${encodeURIComponent(url)}`;\r\n}\r\n\r\nfunction Player(props) {\r\n  let {videoInfo, className} = props;\r\n  let videoRef = useRef();\r\n  let [barrageOn, setBarrageOn] = useState(true);\r\n  let [isPlay, setIsPlay] = useState(false);\r\n  let [isShowCover, setIsShowCover] = useState(true)\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      if (isPlay) {\r\n        videoRef.current.play()\r\n      } else {\r\n        videoRef.current.pause()\r\n      }\r\n    }\r\n  }, [isPlay]);\r\n\r\n  let onPlayOrPause = () => {\r\n    setIsPlay(isPlay => !isPlay);\r\n    setIsShowCover(false)\r\n  };\r\n\r\n  return (\r\n    <div className={className}>\r\n      {\r\n        // 有数据再请求，要不会出现裂开的图片\r\n        !isEmpty(videoInfo) &&\r\n        <Fragment>\r\n          <video\r\n            height=\"100%\"\r\n            width=\"100%\"\r\n            preload=\"auto\"\r\n            x5-playsinline=\"true\"\r\n            webkit-playsinline=\"true\"\r\n            playsInline={true}\r\n            ref={videoRef}\r\n            controls\r\n            style={{ display: isShowCover ? 'none' : \"block\"}}\r\n          >\r\n            <source src={getVideoUrl(videoInfo.initUrl)} type={'video/mp4'}/>\r\n          </video>\r\n\r\n          { isShowCover && <img src={getPicUrl(videoInfo.pic, \"@480w_300h\")} className={'cover-img'}/> }\r\n          <div className={'play-or-pause'} onClick={onPlayOrPause} style={{ display: isShowCover ? 'block' : 'none'}}>\r\n            {\r\n              isPlay ? <TVPauseIcon className={'icon'}/> : <TVPlayIcon className={'icon'}/>\r\n            }\r\n          </div>\r\n        </Fragment>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nPlayer.defaultProps = defaultProps;\r\nPlayer.propTypes = propTypes;\r\n\r\nexport default Player\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 900V0h1800v1800H0V900z\",\n  fill: \"#b0b9c0\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#cbd1d8\"\n}, React.createElement(\"path\", {\n  d: \"M0 900V0h1800v1800h-525l-43-133c-24-72-52-152-64-177-11-24-30-65-41-90-12-25-23-48-25-52-2-5 44-8 103-8 119 0 149-10 189-62 39-52 49-139 44-381-5-229-10-252-61-305-40-42-80-52-202-52h-99l48-49c51-52 58-84 18-89-17-3-41 15-96 67l-73 71H834l-69-70c-70-71-106-87-119-53-5 11 7 31 39 63 25 25 45 48 45 52 0 3-53 7-117 9-141 5-177 21-215 97-22 44-23 60-26 275-4 250 4 311 44 364s70 63 185 63c92 0 101 2 94 18-30 71-108 293-127 360l-23 82H0V900z\"\n}), React.createElement(\"path\", {\n  d: \"M956 1480c-12-51-26-115-26-127 0-9 17-13 50-13 34 0 50 4 50 13-1 6-16 44-34 82-30 62-34 67-40 45zM794 1423c-16-37-30-71-32-75s22-8 53-8c55 0 57 1 51 23-3 12-11 46-17 75-7 28-15 52-19 52s-20-30-36-67zM464 1267c-38-33-43-83-36-372l5-250 28-27 27-28h834l27 28 28 27 5 250c7 280 2 334-32 370l-23 25H491l-27-23zm814-23c27-8 52-52 51-91-1-23-3-20-10 14-6 23-17 47-26 55-12 10-98 14-387 18l-371 5 360 3c198 1 370-1 383-4zm-767-30c-12-15-22-41-22-58-1-18-3-24-6-13-7 25 4 62 23 81 24 25 28 19 5-10zm-24-361c-1-49-3-9-3 87s2 136 3 88c2-49 2-127 0-175zm840 0c-1-49-3-9-3 87s2 136 3 88c2-49 2-127 0-175zm-443 230c4-5 26-8 48-8 27 0 44-6 51-17 18-27 1-32-24-7l-22 22-18-24-17-23-21 24-21 25-20-24c-11-13-23-21-26-18-11 11 5 37 28 47 29 11 33 12 42 3zM671 961c77-26 139-59 139-74 0-6-4-18-9-26-12-18-78-5-163 33-56 25-65 37-52 70 8 20 19 20 85-3zm554-12c4-11 5-22 3-24-15-13-123-61-162-71-44-12-51-11-62 4-8 9-14 20-14 23 0 12 36 36 85 56 94 39 141 43 150 12zM510 666c11-14 61-16 396-16h383l12 23c7 12 16 36 20 52l7 30 1-33c1-25-7-41-28-63l-29-29H913c-197 0-367 3-379 6-27 7-54 54-53 91 1 25 2 24 8-9 4-20 13-44 21-52z\"\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#e5e9ef\"\n}, React.createElement(\"path\", {\n  d: \"M0 900V0h1800v1800h-519l-30-92c-43-135-58-174-102-267-21-46-36-87-33-92s52-9 109-9c103 0 105 0 141-32 69-61 74-82 74-358 0-261-5-301-47-350-43-52-70-60-200-60h-117l48-49c49-50 56-75 24-95-15-9-30 1-96 67l-77 77H835l-77-77c-66-66-81-76-96-67-32 20-25 45 24 95l48 49H617c-125 0-153 7-194 52-49 52-53 80-53 346 0 256 4 290 42 345 34 48 70 59 185 59 56-1 103 1 103 3s-14 34-31 72c-30 67-96 258-118 341l-12 42H0V900z\"\n}), React.createElement(\"path\", {\n  d: \"M948 1424c-16-78-13-84 45-84 45 0 46 6 3 89l-33 64-15-69zM796 1419c-14-33-24-65-20-70 6-10 54-12 77-4 12 5 12 14-2 65-9 32-19 61-22 65-3 3-18-22-33-56zM468 1261l-33-29V648l33-29 32-29h810l32 29 33 29v581l-29 30-30 31H500l-32-29zm839-33c23-21 23-22 23-287 0-258-1-265-22-288l-21-23H906c-376 0-380 0-403 22-23 21-23 22-23 287 0 258 1 265 22 288l21 23h381c376 0 380 0 403-22z\"\n}), React.createElement(\"path\", {\n  d: \"M870 1233c-310-3-346-5-357-20-10-12-13-84-13-273 0-236 1-258 18-273s58-17 389-17c346 0 371 1 386 18 15 16 17 50 17 273 0 189-3 259-12 271-18 22-42 23-428 21zm18-155c9-9 15-9 24 0 19 19 42 14 67-12 27-29 10-47-20-20-18 16-20 16-40-2s-22-18-34-1c-15 21-44 22-51 2-6-15-34-22-34-8 0 4 10 17 22 30 24 25 48 29 66 11zM739 938c69-35 87-62 56-88-13-10-27-8-88 14-86 31-137 61-137 79 0 47 69 46 169-5zm479 30c28-28 13-49-63-84-91-42-130-51-150-34-31 26-18 50 43 77 58 26 128 51 148 52 5 1 15-4 22-11z\"\n}));\n\nvar SvgNoface = function SvgNoface(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 180,\n    height: 180,\n    viewBox: \"0 0 1800 1800\"\n  }, props), _ref, _ref2, _ref3);\n};\n\nexport default SvgNoface;","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport LazyLoadImg from \"./LazyLoadImg\";\r\nimport {getPicUrl, getPubdate} from \"../util/tools\";\r\nimport './style/commentListItem.scss'\r\nimport NoFaceIcon from '../public/img/noface.svg'\r\n\r\nlet propTypes = {\r\n  data: PropTypes.object\r\n}\r\n\r\nlet defaultProps = {\r\n  data: {},\r\n}\r\n\r\nfunction CommentListItem(props) {\r\n  let { data } = props;\r\n  return (\r\n    <div className={'comment-list-item-container'}>\r\n      <div className={'user-avatar-container'}>\r\n        <NoFaceIcon className={'no-avatar'}/>\r\n        <LazyLoadImg className={'avatar'} src={getPicUrl(data.member.avatar, \"@320w_200h\")}/>\r\n      </div>\r\n      <div className={'user-name-comment-container'}>\r\n        <div className={'user-name-container'}>\r\n          <span className={'user-name'}>{data.member.uname}</span>\r\n          <span className={'comment-publish-date'}>{getPubdate(data.ctime)}</span>\r\n        </div>\r\n        <div className={'comment-container'}>\r\n          <span>{data.content.message}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nCommentListItem.propTypes = propTypes;\r\nCommentListItem.defaultProps = defaultProps;\r\n\r\nexport default CommentListItem\r\n","import PropTypes from \"prop-types\";\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport {isEmpty} from \"../../util/tools\";\r\nimport CommentListItem from \"../../components/CommentListItem\";\r\nimport './style/comment.scss'\r\nimport api from \"../../api\";\r\n\r\nlet propTypes = {\r\n  data: PropTypes.array,\r\n  pageInfo: PropTypes.object,\r\n}\r\n\r\nlet defaultProps = {\r\n  data: [],\r\n  pageInfo: {},\r\n};\r\n\r\nfunction Comment(props) {\r\n  let { aid } = props;\r\n  let [currentPage, setCurrentPage] = useState(1);\r\n  let [commentListData, setCommentListData] = useState([]); // 评论列表\r\n  let [pageInfo, setPageInfo] = useState({}); // 分页信息\r\n  let loadingRef = useRef(false);\r\n\r\n  let resetState = () => {\r\n    setCurrentPage(1)\r\n    setCommentListData([])\r\n    setPageInfo({})\r\n  };\r\n\r\n  // aid改变代表切换了另一个视频\r\n  useEffect(() => {\r\n    resetState();\r\n  }, [aid]);\r\n\r\n  useEffect(() => {\r\n    loadingRef.current = true;\r\n    let _ = async () => {\r\n      let result = await getCommentData(aid, currentPage);\r\n      let data = result.data || {};\r\n      let replies = data.replies || [];\r\n      let pageInfo = data.page || {};\r\n      setCommentListData(commentListData => commentListData.concat(replies));\r\n      setPageInfo(pageInfo)\r\n      loadingRef.current = false\r\n    };\r\n    _()\r\n  }, [aid, currentPage]);\r\n\r\n  // 通过传参而不是直接用aid和commentPage， 是方便监听scroll事件时用最新的参数去请求评论\r\n  async function getCommentData(aid, commentPage) {\r\n    return  await api.fetchCommentData({ aid, pn: commentPage});\r\n  }\r\n\r\n  let onLoadMoreComment = () => {\r\n    if (!loadingRef.current) {\r\n      setCurrentPage(currentPage => currentPage + 1)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={'comment-list-container'}>\r\n      <div className={'comment-top-title'}>\r\n        评论\r\n        <span className={'total-num'}>（{pageInfo.acount || 0}）</span>\r\n      </div>\r\n      <div>\r\n        {\r\n          isEmpty(commentListData) ? <span>加载中...</span> :\r\n            commentListData.map(d => {\r\n              return (\r\n                <CommentListItem data={d} key={d.rpid}/>\r\n              )\r\n            })\r\n        }\r\n      </div>\r\n      {\r\n        !isEmpty(commentListData) &&\r\n        <div className={'load-more-container'} onClick={onLoadMoreComment}>\r\n          <span>点击加载更多</span>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nComment.propTypes = propTypes;\r\nComment.defaultProps = defaultProps;\r\n\r\nexport default Comment\r\n","import React, {Fragment, useEffect, useLayoutEffect, useRef, useState} from \"react\";\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport api from \"../../api/index\";\r\nimport {getPubdate, ifFetch, isEmpty, numberToW, setCacheData} from \"../../util/tools\";\r\nimport './style/video.scss';\r\nimport PopularIcon from '../../public/img/ic_popular.svg';\r\nimport ArrowDown from '../../public/img/arrow down.svg';\r\n\r\nimport Player from \"./Player\";\r\nimport VideoCard from \"../../components/VideoCard\";\r\nimport Comment from \"./Comment\";\r\nimport {Helmet} from \"react-helmet\";\r\nimport {useCacheState, useClearPageCache} from \"../../util/customHook\";\r\n\r\nfunction Video(props) {\r\n  let {match} = props;\r\n  let aid = match.params.aid;\r\n  let pageKey = `video/${aid}`, history = props.history;\r\n  let [videoInfo, setVideoInfo, getCacheVideoInfoMap] = useCacheState({}, pageKey, 'videoInfo', history, [pageKey]);\r\n  let [relatedVideo, setRelatedVideo, getCacheRelatedVideoMap] = useCacheState([], pageKey, 'relatedVideo', history, [pageKey]);\r\n  let [descOpen, setDescOpen, getCacheDescOpenMap] = useCacheState(false, pageKey, 'descOpen', history, [pageKey]);\r\n\r\n  useClearPageCache(pageKey, [pageKey]);\r\n\r\n  // 切换到别的视频时，清空当前视频的数据，这样才像重新到新的一个页面\r\n  let resetStateWhenToOtherVideo = () => {\r\n    setVideoInfo({});\r\n    setRelatedVideo([]);\r\n  };\r\n\r\n  // aid改变代表切换了另一个视频\r\n  useLayoutEffect(() => {\r\n    ifFetch(resetStateWhenToOtherVideo, history, pageKey);\r\n  }, [aid]);\r\n\r\n  useEffect(() => {\r\n    async function getVideoInfo() {\r\n      let result = await api.fetchVideoInfo({aid});\r\n      setVideoInfo(result.data.videoInfo);\r\n    }\r\n\r\n    ifFetch(getVideoInfo, history, pageKey);\r\n  }, [aid, history, pageKey]);\r\n\r\n  // 获取相关视频数据\r\n  useEffect(() => {\r\n    async function getRelatedVideo() {\r\n      let related = await api.fetchRelated({aid});\r\n      setRelatedVideo(related.data);\r\n    }\r\n\r\n    ifFetch(getRelatedVideo, history, pageKey);\r\n  }, [aid]);\r\n\r\n  let cacheData = () => {\r\n    setCacheData(pageKey, [getCacheVideoInfoMap, getCacheRelatedVideoMap, getCacheDescOpenMap]);\r\n  };\r\n\r\n  console.log(videoInfo, 'videoInfo');\r\n  return (\r\n    <div className={'video-container'} key={props.location.pathname}>\r\n      <Helmet>\r\n        <title>{videoInfo.title}</title>\r\n      </Helmet>\r\n      <Player videoInfo={videoInfo} className={'player-container'}/>\r\n      {/*视频详情介绍*/}\r\n      <div className={'video-desc'}>\r\n        {\r\n          isEmpty(videoInfo) ? <span>加载中...</span> :\r\n            <Fragment>\r\n              <div className={'title-container'}>\r\n                {/*<div className={'hot-tag'}>*/}\r\n                {/*  <PopularIcon className={'hot-tag-icon'}/>*/}\r\n                {/*  <span>热门</span>*/}\r\n                {/*</div>*/}\r\n                <div className={`title ${descOpen ? 'open' : ''}`}>\r\n                  {videoInfo.title}\r\n                </div>\r\n                <ArrowDown className={`arrow rotate-animation ${descOpen ? 'arrow-up' : ''}`}\r\n                           onClick={() => setDescOpen(!descOpen)}/>\r\n              </div>\r\n              <div className={`detail-container ${descOpen ? 'open' : ''}`}>\r\n                <div>\r\n                  <span className={'owner'}>{videoInfo.owner.name}</span>\r\n                  <span className={'view'}>{numberToW(videoInfo.stat.view)}次观看</span>\r\n                  <span className={'danmu'}>{videoInfo.stat.danmaku}弹幕</span>\r\n                  <span className={'date'}>{getPubdate(videoInfo.pubdate)}</span>\r\n                </div>\r\n                <div className={'warning-text'}>未经作者授权禁止转载</div>\r\n                <p className={'desc-detail'}>{videoInfo.desc}</p>\r\n                <div className={'bread-crumbs'}>\r\n                  <Link to={'/index'} className={'bread-item'}>主页</Link>\r\n                  <Link to={`/channel/${videoInfo.reid}`} className={'bread-item'}>{videoInfo.toptype}</Link>\r\n                  <Link to={`/channel/${videoInfo.tid}`} className={'bread-item'}>{videoInfo.tname}</Link>\r\n                  <span className={'desc-detail'}>av{aid}</span>\r\n                </div>\r\n              </div>\r\n            </Fragment>\r\n        }\r\n      </div>\r\n      <div className={'related-video-container'}>\r\n        {\r\n          relatedVideo.slice(0, 20).map(rv => {\r\n            return (\r\n              <VideoCard data={rv} key={rv.aid} isRelated={true} cacheData={cacheData}/>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n      <Comment aid={aid}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Video);\r\n","import Channel from '../pages/channel/Channel'\r\nimport Index from \"../pages/index/Index\";\r\nimport Video from \"../pages/video/Video\";\r\n\r\nexport default [\r\n  {\r\n    path: '/index',\r\n    component: Index\r\n  },\r\n  {\r\n    path: '/channel/:rid',\r\n    component: Channel\r\n  },\r\n  {\r\n    path: '/video/:aid',\r\n    component: Video\r\n  }\r\n]\r\n","import React, {useEffect, useState} from 'react';\r\nimport ChannelBar from \"../../components/ChannelBar\";\r\nimport Carousel from \"../../components/Carousel\";\r\nimport Api from '../../api/index';\r\nimport VideoCard from \"../../components/VideoCard\";\r\nimport './style/index.scss';\r\nimport {clearPageCache, getPicUrl, ifFetch, setCacheData} from \"../../util/tools\";\r\nimport {useCacheState, useClearPageCache} from \"../../util/customHook\";\r\n\r\nexport default function Index(props) {\r\n  let pageKey = 'index';\r\n  let history = props.history;\r\n  let [locData, setLocData, getCacheLocDataMap] = useCacheState([], pageKey, 'locData', history);\r\n  let [rankingData, setRankingData, getCacheRankingDataMap] = useCacheState([], pageKey, 'rankingData', history);\r\n\r\n  useClearPageCache(pageKey);\r\n\r\n  useState(async () => {\r\n    ifFetch(async () => {\r\n      let locData = await Api.fetchLoc();\r\n      setLocData(locData.data);\r\n    }, history, pageKey);\r\n  }, [locData, history]);\r\n\r\n  useState(async () => {\r\n    ifFetch(async () => {\r\n      let rankingIndex = await Api.fetchIndexRanking();\r\n      setRankingData(rankingIndex.data);\r\n    }, history, pageKey);\r\n  }, [rankingData, history]);\r\n\r\n  let cacheData = () => {\r\n    setCacheData('index', [getCacheLocDataMap, getCacheRankingDataMap]);\r\n  };\r\n\r\n  return (\r\n    <div className={'channel-index video-card-area'}>\r\n      <ChannelBar cacheData={cacheData}/>\r\n      <Carousel>\r\n        {\r\n          locData.map(imgItem => {\r\n            return (\r\n              <a href={imgItem.url} key={imgItem.id}>\r\n                <img alt='' src={getPicUrl(imgItem.pic, \"@480w_300h\")}/>\r\n              </a>\r\n            );\r\n          })\r\n        }\r\n      </Carousel>\r\n      <div className={'index-video-area-container'}>\r\n        {\r\n          rankingData.map(rkData => {\r\n            return (\r\n              <VideoCard data={rkData} key={rkData.aid} cacheData={cacheData}/>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\nimport routes from './routes'\r\n\r\nfunction NestRoutes() {\r\n  return (\r\n    <Switch>\r\n      {\r\n        routes.map(route => (\r\n          <Route\r\n            key={route.path}\r\n            exact={route.exact === undefined ? true : route.exact}\r\n            component={route.component}\r\n            path={route.path}\r\n          />\r\n        ))\r\n      }\r\n      <Redirect from={'/'} to={'/index'} exact={true}/>\r\n    </Switch>\r\n  )\r\n}\r\n\r\nexport default NestRoutes\r\n","const SET_CHANNEL_BAR = 'SET_CHANNEL_BAR';\r\nconst FETCH_CHANNEL_BAR = 'FETCH_CHANNEL_BAR';\r\n\r\n\r\nexport default {\r\n  SET_CHANNEL_BAR,\r\n  FETCH_CHANNEL_BAR\r\n}\r\n","import actionTypes from './action_types'\r\n\r\nexport function setChannelBar(channelBar) {\r\n  return { type: actionTypes.SET_CHANNEL_BAR, channelBar }\r\n}\r\n\r\nexport function fetchChannelBar() {\r\n  return { type: actionTypes.FETCH_CHANNEL_BAR }\r\n}\r\n","import React, {useEffect} from 'react';\r\nimport './public/style/app.scss';\r\nimport Header from \"./components/Header\";\r\nimport NestRoutes from \"./router/NestRoutes\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport {fetchChannelBar} from \"./redux/actions\";\r\nimport {useDispatch} from \"redux-react-hook\";\r\nimport {Helmet} from \"react-helmet\";\r\n\r\nfunction App() {\r\n  let dispatch = useDispatch();\r\n  // 获取导航栏的数据\r\n  useEffect(()=> {\r\n    dispatch(fetchChannelBar())\r\n  }, [dispatch]);\r\n\r\n  useEffect(()=>{\r\n    window.addEventListener('popstate', (e)=>{console.log(e, 'popstate')})\r\n  })\r\n\r\n  useEffect(()=>{\r\n    window.addEventListener('beforeunload', (e)=>{console.log(e, 'popstate')})\r\n  })\r\n  return (\r\n    <Router>\r\n      <div>\r\n        <Helmet>\r\n          <title>高仿哔哩哔哩-( ゜- ゜)つロ干杯~ - bilbili</title>\r\n        </Helmet>\r\n        <Header/>\r\n        <div className={'content-container'}>\r\n          <NestRoutes/>\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport actionTypes from './action_types'\r\n\r\nconst initState = {\r\n  channelBar: {}\r\n}\r\n\r\nexport function channelBarReducer(channelBar=initState.channelBar, action) {\r\n  switch (action.type) {\r\n    case actionTypes.SET_CHANNEL_BAR:\r\n      return action.channelBar\r\n    default:\r\n      return channelBar\r\n  }\r\n}\r\n\r\nexport default combineReducers({\r\n  channelBar: channelBarReducer\r\n})\r\n","import { call, put, takeLatest } from 'redux-saga/effects'\r\nimport Api from '../../api/index'\r\nimport {setChannelBar} from \"../actions\";\r\nimport actionTypes from '../action_types'\r\nimport {createChannelBar} from \"../../util/tools\";\r\n\r\nfunction* fetchChannelBar() {\r\n  const result = yield call(Api.fetchChannelBar);\r\n  let channelBar = {};\r\n  if (result.success) {\r\n    channelBar = createChannelBar(result.data);\r\n  }\r\n  yield put(setChannelBar(channelBar))\r\n}\r\n\r\n\r\nfunction* mySaga() {\r\n  yield takeLatest(actionTypes.FETCH_CHANNEL_BAR, fetchChannelBar)\r\n}\r\n\r\nexport default mySaga\r\n","import {applyMiddleware, createStore, compose} from \"redux\";\r\nimport reducer from './reducers'\r\nimport mySaga from './saga/index'\r\nimport createSagaMiddleware from 'redux-saga'\r\n\r\nlet sagaMiddleware = createSagaMiddleware();\r\nlet composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport default createStore(\r\n  reducer,\r\n  composeEnhancers(applyMiddleware(sagaMiddleware))\r\n  )\r\n\r\nsagaMiddleware.run(mySaga);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './public/style/global.scss'\r\nimport './public/style/normalize.scss'\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {StoreContext} from 'redux-react-hook';\r\nimport store from './redux/store'\r\n\r\nReactDOM.render(\r\n  <StoreContext.Provider value={store}>\r\n    <App/>\r\n  </StoreContext.Provider>,\r\n  document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}