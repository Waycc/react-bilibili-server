{"version":3,"sources":["public/img/BILIBILI_LOGO.svg","public/img/search.svg","public/img/bilibili-tv.svg","api/fetch.js","api/url.js","api/ranking.js","api/index.js","api/channel_bar.js","api/video.js","api/search.js","util/tools.js","util/constants.js","components/Header.jsx","public/img/arrow down.svg","components/ChannelBar.jsx","public/img/play-box-outline.svg","public/img/danmushu.svg","components/LazyLoadImg.jsx","public/img/tv.svg","components/VideoCard.jsx","public/img/right.svg","components/ChannelVideoArea.jsx","pages/channel/Channel.jsx","components/Carousel.jsx","util/customHook.js","public/img/TV-Pause .svg","public/img/TV-Play.svg","pages/video/Player.jsx","public/img/noface.svg","components/CommentListItem.jsx","pages/video/Comment.jsx","pages/video/Video.jsx","public/img/history.svg","public/img/search-close.svg","pages/search/components/SearchResultPane.jsx","pages/search/components/renderFunc.js","pages/search/components/SearchResult.jsx","pages/search/Search.jsx","router/routes.js","pages/index/Index.jsx","router/NestRoutes.jsx","redux/action_types.js","redux/actions.js","App.jsx","serviceWorker.js","redux/reducers.js","redux/saga/index.js","redux/store.js","index.jsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","createElement","d","fill","props","className","viewBox","width","height","_ref4","_ref5","get","url","a","data","params","keys","forEach","fetch","result","jsonData","success","message","errorCode","json","status","CHANNEL_URL","URL_PREFIX","LOC_URL","INDEX_RANKING_URL","RANKING_REGION_URL","ARCHIVE_RANK_URL","VIDEO_URL","VIDEO_MP4_URL","VIDEO_RELATED_URL","COMMENT_URL","SEARCH_DEFAULT","HOT_WORD","SUGGEST_URL","ALL_SEARCH","TYPE_SEARCH","PIC_URL","fetchRankingRegion","rid","day","fetchArchiveRank","page","fetchChannelBar","fetchLoc","fetchIndexRanking","fetchVideoInfo","aid","fetchRelated","fetchCommentData","pn","getSearchDefault","getHotWord","getSuggest","keyword","getAllSearchResult","pageSize","order","searchType","getTypeSearchResult","createChannelBar","partitionList","indexPartition","tid","typename","children","isParent","channelBarList","channelBarMap","0","sort","b","parseInt","partition","map","childPartition","parentId","unshift","childrenIds","child","push","isEmpty","obj","empty","Array","isArray","getPicUrl","format","suffix","terminal","test","navigator","userAgent","getPicSuffix","startsWith","numberToW","num","toFixed","getPubdate","timestamp","publicDate","Date","publicDateStr","date","getFullYear","getMonth","getDate","getHours","getMinutes","ifFetch","fetcher","history","pageKey","action","sessionStorage","getItem","setCacheData","funcList","cacheMap","reduce","accumulate","func","setItem","JSON","stringify","clearPageCache","removeItem","globalEventBus","eventMap","getEventList","name","setEventList","eventList","on","emit","remove","filter","fun","CACHE_PAGE","SEARCH_HISTORY","NO_HEADER_PAGE","withRouter","useState","defaultSearch","setDefaultSearch","pathname","location","useEffect","api","console","log","href","style","onClick","localStorage","show_name","borderRadius","channelPathRe","pathToRegexp","ChannelBar","useMappedState","useCallback","state","channelBar","channelModalVisible","setChannelModalVisible","match","exec","currentRid","tabDom","document","querySelector","scrollIntoView","currentChannel","childChannel","isSelected","includes","onLinkClick","path","cacheData","Helmet","id","onModalLinkClick","defaultProps","LazyLoadImg","src","imgRef","useRef","hasLoadedRef","timeoutRef","loadImg","window","addEventListener","removeEventListener","current","clearTimeout","setTimeout","isInViewArea","imgDom","getBoundingClientRect","top","innerHeight","alt","ref","VideoCard","isRelated","pic","indexOf","playNum","stat","view","play","videoView","danmaku","video_review","title","ChannelVideoArea","videos","setVideos","fetchFunc","limit","currentPage","loadMoreComponent","videoData","concat","fetchData","slice","to","display","video","videoAreasDatas","setVideoAreaDatas","setCurrentPage","genVideoAreasWhenIsParent","genVideoAreasWhenIsChild","onLoadMoreClick","videoAreaData","Carousel","innerRef","startXRef","timeOutRef","movingRef","viewWidth","setViewWidth","autoPlay","setAutoPlay","currentIndex","setCurrentIndex","innerItems","setInnerItems","childrenCount","React","Children","count","innerItemsCount","infiniteSlide","infinite","autoPlayTime","duration","offsetWidth","transition","move","finalMove","touchStart","touchMove","touchEnd","computeEachItemWidth","firstEle","lastEle","newChildren","index","cloneElement","innerItem","x","moveX","transform","direction","distance","changeX","nextIndex","Math","abs","setPosition","e","stopPropagation","changedTouches","pageX","preventDefault","useCacheState","initial","stateKey","dependence","setData","useLayoutEffect","pageCache","parse","getCacheDataMap","useClearPageCache","clearFunc","xlinkHref","Player","videoInfo","videoRef","isPlay","setIsPlay","isShowCover","setIsShowCover","pause","preload","x5-playsinline","webkit-playsinline","playsInline","controls","initUrl","encodeURIComponent","type","CommentListItem","member","avatar","uname","ctime","content","Comment","commentListData","setCommentListData","pageInfo","setPageInfo","loadingRef","getCommentData","commentPage","replies","_","acount","rpid","setVideoInfo","getCacheVideoInfoMap","relatedVideo","setRelatedVideo","getCacheRelatedVideoMap","descOpen","setDescOpen","getCacheDescOpenMap","resetStateWhenToOtherVideo","related","owner","pubdate","desc","reid","toptype","tname","rv","renderResultFuncs","media_bangumi","bili_user","upic","fans","media_ft","renderOrder","dangerouslySetInnerHTML","__html","author","SearchResultPane","isActive","tabData","isRender","setIsRender","searchResult","setSearchResult","activeOrder","setActiveOrder","fetching","setFeting","locationSearch","search","useMemo","split","pageinfo","getSearchResult","sr","result_type","getVideoData","td","tabDatas","SearchResult","active","setActive","numText","total","suggestTag","component","locData","setLocData","getCacheLocDataMap","rankingData","setRankingData","getCacheRankingDataMap","Api","rankingIndex","imgItem","rkData","Channel","Video","hotWord","setHotWord","historyChange","setHistoryChange","searchValue","setSearchValue","suggestData","setSuggestData","showSuggestArea","setShowSuggestArea","showSearchResult","setShowSearchResult","updateKeyword","setUpdateKeyword","setSearchValueAndShowSuggestArea","value","showSuggest","decodeURI","time","getSearchHistory","setSearchHistory","searchHistory","onKeywordClick","enterPageWithNewKeyword","replace","tag","then","placeholder","onChange","onKeyDown","keyCode","goBack","hotWordItem","sd","NestRoutes","routes","route","exact","undefined","from","SET_CHANNEL_BAR","FETCH_CHANNEL_BAR","setChannelBar","actionTypes","dispatch","useDispatch","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","initState","combineReducers","mySaga","put","takeLatest","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","run","ReactDOM","render","Provider","store","getElementById","URL","process","origin","response","contentType","headers","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.66e4ab2e.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M1775.84 322.588c6.017 1.003 53.146-9.526 55.151-6.016 3.008 4.512 24.066 155.925 18.55 156.927s-44.62 10.028-44.62 10.028c-3.01-20.556-28.579-147.903-29.08-160.939m75.205-14.54l20.556 162.945c10.529-.502 53.145-3.51 57.156-4.011-6.017-61.668-16.545-158.934-16.545-158.934-20.055-4.01-41.113-4.01-61.167 0m-40.61 226.117s92.752-23.564 126.344-12.033c17.046 61.668 48.13 407.611 51.139 421.65-21.057 2.506-90.246 8.523-95.761 10.027-4.512-26.071-81.723-403.1-81.723-419.644m343.436-207.566c5.515 1.504 54.65-5.014 55.15-1.504 1.003 12.033 6.017 157.429.502 157.93s-44.622 4.011-44.622 4.011c-1.002-20.054-12.032-146.9-11.03-160.437m75.707-4.011l4.01 160.939c10.53 0 52.644 2.507 57.156 2.005-1.002-61.668 0-158.933 0-158.933-20.054-3.51-40.61-5.014-61.166-4.011M2164.9 538.677s94.759-12.534 126.846 2.507c7.02 72.197 6.017 408.614 7.02 422.652-21.56 0-90.247 1.003-95.762 2.005-1.003-26.07-39.608-410.619-38.104-427.164m-220.1-413.627c54.65 278.76 96.263 755.058 97.767 785.641 0 0 43.117 1.003 91.75 4.011-28.578-300.319-63.674-780.127-63.172-795.669-12.033-13.537-126.345 6.017-126.345 6.017m-120.328 659.297c-10.528-78.213-290.29-166.955-447.72-138.377 0 0-19.553-172.47-27.074-339.426-6.518-143.39-1.003-282.77.501-305.833-10.528-7.52-123.837 46.627-185.004 69.188 0 0 73.2 309.845 126.345 952.597 0 0 84.73 9.025 230.127-19.052s317.365-115.816 302.825-219.097M1482.541 925.23l-24.567-176.983c6.017-3.008 156.928 53.145 172.972 63.173-2.507 11.03-148.405 113.81-148.405 113.81M610.665 322.588c6.016 1.003 53.144-9.526 55.15-6.016 3.008 4.512 24.066 155.925 18.55 156.927s-44.621 10.028-44.621 10.028c-3.008-20.556-28.578-147.903-29.08-160.939m75.206-14.54l20.556 162.945c10.528-.502 53.145-3.51 57.155-4.011-6.517-61.668-16.545-158.934-16.545-158.934-20.054-4.01-41.112-4.01-61.166 0m-40.611 226.117s92.753-23.564 126.344-12.033c17.047 61.668 48.132 407.611 51.14 421.65-21.058 2.506-90.246 8.523-95.761 10.027-4.513-26.071-81.723-403.1-81.723-419.644m343.436-207.566c5.515 1.504 54.65-5.014 55.15-1.504 1.003 12.033 6.017 157.429.502 157.93s-44.622 4.011-44.622 4.011c-1.003-20.054-11.531-146.9-11.03-160.437m75.706-4.011l4.011 160.939c10.53 0 52.644 2.507 57.156 2.005-1.003-61.668 0-158.933 0-158.933-20.054-3.51-40.61-4.512-61.167-4.011m-64.676 216.089s94.758-12.534 126.846 2.507c7.02 72.197 6.016 408.614 7.02 422.652-21.56 0-90.247 1.003-95.762 2.005-.501-26.07-39.608-410.619-38.104-427.164m-220.1-413.627c54.65 278.76 96.263 755.058 97.767 785.641 0 0 43.117 1.003 91.75 4.011-28.578-300.319-63.674-780.127-63.172-796.17-12.033-13.036-126.345 6.518-126.345 6.518M659.297 784.347c-10.529-78.213-290.291-166.955-447.72-138.377 0 0-19.554-172.47-27.074-339.426-6.518-143.39-1.003-282.77.501-305.833C174.476-6.31 61.167 47.338 0 69.899c0 0 73.2 309.845 126.344 952.597 0 0 84.731 9.025 230.128-19.052s317.365-115.816 302.825-219.097M317.365 925.23l-24.567-176.983c6.017-3.008 156.928 53.145 172.972 63.173-2.507 11.03-148.405 113.81-148.405 113.81\",\n  fill: \"#de698c\"\n});\n\nvar SvgBilibiliLogo = function SvgBilibiliLogo(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"BILIBILI_LOGO_svg__icon\",\n    viewBox: \"0 0 2299 1024\",\n    width: 449.023,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgBilibiliLogo;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M886.4 841.6l-192-192C739.2 595.2 768 524.8 768 448c0-176-144-320-320-320S128 272 128 448s144 320 320 320c76.8 0 147.2-25.6 201.6-73.6l192 192c6.4 6.4 16 9.6 22.4 9.6s16-3.2 22.4-9.6c12.8-12.8 12.8-32 0-44.8zM448 704c-140.8 0-256-115.2-256-256s115.2-256 256-256 256 115.2 256 256-115.2 256-256 256z\",\n  fill: \"#aaa\"\n});\n\nvar SvgSearch = function SvgSearch(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"search_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgSearch;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#e7e7e7\",\n  d: \"M0 0h80v80H0z\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M45.78 57.73h2.29a73.4 73.4 0 014.23 9.5 57.14 57.14 0 012.62 10.5 50.58 50.58 0 01-29.86 0 57.14 57.14 0 012.62-10.5 73.4 73.4 0 014.23-9.5h2.29l2.67 7.21 2.41-7.21h1.42l2.41 7.21zM31.72 18.51l4.87 4.87a1.8 1.8 0 010 2.55 1.8 1.8 0 01-2.55 0l-4.87-4.87a1.8 1.8 0 010-2.55 1.8 1.8 0 012.55 0zm16.85 0a1.8 1.8 0 012.55 0 1.8 1.8 0 010 2.55l-4.87 4.87a1.8 1.8 0 01-2.55 0 1.8 1.8 0 010-2.55z\",\n  fill: \"#ccc\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  \"data-name\": \"Combined-Shape\",\n  d: \"M24.2 24.22h31.6a7.2 7.2 0 017.2 7.2v20.12a7.2 7.2 0 01-7.2 7.2H24.2a7.2 7.2 0 01-7.2-7.2V31.42a7.2 7.2 0 017.2-7.2zm1 4a4.24 4.24 0 00-4.2 4.29v17.94a4.24 4.24 0 004.21 4.27h29.5A4.24 4.24 0 0059 50.45V32.51a4.24 4.24 0 00-4.21-4.27z\",\n  fill: \"#ccc\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  \"data-name\": \"Combined-Shape\",\n  d: \"M25.88 29.84h28.24a3.22 3.22 0 013.22 3.21v16.86a3.22 3.22 0 01-3.22 3.21H25.88a3.22 3.22 0 01-3.22-3.21V33.05a3.22 3.22 0 013.22-3.21zm0 .8a2.42 2.42 0 00-2.42 2.41v16.86a2.42 2.42 0 002.42 2.41h28.24a2.42 2.42 0 002.42-2.41V33.05a2.42 2.42 0 00-2.42-2.41z\",\n  fill: \"#ccc\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  \"data-name\": \"Combined-Shape\",\n  d: \"M26.73 40.1l7-3.1a1.81 1.81 0 111.48 3.3l-7 3.1a1.81 1.81 0 11-1.48-3.3zm26.54 0a1.81 1.81 0 11-1.48 3.3l-7-3.1a1.81 1.81 0 111.48-3.3zm-15.69 7.8c-1 0-1.9-.7-2.7-2a.8.8 0 01.26-1.11.81.81 0 011.11.26c.54.86 1 1.23 1.33 1.23s.79-.37 1.33-1.23a.81.81 0 011.37 0c.54.86 1 1.23 1.33 1.23s.79-.37 1.33-1.23a.81.81 0 011.11-.26.8.8 0 01.26 1.11c-.8 1.28-1.69 2-2.7 2a2.71 2.71 0 01-2-1.06 2.71 2.71 0 01-2.03 1.06z\",\n  fill: \"#ccc\"\n});\n\nvar SvgBilibiliTv = function SvgBilibiliTv(props) {\n  return React.createElement(\"svg\", _extends({\n    \"data-name\": \"\\\\\\\\\\\\\\\\u56FE\\\\\\\\\\\\\\\\u5C42 1\",\n    viewBox: \"0 0 80 80\"\n  }, props), _ref, _ref2, _ref3, _ref4, _ref5);\n};\n\nexport default SvgBilibiliTv;","export async function post(url, data = {}) {\r\n  let result = await fetch(url, {\r\n    method: 'post',\r\n    body: JSON.stringify(data),\r\n    headers: {\r\n      'Content-Type': 'application/json: charset=utf-8'\r\n    }\r\n  });\r\n  let jsonData = {success: false, message: '', errorCode: 0};\r\n  try {\r\n    jsonData = await result.json()\r\n  } catch (e) {\r\n    jsonData.message = e;\r\n    jsonData.errorCode = result.status\r\n  }\r\n  return jsonData\r\n}\r\n\r\nexport async function get(url, data = {}) {\r\n  let params = ''\r\n  Object.keys(data).forEach(key => {\r\n    params = params + '&' + key + '=' + data[key]\r\n  })\r\n  if (params) url = url + '?' + params;\r\n  let result = await fetch(url);\r\n  let jsonData = {success: false, message: '', errorCode: 0};\r\n  try {\r\n    jsonData = await result.json();\r\n  } catch (e) {\r\n    jsonData.message = e;\r\n    jsonData.errorCode = result.status\r\n  }\r\n  return jsonData\r\n}\r\n","let URL_PREFIX = '/api';\r\n\r\nexport const CHANNEL_URL = URL_PREFIX + '/partitions';\r\n\r\n//轮播图\r\nexport const LOC_URL = URL_PREFIX + '/loc';\r\nexport const INDEX_RANKING_URL = URL_PREFIX + '/ranking';\r\nexport const RANKING_REGION_URL = URL_PREFIX + '/ranking/region';\r\nexport const ARCHIVE_RANK_URL = URL_PREFIX + '/archive_rank/getarchiverankbypartion';\r\nexport const VIDEO_URL = URL_PREFIX + '/video';\r\nexport const VIDEO_MP4_URL = URL_PREFIX + '/mp4';\r\nexport const VIDEO_RELATED_URL = URL_PREFIX + '/archive/related';\r\nexport const COMMENT_URL = URL_PREFIX + '/reply';\r\nexport const SEARCH_DEFAULT = URL_PREFIX + '/search/default'\r\nexport const HOT_WORD = URL_PREFIX + '/hotword'\r\nexport const SUGGEST_URL = URL_PREFIX + '/suggest'\r\nexport const ALL_SEARCH = URL_PREFIX + '/search/all';\r\nexport const TYPE_SEARCH = URL_PREFIX + '/search/type';\r\n\r\nexport const PIC_URL = URL_PREFIX + '/image';\r\n","import {get} from \"./fetch\";\r\nimport {LOC_URL, INDEX_RANKING_URL, RANKING_REGION_URL, ARCHIVE_RANK_URL} from \"./url\";\r\n\r\nexport function fetchLoc() {\r\n  return get(LOC_URL)\r\n}\r\n\r\nexport function fetchIndexRanking() {\r\n  return get(INDEX_RANKING_URL)\r\n}\r\n\r\nexport function fetchRankingRegion({ rid, day=7 }) {\r\n  let url = `${RANKING_REGION_URL}?rid=${rid}&day=${day}`;\r\n  return get(url)\r\n}\r\n\r\nexport function fetchArchiveRank({ rid, page }) {\r\n  let url =`${ARCHIVE_RANK_URL}?tid=${rid}&pn=${page}`;\r\n  return get(url)\r\n}\r\n","import { fetchChannelBar } from \"./channel_bar\";\r\nimport {fetchIndexRanking, fetchLoc} from \"./ranking\";\r\nimport {fetchVideoInfo, fetchRelated, fetchCommentData} from \"./video\";\r\nimport {getSearchDefault, getHotWord, getSuggest, getAllSearchResult, getTypeSearchResult} from \"./search\";\r\n\r\nexport default {\r\n  fetchChannelBar,\r\n  fetchLoc,\r\n  fetchIndexRanking,\r\n  fetchVideoInfo,\r\n  fetchRelated,\r\n  fetchCommentData,\r\n  getSearchDefault,\r\n  getHotWord,\r\n  getSuggest,\r\n  getAllSearchResult,\r\n  getTypeSearchResult,\r\n}\r\n","import { get } from './fetch'\r\nimport { CHANNEL_URL } from \"./url\";\r\n\r\nexport function fetchChannelBar() {\r\n  return get(CHANNEL_URL)\r\n}\r\n","import {VIDEO_RELATED_URL, VIDEO_URL, COMMENT_URL} from \"./url\";\r\nimport {get} from \"./fetch\";\r\n\r\nexport function fetchVideoInfo({ aid }) {\r\n  let url = `${VIDEO_URL}?aid=${aid}`;\r\n  return get(url)\r\n}\r\n\r\nexport function fetchRelated({ aid }) {\r\n  let url = `${VIDEO_RELATED_URL}?aid=${aid}`;\r\n  return get(url)\r\n}\r\n\r\nexport function fetchCommentData({ aid, pn }) {\r\n  let url = `${COMMENT_URL}?aid=${aid}&pn=${pn}`\r\n  return get(url)\r\n}\r\n","import {SEARCH_DEFAULT, HOT_WORD, SUGGEST_URL, ALL_SEARCH, TYPE_SEARCH} from \"./url\";\r\nimport {get} from \"./fetch\";\r\n\r\nexport function getSearchDefault() {\r\n  return get(SEARCH_DEFAULT)\r\n}\r\n\r\nexport function getHotWord() {\r\n  return get(HOT_WORD)\r\n}\r\n\r\nexport function getSuggest(keyword) {\r\n  return get(SUGGEST_URL + '?keyword=' + keyword)\r\n}\r\n\r\nexport function getAllSearchResult({page=1, pageSize=20, order='totalrank', searchType='all', keyword}) {\r\n return get(ALL_SEARCH + `?keyword=${keyword}&page=${page}&pagesize=${pageSize}&search_type=${searchType}&order=${order}`)\r\n}\r\n\r\nexport function getTypeSearchResult({page=1, pageSize=20, order='totalrank', searchType='all', keyword}) {\r\n  return get(TYPE_SEARCH + `?keyword=${keyword}&page=${page}&pagesize=${pageSize}&search_type=${searchType}&order=${order}`)\r\n}\r\n","import {PIC_URL} from \"../api/url\";\r\n\r\nexport function createChannelBar(data) {\r\n  let partitionList = data.partitionList;\r\n  // 树结构的导航栏\r\n  let indexPartition = {tid: 0, typename: '首页', children: [], isParent: true}\r\n  let channelBarList = [indexPartition];\r\n  // 包含所有导航栏的对象，key为导航的tid\r\n  let channelBarMap = {0: indexPartition};\r\n  Object.keys(partitionList).sort((a, b) => parseInt(a) - parseInt(b)).forEach(key => {\r\n    let isParent = false\r\n    if (parseInt(key) === 0) {\r\n      isParent = true\r\n    }\r\n    partitionList[key].forEach(partition => {\r\n      channelBarMap[partition.tid] = partition;\r\n      partition.isParent = isParent;\r\n      if (parseInt(key) === 0) {\r\n        partition.children = (partitionList[partition.tid] || []).map(childPartition => {\r\n          childPartition.parentId = partition.tid;\r\n          return childPartition\r\n        });\r\n        partition.children.unshift({\r\n          tid: partition.tid,\r\n          typename: '推荐',\r\n          isParent: false,\r\n          parentId: partition.tid\r\n        });\r\n        partition.childrenIds = partitionList[partition.tid].map(child => child.tid)\r\n        channelBarList.push(partition)\r\n      }\r\n    })\r\n  })\r\n  return {\r\n    channelBarList,\r\n    channelBarMap\r\n  }\r\n}\r\n\r\nexport function isEmpty(obj) {\r\n  let empty = false\r\n  if (!obj || (Array.isArray(obj) && obj.length === 0) || (typeof obj === 'object' && Object.keys(obj).length) === 0) {\r\n    empty = true\r\n  }\r\n  return empty\r\n}\r\n\r\nexport function getPicSuffix(){\r\n  const terminal = {\r\n    isIOS: /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent),\r\n    isAndroid: /(Android)/i.test(navigator.userAgent)\r\n  }\r\n  let suffix = \".webp\";\r\n  if (terminal.isIOS ===  true) {\r\n    suffix = \".jpg\";\r\n  } else if (terminal.isAndroid === true) {\r\n    suffix = \".webp\";\r\n  } else {\r\n    suffix = \".jpg\";\r\n  }\r\n  return suffix;\r\n}\r\n\r\nexport function getPicUrl(url, format) {\r\n  let suffix = getPicSuffix();\r\n  // picURL + \"?pic=\" + url + \"@480w_300h.webp\"\r\n  if (!url.startsWith('http')){\r\n    url = 'https:' + url\r\n  }\r\n  return `${PIC_URL}?pic=${url}${format + suffix}`;\r\n}\r\n\r\nexport function numberToW(num, suffix='万') {\r\n  if (num < 10000) return num;\r\n  return `${(num / 10000).toFixed(1)}${suffix}`\r\n}\r\n\r\nexport const getPubdate = (timestamp) => {\r\n  const publicDate = new Date(timestamp * 1000); // unix时间转换成本地时间戳\r\n  let publicDateStr = \"\";\r\n  const date = new Date();\r\n  if (publicDate.getFullYear() === date.getFullYear()) {\r\n    if (publicDate.getMonth() === date.getMonth()) {\r\n      const diffDate = date.getDate() - publicDate.getDate();\r\n      switch (diffDate) {\r\n        case 0:\r\n          if (date.getHours() - publicDate.getHours() === 0) {\r\n            publicDateStr = date.getMinutes() - publicDate.getMinutes() + \"分钟前\";\r\n          } else {\r\n            publicDateStr = date.getHours() - publicDate.getHours() + \"小时前\";\r\n          }\r\n          break;\r\n        default:\r\n          publicDateStr = publicDate.getMonth() + 1 + \"-\" + publicDate.getDate();\r\n      }\r\n    } else {\r\n      publicDateStr = publicDate.getMonth() + 1 + \"-\" + publicDate.getDate();\r\n    }\r\n  } else {\r\n    publicDateStr = publicDate.getFullYear() + \"-\" +\r\n      (publicDate.getMonth() + 1) + \"-\" +\r\n      publicDate.getDate();\r\n  }\r\n  return publicDateStr;\r\n};\r\n\r\nexport let ifFetch = (fetcher, history, pageKey) => {\r\n  if (history.action === 'PUSH' || !sessionStorage.getItem(pageKey)) {\r\n    fetcher()\r\n  }\r\n}\r\n\r\nexport let setCacheData = (pageKey, funcList) => {\r\n  let cacheMap = funcList.reduce((accumulate, func) => ({...accumulate,  ...func() }), {});\r\n  sessionStorage.setItem(pageKey, JSON.stringify(cacheMap))\r\n};\r\n\r\nexport let clearPageCache = (pageKey) => () => {\r\n  sessionStorage.removeItem(pageKey)\r\n};\r\n\r\nexport class EventBus{\r\n  eventMap = {};\r\n\r\n  getEventList = (name) => {\r\n    return this.eventMap[name] || []\r\n  }\r\n\r\n  setEventList = (name, eventList) => {\r\n    this.eventMap[name] = eventList\r\n  }\r\n\r\n  on = (name, func) => {\r\n    let eventList = this.getEventList(name);\r\n    eventList.push(func);\r\n    this.setEventList(name, eventList);\r\n  };\r\n\r\n  emit = (name, ...params) => {\r\n    let eventList = this.getEventList(name);\r\n    eventList.forEach(func => func(params))\r\n  };\r\n\r\n  remove = (name, func) => {\r\n    let eventList = this.getEventList(name);\r\n    eventList = eventList.filter(fun => fun !== func);\r\n    this.setEventList(name, eventList)\r\n  }\r\n}\r\n\r\nexport function debounce(func, time) {\r\n  let timeout = null;\r\n  return function (...params) {\r\n    clearTimeout(timeout);\r\n    setTimeout(() => {\r\n      func(...params)\r\n    }, time)\r\n  }\r\n}\r\n\r\nexport let globalEventBus = new EventBus();\r\n","export let CACHE_PAGE = 'cachePage';\r\nexport let SEARCH_HISTORY = 'searchHistory'\r\nexport let NO_HEADER_PAGE = ['/search']\r\nexport let SEARCH_REFERER = 'searchReferer';\r\n","import React, {useEffect, useState} from 'react'\r\nimport BiliLogo from '../public/img/BILIBILI_LOGO.svg'\r\nimport SearchIcon from '../public/img/search.svg'\r\nimport BiliTvIcon from '../public/img/bilibili-tv.svg'\r\nimport './style/header.scss'\r\nimport api from '../api/index'\r\nimport {globalEventBus} from \"../util/tools\";\r\nimport {CACHE_PAGE, SEARCH_REFERER} from \"../util/constants\";\r\nimport {Link, withRouter} from \"react-router-dom\";\r\n\r\nconst Header = function (props) {\r\n  let [defaultSearch, setDefaultSearch] = useState({});\r\n  let pathname = props.location.pathname\r\n\r\n  useEffect(() => {\r\n    (async ()=> {\r\n      let defaultSearch = await api.getSearchDefault();\r\n      console.log(defaultSearch, 'defaultSearch');\r\n      setDefaultSearch(defaultSearch.data)\r\n    })()\r\n  }, [pathname]);\r\n\r\n  let enterSearch = () => {\r\n    globalEventBus.emit(CACHE_PAGE);\r\n    localStorage.setItem(SEARCH_REFERER, props.history.length);\r\n    props.history.push('/search')\r\n  };\r\n\r\n  return (\r\n    <div className={'app-header'}>\r\n      <a href={'/index'} className={'app-header-logo'}>\r\n        <BiliLogo style={{ width: '100%', height: '100%'}}/>\r\n      </a>\r\n      <div className={'app-header-search'} onClick={enterSearch}>\r\n        <SearchIcon className={'header-search-icon'}/>\r\n        <span className={'header-search-text'}>{defaultSearch.show_name || ''}</span>\r\n      </div>\r\n      <div className={'bili-tv-icon'}>\r\n        <BiliTvIcon style={{ borderRadius: '50%' }}/>\r\n      </div>\r\n      <div className={'app-header-download-button'}>\r\n        下载App\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(Header)\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M472.064 751.552L72.832 352.32c-22.08-22.08-22.08-57.792 0-79.872 22.016-22.016 57.792-22.08 79.872 0L512 631.744l359.296-359.296c22.016-22.016 57.792-22.08 79.872 0s22.016 57.792 0 79.872L551.936 751.552c-22.08 22.016-57.792 22.016-79.872 0z\",\n  fill: \"#aaa\"\n});\n\nvar SvgArrowdown = function SvgArrowdown(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"arrow_down_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgArrowdown;","import React, {useCallback, useEffect, useState} from 'react';\r\nimport {useMappedState} from \"redux-react-hook\";\r\nimport {Link, withRouter} from 'react-router-dom'\r\nimport pathToRegexp from 'path-to-regexp';\r\nimport './style/channel_bar.scss'\r\nimport {isEmpty} from \"../util/tools\";\r\nimport ArrowDownIcon from '../public/img/arrow down.svg'\r\nimport {Helmet} from \"react-helmet\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nlet channelPathRe = pathToRegexp('/channel/:rid')\r\n\r\nconst ChannelBar = function (props) {\r\n  let {channelBarList = [], channelBarMap = {}} = useMappedState(useCallback(state => state.channelBar, []));\r\n  let [channelModalVisible, setChannelModalVisible] = useState(false);\r\n\r\n  let match = channelPathRe.exec(props.location.pathname);\r\n  let currentRid = 0;\r\n  if (match) {\r\n    currentRid = parseInt(match[1])\r\n  }\r\n  useEffect(() => {\r\n    let tabDom = document.querySelector('#rid' + currentRid);\r\n    if (tabDom) {\r\n      tabDom.scrollIntoView(true)\r\n    }\r\n  }, [currentRid, channelBarMap])\r\n\r\n  let currentChannel = channelBarMap[currentRid] || {};\r\n  // 如果当前所选频道是二级频道，就从一级频道中取出二级频道渲染\r\n  let childChannel = currentChannel.children || [];\r\n  if (!currentChannel.isParent) {\r\n    let parentChannel = channelBarMap[currentChannel.parentId] || {};\r\n    childChannel = parentChannel.children || []\r\n  }\r\n  let isSelected = (rid, channelBar) => {\r\n    return rid === currentRid || (channelBar.childrenIds || []).includes(currentRid)\r\n  };\r\n\r\n  let onModalLinkClick = (rid) => {\r\n    setChannelModalVisible(false);\r\n    props.history.push(rid === 0 ? 'index' : `/channel/${rid}`)\r\n    props.cacheData();\r\n  };\r\n\r\n  let onLinkClick = (path) => {\r\n    props.history.push(path);\r\n    props.cacheData();\r\n  }\r\n\r\n  return (\r\n    <div className={'channel-bar-container'}>\r\n      {\r\n        currentChannel.typename !== '首页' &&\r\n          <Helmet>\r\n            <title>{currentChannel.typename}</title>\r\n          </Helmet>\r\n      }\r\n      <Helmet>\r\n\r\n      </Helmet>\r\n      {/*一级频道*/}\r\n      <div className={'first-class-channel-container'}>\r\n        <div className={'tab-bar-container'}>\r\n          <div className={'tab-bar-scroll-container'}>\r\n            {\r\n              channelBarList.map(channelBar => {\r\n                let rid = channelBar.tid;\r\n                return (\r\n                  <a onClick={() => onLinkClick(rid === 0 ? '/index' : `/channel/${rid}`)} key={rid} className={`first-class-tab-item`} id={`rid${rid}`}>\r\n                    <p className={isSelected(rid, channelBar) ? 'selected-tab' : ''}>{channelBar.typename}</p>\r\n                  </a>\r\n                )\r\n              })\r\n            }\r\n          </div>\r\n        </div>\r\n        <div className={'arrow-container'} onClick={() => setChannelModalVisible(true)}>\r\n          <ArrowDownIcon/>\r\n        </div>\r\n      </div>\r\n      {/*二级频道*/}\r\n      {\r\n        !isEmpty(childChannel) &&\r\n        <div className={'second-class-channel-container'}>\r\n          <div className={'tab-bar-container'}>\r\n            <div className={'tab-bar-scroll-container'}>\r\n              {\r\n                childChannel.map(childChannel => {\r\n                  let rid = childChannel.tid;\r\n                  return (\r\n                    <a onClick={() => onLinkClick(`/channel/${rid}`)} key={rid} className={'tab-item'}>\r\n                      <p className={isSelected(rid, childChannel) ? `selected-tab` : ''}>{childChannel.typename}</p>\r\n                    </a>\r\n                  )\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      }\r\n      {/*点击下拉按钮时的模态框*/}\r\n      <div className={`fixed-first-class-container ${channelModalVisible ? 'open' : ''}`}>\r\n        <div>\r\n          {\r\n            channelBarList.map(channelBar => {\r\n              let rid = channelBar.tid;\r\n              return (\r\n                <a onClick={() => onModalLinkClick(rid)} key={rid}\r\n                   className={`tab-item ${channelBar.typename.length > 2 ? 'three-word' : ''}`}>\r\n                  <p className={isSelected(rid, channelBar) ? 'selected-tab' : ''}>{channelBar.typename}</p>\r\n                </a>\r\n              )\r\n            })\r\n          }\r\n        </div>\r\n        <div className={'arrow-container'} onClick={() => setChannelModalVisible(false)}>\r\n          <ArrowDownIcon className={'normal-arrow-size arrow-up'}/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nChannelBar.defaultProps = {\r\n  cacheData() {},\r\n}\r\n\r\nChannelBar.propTypes = {\r\n  cacheData: PropTypes.func\r\n}\r\n\r\nexport default withRouter(ChannelBar)\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M810.667 810.667H213.333V213.333h597.334m0-85.333H213.333A85.333 85.333 0 00128 213.333v597.334A85.333 85.333 0 00213.333 896h597.334A85.333 85.333 0 00896 810.667V213.333A85.333 85.333 0 00810.667 128m-384 213.333v341.334L640 512 426.667 341.333z\",\n  fill: \"#fff\"\n});\n\nvar SvgPlayBoxOutline = function SvgPlayBoxOutline(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"play-box-outline_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgPlayBoxOutline;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M800 128H224c-89.6 0-160 70.4-160 160v448c0 89.6 70.4 160 160 160h576c89.6 0 160-70.4 160-160V288c0-89.6-70.4-160-160-160zm96 608c0 54.4-41.6 96-96 96H224c-54.4 0-96-41.6-96-96V288c0-54.4 41.6-96 96-96h576c54.4 0 96 41.6 96 96v448z\",\n  fill: \"#fff\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M240 384h64v64h-64zm128 0h384v64H368zm64 192h352v64H432zm-128 0h64v64h-64z\",\n  fill: \"#fff\"\n});\n\nvar SvgDanmushu = function SvgDanmushu(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"danmushu_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2, _ref3);\n};\n\nexport default SvgDanmushu;","import React, {Fragment, useEffect, useRef} from \"react\";\r\nimport {getPicUrl} from \"../util/tools\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nlet defaultProps = {\r\n  style: {},\r\n  src: ''\r\n};\r\n\r\nlet propTypes = {\r\n  style: PropTypes.object,\r\n  src: PropTypes.string\r\n}\r\n\r\nfunction LazyLoadImg(props) {\r\n  let { style, src, className } = props;\r\n  let imgRef = useRef();\r\n  let hasLoadedRef = useRef(false);\r\n  let timeoutRef = useRef();\r\n\r\n  useEffect(() => {\r\n    loadImg();\r\n    window.addEventListener('scroll', loadImg);\r\n    return () => {\r\n      return window.removeEventListener('scroll', loadImg)\r\n    }\r\n  }, [src]);\r\n\r\n  let loadImg = () => {\r\n    if (hasLoadedRef.current) return;\r\n    clearTimeout(timeoutRef.current);\r\n    timeoutRef.current = setTimeout(() => {\r\n      if (isInViewArea()) {\r\n        imgRef.current.src = src;\r\n        hasLoadedRef.current = true\r\n      }\r\n    }, 300)\r\n  };\r\n\r\n  let isInViewArea = () => {\r\n    let imgDom = imgRef.current;\r\n    if (!imgDom) return\r\n    let { top } = imgDom.getBoundingClientRect();\r\n    let viewHeight = window.innerHeight;\r\n    return top <= viewHeight\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <img  style={ { width: '100%', height: '100%', ...style }} alt={''} ref={imgRef} src={''} className={className}/>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nLazyLoadImg.defaultProps = defaultProps;\r\nLazyLoadImg.propTypes = propTypes;\r\n\r\nexport default LazyLoadImg\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ccc\"\n}, React.createElement(\"path\", {\n  d: \"M2510 4605c-14-7-37-36-50-64-16-31-32-50-42-51-36 0-241-48-248-58-3-4-20-15-39-26-56-31-139-124-174-195l-32-66-3-694c-2-471 1-712 8-747 19-93 108-209 209-273 87-56 139-65 429-71l263-5-116-116c-96-97-115-122-115-147 0-45 30-90 68-103 70-23 87-12 283 186l183 185h340l186-184c119-119 195-187 213-192 70-17 137 35 137 107 0 28-16 48-117 150l-116 118 259 3c213 3 270 7 319 21 142 43 277 173 311 302 21 76 20 1412 0 1480-16 51-69 137-107 172-50 47-85 73-104 79-10 4-25 12-32 20-7 7-39 17-71 23-31 6-76 15-100 21-23 5-53 10-67 10s-25 5-25 11c0 27-36 83-64 100-23 14-50 19-103 19-67 0-75-2-108-31-19-17-35-40-35-50s-4-19-10-19c-5 0-10-7-10-15 0-13-65-15-527-15h-528l-19 46c-26 64-62 84-151 84-40-1-81-7-95-15zm1758-449c15-8 38-27 52-43l25-28V2775l-22-25c-13-13-23-27-23-31s-21-19-46-33l-47-26h-923c-535 0-924 4-924 9s-11 11-23 15c-35 8-76 53-86 95-6 22-7 275-3 667l7 630 29 35c15 19 40 39 55 46 20 9 254 12 964 13 787 0 942-2 965-14z\"\n}), React.createElement(\"path\", {\n  d: \"M3083 3903c-13-2-23-8-23-13 0-4-11-11-24-14s-45-29-70-57c-39-44-46-57-46-93 0-51 13-66 59-66 31 0 42 7 79 50 36 42 49 50 77 50 18 0 41-3 50-6 15-6 95-120 95-136 0-4 9-8 19-8 12 0 29 17 46 48 45 78 73 102 118 102 38 0 62-17 115-84 7-9 27-16 47-16 45 0 70 35 61 83-7 38-80 121-117 132-13 4-27 12-30 17s-29 11-58 15c-45 5-61 2-112-22-32-16-59-33-59-38 0-6-8-3-17 5-50 44-137 65-210 51zM2435 3358c-3-18-10-55-16-83-6-27-12-68-13-90l-1-40 115-21c63-11 122-23 130-27 8-3 65-13 125-22 61-9 119-20 130-25s36-11 56-15c44-7 43-7 69 138l16 99-23 9c-14 5-35 9-47 9s-26 3-30 8c-4 4-65 17-134 29-70 12-172 31-227 42-139 28-143 28-150-11zM4000 3369c-52-11-147-28-210-39s-124-24-135-29-37-12-59-15c-21-3-41-8-44-10-3-3 3-59 14-123l19-118 40 2c22 2 49 7 60 12 11 6 70 17 130 26 61 9 119 20 130 24 11 5 67 17 125 26 106 16 140 32 124 57-5 7-16 56-24 108-15 95-15 95-45 97-16 1-73-7-125-18z\"\n}));\n\nvar SvgTv = function SvgTv(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 660,\n    height: 660,\n    viewBox: \"0 0 6600 6600\"\n  }, props), _ref);\n};\n\nexport default SvgTv;","import React, {Fragment, useMemo} from \"react\";\r\nimport './style/video_card.scss';\r\nimport {getPicUrl, numberToW} from \"../util/tools\";\r\nimport PropTypes from \"prop-types\";\r\nimport PlayIcon from '../public/img/play-box-outline.svg';\r\nimport DanMuShu from '../public/img/danmushu.svg';\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport LazyLoadImg from \"./LazyLoadImg\";\r\nimport TVIcon from '../public/img/tv.svg';\r\n\r\nlet defaultProps = {\r\n  data: [],\r\n  style: {},\r\n  isRelated: false,\r\n  cacheData() {\r\n  },\r\n};\r\n\r\nlet propTypes = {\r\n  data: PropTypes.object,\r\n  style: PropTypes.object,\r\n  isRelated: PropTypes.bool,\r\n  cacheData: PropTypes.func,\r\n};\r\n\r\nlet VideoCard = function (props) {\r\n  let {style, isRelated, data} = props;\r\n\r\n  if (data.pic.indexOf(\"@320w_200h\") === -1) {\r\n    data.pic = getPicUrl(data.pic, \"@320w_200h\");\r\n  }\r\n\r\n  let playNum = isRelated ? data.stat.view : data.play;\r\n  let videoView = isRelated ? data.stat.danmaku : data.video_review;\r\n\r\n  let onLinkClick = (path) => {\r\n    props.history.push(path);\r\n    props.cacheData();\r\n  };\r\n\r\n  return (\r\n    <div className={'video-card-container'} style={{...style}}>\r\n      <a onClick={() => onLinkClick(`/video/${data.aid}`)} className={'link-to-video'}>\r\n        <div className={'img-container'}>\r\n          <LazyLoadImg src={data.pic} className={'img'}/>\r\n          <TVIcon className={'no-img-icon'}/>\r\n          {\r\n            (!!playNum || !!videoView)\r\n              ?\r\n              <div className={'play-view-container'}>\r\n                {\r\n                  !!playNum &&\r\n                  <div>\r\n                    <PlayIcon className={'icon'}/>\r\n                    <span className={'text'}>{numberToW(playNum)}</span>\r\n                  </div>\r\n                }\r\n                {\r\n                  !!videoView &&\r\n                  <div>\r\n                    <DanMuShu className={'icon'}/>\r\n                    <span className={'text'}>{numberToW(videoView)}</span>\r\n                  </div>\r\n                }\r\n              </div>\r\n              : null\r\n          }\r\n        </div>\r\n        <div className={'title-container'}>{data.title}</div>\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nVideoCard.propTypes = propTypes;\r\nVideoCard.defaultProps = defaultProps;\r\n\r\nexport default withRouter(VideoCard);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", null));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M723.1 483.4c-1.3-1.3-2.6-2.4-4-3.4L355.9 116c-14.6-14.6-38.4-14.6-53 0-14.6 14.6-14.6 38.5 0 53.1l340.4 341.2L302.9 851c-14.6 14.6-14.6 38.4 0 53 14.6 14.6 38.4 14.6 53 0l362.9-363.3c1.5-1.1 2.9-2.3 4.3-3.7 7.4-7.4 11-17.1 10.9-26.8.1-9.7-3.6-19.4-10.9-26.8z\",\n  fill: \"#aaa\"\n});\n\nvar SvgRight = function SvgRight(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"right_svg__icon\",\n    viewBox: \"0 0 1024 1024\",\n    width: 200,\n    height: 200\n  }, props), _ref, _ref2);\n};\n\nexport default SvgRight;","// 除了主页外的其他channel使用这个组件，根据不同的type生成不同的视频区\r\n// 比如推荐区，MAD·AMV区\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport './style/channel_video_area.scss'\r\nimport VideoCard from \"./VideoCard\";\r\nimport {isEmpty} from \"../util/tools\";\r\nimport {Link} from \"react-router-dom\";\r\nimport RithIcon from '../public/img/right.svg'\r\n\r\nlet defaultProps = {\r\n  data: {},\r\n  currentPage: 1,\r\n  fetchFunc: () => {},\r\n  isParent: true,\r\n}\r\n\r\nlet propTypes = {\r\n  data: PropTypes.object,\r\n  currentPage: PropTypes.number,\r\n  fetchFunc: PropTypes.func,\r\n  isParent: PropTypes.bool\r\n}\r\n\r\nlet ChannelVideoArea = function (props) {\r\n  let [ videos, setVideos ] = useState([]);\r\n  let { typename, fetchFunc, limit, tid, currentPage, loadMoreComponent } = props.data;\r\n  let { isParent } = props;\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      let videoData = await fetchFunc({rid: tid, page: currentPage});\r\n      if (currentPage) {\r\n        setVideos(videos.concat(videoData.data))\r\n        return\r\n      }\r\n      setVideos(videoData.data || [])\r\n    }\r\n    fetchData()\r\n  }, [tid, currentPage]);\r\n\r\n  if (limit) {\r\n    videos = videos.slice(0, limit)\r\n  }\r\n\r\n  return (\r\n    <div className={'channel-video-area'}>\r\n      <div className={'top-type-title-container'}>\r\n        <div className={'title'}>{typename === '推荐' ? '热门推荐' : typename}</div>\r\n        <div className={'title-right'}>\r\n          {\r\n            isParent &&\r\n            <Link to={'/channel/' + tid}>\r\n              <div className={'text'}>查看更多</div>\r\n              <div style={{ display: 'inline-block'}}><RithIcon className={'arrow-right'}/></div>\r\n            </Link>\r\n          }\r\n        </div>\r\n      </div>\r\n      <div className={'video-container'}>\r\n        {\r\n          isEmpty(videos) ?\r\n            <div className={'loading-container'}>加载中...</div>\r\n            :\r\n            videos.map(video => {\r\n              return <VideoCard data={video} key={video.aid}/>\r\n            })\r\n        }\r\n      </div>\r\n      {\r\n        loadMoreComponent\r\n      }\r\n    </div>\r\n  )\r\n};\r\n\r\nChannelVideoArea.defaultProps = defaultProps;\r\nChannelVideoArea.propTypes = propTypes;\r\n\r\nexport default ChannelVideoArea\r\n","import React, {useCallback, useEffect, useState} from \"react\";\r\nimport ChannelBar from \"../../components/ChannelBar\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {useMappedState} from \"redux-react-hook\";\r\nimport pathToRegexp from \"path-to-regexp\";\r\nimport ChannelVideoArea from \"../../components/ChannelVideoArea\";\r\nimport {fetchArchiveRank, fetchRankingRegion} from \"../../api/ranking\";\r\nimport './style/channel.scss'\r\n\r\nlet channelPathRe = pathToRegexp('/channel/:rid');\r\n\r\nfunction Channel(props) {\r\n  let {channelBarList = [], channelBarMap = {}} = useMappedState(useCallback(state => state.channelBar, []));\r\n  let [videoAreasDatas, setVideoAreaDatas] = useState([]);\r\n  let [currentPage, setCurrentPage] = useState(1);\r\n\r\n  let match = channelPathRe.exec(props.location.pathname);\r\n  let currentRid = 0;\r\n  if (match) {\r\n    currentRid = parseInt(match[1])\r\n  }\r\n\r\n  let currentChannel = channelBarMap[currentRid];\r\n\r\n  useEffect(() => {\r\n    if (currentChannel) {\r\n      if (currentChannel.isParent) {\r\n        genVideoAreasWhenIsParent()\r\n      } else {\r\n        genVideoAreasWhenIsChild()\r\n      }\r\n    }\r\n  }, [currentRid, channelBarMap, currentPage]);\r\n\r\n  let genVideoAreasWhenIsParent = () => {\r\n    let videoAreasDatas = [];\r\n    currentChannel.children.forEach(child => {\r\n      videoAreasDatas.push({\r\n        ...child,\r\n        fetchFunc: fetchRankingRegion,\r\n        typename: child.typename,\r\n        limit: 4,\r\n      })\r\n    });\r\n    setVideoAreaDatas(videoAreasDatas)\r\n  };\r\n\r\n  let genVideoAreasWhenIsChild = () => {\r\n    let videoAreasDatas = [\r\n      {\r\n        ...currentChannel,\r\n        fetchFunc: fetchRankingRegion,\r\n        typename: '热门推荐',\r\n        tid: currentChannel.tid,\r\n        // 每一块区域显示的视频数量\r\n        limit: 4,\r\n      },\r\n      {\r\n        ...currentChannel,\r\n        fetchFunc: fetchArchiveRank,\r\n        typename: '最新视频',\r\n        tid: currentChannel.tid,\r\n        currentPage: currentPage,\r\n        limit: false,\r\n        loadMoreComponent: (\r\n          <div className={'load-more-container'}>\r\n            <span onClick={onLoadMoreClick}>点击加载更多</span>\r\n          </div>\r\n        )\r\n      }\r\n    ];\r\n    setVideoAreaDatas(videoAreasDatas)\r\n  };\r\n\r\n  let onLoadMoreClick = () => {\r\n    setCurrentPage(currentPage + 1)\r\n  }\r\n\r\n  return (\r\n    <div className={'channel-container'}>\r\n      <ChannelBar/>\r\n      {\r\n        videoAreasDatas.map(videoAreaData => {\r\n          return <ChannelVideoArea\r\n            key={videoAreaData.typename + videoAreaData.tid}\r\n            data={videoAreaData}\r\n            isParent={currentChannel.isParent}\r\n          />\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(Channel)\r\n","import React, {Children, useCallback, useEffect, useRef, useState} from \"react\";\r\nimport './style/carousel.scss';\r\n\r\nlet defaultProps = {\r\n  infinite: true,\r\n  autoPlay: true,\r\n  autoPlayTime: 2000,\r\n  duration: 0.3\r\n};\r\n\r\nlet Carousel = function (props) {\r\n  let innerRef = useRef(null);\r\n  let startXRef = useRef(0);\r\n  let timeOutRef = useRef(null);\r\n  let movingRef = useRef(false);\r\n  let [viewWidth, setViewWidth] = useState(0);\r\n  let [autoPlay, setAutoPlay] = useState(props.autoPlay);\r\n  let [currentIndex, setCurrentIndex] = useState(1);\r\n  let [innerItems, setInnerItems] = useState(null); // 经过处理后的元素\r\n\r\n  let childrenCount = React.Children.count(props.children);\r\n  let innerItemsCount = childrenCount > 1 ? childrenCount + 2 : childrenCount;\r\n  let infiniteSlide = childrenCount > 1 ? props.infinite : false;\r\n  let autoPlayTime = props.autoPlayTime;\r\n  let duration = props.duration + 's';\r\n  let innerWidth = innerRef.current && innerRef.current.offsetWidth || 0\r\n\r\n  let startAutoPlay = () => {\r\n    setAutoPlay(true)\r\n  };\r\n\r\n  let stopAutoPlay = () => {\r\n    clearTimeout(timeOutRef.current)\r\n    setAutoPlay(false)\r\n  };\r\n\r\n  // 自动播放轮播图\r\n  useEffect(() => {\r\n    if (autoPlay && viewWidth && childrenCount > 1) {\r\n      if (timeOutRef.current) clearTimeout(timeOutRef.current);\r\n      timeOutRef.current = setTimeout(() => {\r\n        innerRef.current.style.transition = 'none';\r\n        move(0);\r\n        setTimeout(() => {\r\n          finalMove('left', viewWidth, viewWidth / 2);\r\n        }, 0);\r\n      }, autoPlayTime);\r\n    }\r\n    return () => {\r\n      clearTimeout(timeOutRef.current)\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    innerRef.current.addEventListener('touchstart', touchStart);\r\n    innerRef.current.addEventListener('touchmove', touchMove);\r\n    innerRef.current.addEventListener('touchend', touchEnd);\r\n    window.addEventListener('resize', computeEachItemWidth)\r\n    if (childrenCount === 1) {\r\n      setCurrentIndex(0);\r\n    }\r\n    return () => {\r\n      innerRef.current.removeEventListener('touchstart', touchStart);\r\n      innerRef.current.removeEventListener('touchmove', touchMove);\r\n      innerRef.current.removeEventListener('touchend', touchEnd);\r\n      window.removeEventListener('resize', computeEachItemWidth)\r\n    };\r\n  });\r\n\r\n  // 获取可视区域大小\r\n  useEffect(() => {\r\n    computeEachItemWidth();\r\n  }, [innerItemsCount]);\r\n\r\n  // 第一次进入时初始化图片位置\r\n  useEffect(() => {\r\n    if (viewWidth) {\r\n      let index = childrenCount <= 1 ? 0 : 1;\r\n      move(0, index);\r\n    }\r\n  }, [viewWidth, props.children]);\r\n\r\n  useEffect(() => {\r\n    // 将原来的children中的第一个元素和最后一个元素，分别复制后放在末尾和头部，方便无限轮播\r\n    if (viewWidth) {\r\n      let firstEle = null;\r\n      let lastEle = null;\r\n\r\n      let newChildren = React.Children.map(props.children, (child, index) => {\r\n        child = React.cloneElement(child, {style: {width: '100%', height: '100%', display: 'inline-block'}});\r\n        let innerItem = (\r\n          <div key={index + 1} style={{width: viewWidth}} className={'carousel-item'}>\r\n            {child}\r\n          </div>\r\n        );\r\n        if (index === 0 && childrenCount > 1) firstEle = React.cloneElement(innerItem, {key: 0});\r\n        if (index === childrenCount - 1 && childrenCount > 1) lastEle = React.cloneElement(innerItem, {key: childrenCount + 1});\r\n        return innerItem;\r\n      });\r\n      let innerItems = [lastEle, ...newChildren, firstEle];\r\n      setInnerItems(innerItems);\r\n    }\r\n  }, [viewWidth, props.children]);\r\n\r\n  // 计算轮播图可视区域的大小\r\n  let computeEachItemWidth = () => {\r\n    let viewWidth = innerRef.current.offsetWidth / innerItemsCount;\r\n    if (!innerItemsCount) {\r\n      viewWidth = 0;\r\n    }\r\n    setViewWidth(viewWidth);\r\n  };\r\n\r\n  // 屏幕触摸时的移动\r\n  let move = (x, index) => {\r\n    index = index || currentIndex;\r\n    let moveX = -(index * viewWidth) + x;\r\n    innerRef.current.style.transform = `translateX(${moveX}px)`;\r\n  };\r\n\r\n  // 触摸结束后，整个图片的移动\r\n  let finalMove = (direction, distance, changeX) => {\r\n    movingRef.current = true;\r\n    innerRef.current.style.transition = `transform ${duration}`;\r\n    let nextIndex = direction === 'left' ? currentIndex + 1 : currentIndex - 1;\r\n    distance = Math.abs(distance);\r\n    if (nextIndex > innerItemsCount - 1 || nextIndex < 0 || Math.abs(changeX) < viewWidth / 4) {\r\n      nextIndex = currentIndex;\r\n      distance = 0;\r\n    }\r\n    if (direction === 'left') {\r\n      move(-distance);\r\n    } else {\r\n      move(distance);\r\n    }\r\n    if (infiniteSlide) {\r\n      if (nextIndex === 0) {\r\n        setPosition(innerItemsCount - 2);\r\n      }\r\n      if (nextIndex === innerItemsCount - 1) {\r\n        setPosition(1);\r\n      }\r\n    }\r\n    setCurrentIndex(nextIndex);\r\n    movingRef.current = false;\r\n  };\r\n\r\n  let setPosition = (nextIndex) => {\r\n    setTimeout(() => {\r\n      // 设置正确索引，下一次touchStart事件触发时，会正确设置translateX的值\r\n      // innerRef.current.style.transition = 'none';\r\n      setCurrentIndex(nextIndex);\r\n      // move(0, nextIndex)\r\n    }, 0);\r\n  };\r\n\r\n  let touchStart = (e) => {\r\n    e.stopPropagation();\r\n    stopAutoPlay();\r\n    innerRef.current.style.transition = 'none';\r\n    startXRef.current = e.changedTouches[0].pageX;\r\n    move(0);\r\n  };\r\n\r\n  let touchMove = (e) => {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    let x = e.changedTouches[0].pageX;\r\n    move(x - startXRef.current);\r\n  };\r\n\r\n  let touchEnd = (e) => {\r\n    e.stopPropagation()\r\n    let endX = e.changedTouches[0].pageX;\r\n    let changeX = endX - startXRef.current;\r\n    // 触摸滑动方向\r\n    let direction = changeX < 0 ? 'left' : 'right';\r\n    finalMove(direction, viewWidth, changeX);\r\n    startXRef.current = 0;\r\n    startAutoPlay()\r\n  };\r\n\r\n  return (\r\n    <div className={'carousel-outer-container'} >\r\n      <div className={'carousel-wrap'}>\r\n        <div\r\n          ref={innerRef}\r\n          className={'carousel-inner-container'}\r\n          style={{width: `${100 * innerItemsCount}%`}}\r\n        >\r\n          {innerItems}\r\n        </div>\r\n      </div>\r\n      {\r\n        childrenCount === 0 ? null :\r\n        <div className={'carousel-button-wrap '}>\r\n          {\r\n            [...new Array(childrenCount).keys()].map(key => {\r\n              key = childrenCount > 1 ? key + 1 : key;\r\n              return (\r\n                <span key={key} className={`carousel-button ${currentIndex === key ? 'selected' : ''}`}/>\r\n              )\r\n            })\r\n          }\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nCarousel.defaultProps = defaultProps;\r\n\r\nexport default Carousel;\r\n","import {useCallback, useEffect, useLayoutEffect, useState} from \"react\";\r\nimport {clearPageCache} from \"./tools\";\r\n\r\n// 每个使用useState的地方都用这个替换，当action为POP时会检测是否有缓存数据\r\nexport function useCacheState(initial, pageKey, stateKey, history, dependence=[]) {\r\n  let [data, setData] = useState(initial);\r\n\r\n  useLayoutEffect(() => {\r\n    if (history) {\r\n      if (history.action === 'POP') {\r\n        let pageCache = sessionStorage.getItem(pageKey);\r\n        if (pageCache) {\r\n          pageCache = JSON.parse(pageCache);\r\n          setData(pageCache[stateKey] || initial);\r\n        }\r\n      }\r\n    }\r\n  }, dependence);\r\n\r\n  let getCacheDataMap = useCallback(() => {\r\n    return {[stateKey]: data};\r\n  }, [stateKey, data]);\r\n\r\n  return [data, setData, getCacheDataMap];\r\n}\r\n\r\nexport let useClearPageCache = (pageKey, dependence=[]) => {\r\n  useLayoutEffect(() => {\r\n    let clearFunc = clearPageCache(pageKey);\r\n    window.addEventListener('beforeunload', clearFunc);\r\n    return () => window.removeEventListener('beforeunload', clearFunc);\r\n  }, dependence);\r\n};\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"image\", {\n  width: \"100%\",\n  height: \"100%\",\n  xlinkHref: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAjwSURB VHja7VxrbBTXGT33zszuem2MjcCYh41tIA6VgBpKoE2DkraBRKoKKYUSReVHVaK2VCRKqPIgSekP UNUiVX2kpFVT5VFVCGiDAoTIAkErk1AwoTwEwTZxYrsOdjD2el+z87i3P+bu7qzZxTs7CxOpe0ZY u3u/+e45cx9z5873AZRQwv83SIFnWH+57a87BsTmx5E/ZwIIACIOq6rkUTj5tD8OgIE7k0AdV0kh jz7Md/E95vYrcyCBpuQUQp9CWuuLP8r/wnebW9tqIIE6u6xOqiYgoJCGlk/aLH6Jd/yq+QIMsAJa QdB/vOzlJ+UvWT+x3pafntfARDvkBWctQEChVN6X+l5213M9S6BAsnWr/C+GBHlb5cvPJ+kDtO43 jZCdtWcBAgzD9otSt6V/ORSHTS/a8teTXtwqf8FecMkUF+M2CQAoaOtxmPZfpm0aWAkFNG8Jgv4b Uze/ROfYCyKnNw07HVFOBQBY1fP3V6HZCdV8/8YjebeCRV8+OOOxn9GZ9oLQ+ZZ9zqcDZwI4GBiM 73T97jWu2guq10cfy0uCoP/Pxod/TmvsBYOnG/Z2qWJCcADJgW1y1qagh2PmR/ffTfzpQqX5mer9 5z6zZnGS0wMBhXLq7q9sJZX2gp62hndjMcShQgcDu50CxOd/qde7HmqmAZuEph9MP3O2y7qxkazn E0hQOhbMfxZBe8Hlo3OPsxhiiEOD4YS+MwHpGz4HB05rHZ2rmqRym7O67zZdP9NuZukEJDlxdi+d vQU+e9GpQy3vIYYo4khAL0YXSt7cabLDpA6SOd9fNN7rXDdLnpA+lU5bOc9ob7Mm2swzKSQovQ/U /ySjTn7kreX/QQxxxKFBBwPG1JquM+v8JGUlT0EhiSP9Kfk97Zh284OdG2qVapuEyfcvKD97RM/w IUGCDGXgoWkbM0iYe/Z+6wpUqEhAhylEZ9YmpZYr9mVkRqewfxb0e+ZOWeprptNR4bCTFR8MMTZg dtw4s/7ccRN87HIvLYAkG72vZdqjtMlj2tkwOLxv0bGPTbHy4pkCxCDbVvHcRt9XvWaaG+zSgd+v HoSZXj4m+xUBhbRn8prnab3XJMfByAc7Fn+UlpC8cxJIv6xe8+Lnnj5QteiFI7MgJ59DJFhrTGmK b9/T0lyv2eUFf8P84ROndOuGmZzrlYsr5QVeM8sXdPqO9cmVFwVAIW+tqlnrNS0nqHjwYANkEKsF KOSnVqDcvds7CPL1b0KGBEJBId3lr/qa14ycIrD06eqkAPnPzbTKa0KOIf+oBTIoBYU8b57XbApB zTzIkCgopIrP48JhXAQbIIPKoJB8U927i/XFR8sqgzPHt0z0R0bKyoN1hTyP2yFNKadRSwCd6M7V 8Ic/PLYnAg6yfsIrD0xsvoXMT7a07hoBB74R/Ot9Uxe6qlb5cvBIXAYBhd+Nn9DlWW+HEzDAQXbH D+3vXZ1LQryneW9fHAYYyBG19p1PjdrFbmqe6UveiV3hx63hCMIYRQijCIcjT7Tmsvxta98owggh hBBGEf32MSTc1GySIghI9P7tOqIII4xRhBFG9PXBxH+zWbLRZ3tslhFE3x8JXXVTNyMgMgp5R2CD GoIq9hMYKHwAJG3EP+NmSz0EFXHEoIGBwACHpI64HH6QXZ4PYkKDJvYTKDgkaDT7xgiDhgQ0IeBW lnmCkSIIAGDAgCkeMSgMGNnNKLdZUpgwYFB3b3dQ0N7oTbRY6imVi83HnJdMlI5veecEABm7BPm8 IOJZPnkqIJMIv6VdvpZ3WICHKAnwGiUBXqMkwGuUBHiNkgCvURLgNUoCvEZJgNcoCfAaJQFew72A sUFmJOde5dh9WAKX25pFEeCfmBnJBYAoVdkspSqbjUBZJVzCtQClftskW1gSAd0+WanLWlXl3oZU cCYBAV0bDDY7rK74AkCeWVcrp0OUZitPrctlumrtvQFbIJP86hp3r1bSAlztUQYWfrL5tVooUOB7 c9qlzYH5uSyVxmNb9tfDBx98O6dENk5wGdijMoCgGpVsJwm4cwVmdLMbdJLcNP6wZN3GdVopz3Ef Czb3ya5hGQBnN6TpLn1ReTZm52na6Gt0Sx0AWKTLBCg4ePSzYji800gMgIFTcPBrH3tNphAMdYOD UzCwAx1ekykEJzpgglFwmFs+1a95TccpzJFN3WBgFAwGjPNtXhNyis62IQ0GGIUJE/rqD8whryk5 AQt/7xR0qwsxGND74m+97TUpJzh6oD0C0QIcJjQk1l7pO+E1rXxx/fSKC0hAtwQwmNCRgLq0NXTZ a2r5INq17JAI1RezEIMBDfH+yKK9w+e8pjceQpfu2X01IuLdGXgyMUFBAEFUKMH371m8sijv728H zItH7z05GkYUMcShwwRPL6g4ADD8abDz4jJaWeN52P1YGNfOPvGPxz9MRDNyPXjyaYqKVgigDGXw t5S/VP/FGdWTlSAVTwyBqTe3i37DjBeDW1bfQ6YKANzU1eGhC32/6D0RRgIq4oK+lWvD01kRlgQf /PAjAB9kyOlMDcjhRypuWkPueHPrAEwX2azWc3JW39vfeCEZZs/ERKMhARUJaNbwBcCT0SocRPzA YECHBgUKJEipdBTlasfCMZVw9Y/9iDvP/LJBjL+rnTf5jv+hHyoMWDkbJkzo0KFDE9de0E+H21gS uDDXIEMWuSsUFDL8G9rbFyuT7ZWcPNwzCtUaSi5aQIZ/w+n2RWN8v9sfhirIWpwM8c/MTEIZO1R5 qskMm2YTbMDs61oxU0kGWBnnDi85KWYDVYQxFXKkfK+sk9O+31nyb+E7gYQIk9JTcnLk0Ni/p/cY RAo0/ChDMFi+q2lZvc8/MLSzY98QoohBheaiCyHluzwYfGX20rqsvu0HMCbKJfsTbGbCkzW8/db8 BAUEJjQxH2iuxkCm7wDknL5zZu9nv2Vlmqf1m0hABgGDLrqNXlA2t72mtG8NknPf+d1zOUwAHIbI XbGi34wCk9Fz+U4U4ju/vclUjhmoOIOJw+H/QVB83/knkQP2PEo+djZwKaFg384S+TNRlJi3O+C7 hNuK/wFaDc4Pa8zXNQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMC0yMFQxNzoyMzowNCswMzow MNCU2J8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTAtMjBUMTc6MjM6MDQrMDM6MDChyWAjAAAA AElFTkSuQmCC\"\n});\n\nvar SvgTvPause = function SvgTvPause(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 96,\n    height: 96\n  }, props), _ref);\n};\n\nexport default SvgTvPause;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"image\", {\n  width: \"100%\",\n  height: \"100%\",\n  xlinkHref: \"data:image/png;base64,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\"\n});\n\nvar SvgTvPlay = function SvgTvPlay(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 96,\n    height: 96\n  }, props), _ref);\n};\n\nexport default SvgTvPlay;","// 原本是想自定义video的播放栏，但发现移动端似乎很难定制，放弃了\r\nimport React, {Fragment, useEffect, useRef, useState} from \"react\";\r\nimport {getPicUrl, isEmpty} from \"../../util/tools\";\r\nimport TVPauseIcon from \"../../public/img/TV-Pause .svg\";\r\nimport TVPlayIcon from \"../../public/img/TV-Play.svg\";\r\nimport {VIDEO_MP4_URL} from \"../../api/url\";\r\nimport PropTypes from \"prop-types\";\r\nimport './style/player.scss'\r\n\r\nlet propTypes = {\r\n  videoInfo: PropTypes.object,\r\n  className: PropTypes.string\r\n}\r\n\r\nlet defaultProps = {\r\n  videoInfo: {},\r\n  className: 'player-container',\r\n}\r\n\r\nfunction getVideoUrl(url) {\r\n  // 拼接播放源地址\r\n  if (url.startsWith('https')) {\r\n    return `${VIDEO_MP4_URL}?video=${encodeURIComponent(url)}`\r\n  }\r\n  return `${VIDEO_MP4_URL}?video=https:${encodeURIComponent(url)}`;\r\n}\r\n\r\nfunction Player(props) {\r\n  let {videoInfo, className} = props;\r\n  let videoRef = useRef();\r\n  let [barrageOn, setBarrageOn] = useState(true);\r\n  let [isPlay, setIsPlay] = useState(false);\r\n  let [isShowCover, setIsShowCover] = useState(true)\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      if (isPlay) {\r\n        videoRef.current.play()\r\n      } else {\r\n        videoRef.current.pause()\r\n      }\r\n    }\r\n  }, [isPlay]);\r\n\r\n  let onPlayOrPause = () => {\r\n    setIsPlay(isPlay => !isPlay);\r\n    setIsShowCover(false)\r\n  };\r\n\r\n  return (\r\n    <div className={className}>\r\n      {\r\n        // 有数据再请求，要不会出现裂开的图片\r\n        !isEmpty(videoInfo) &&\r\n        <Fragment>\r\n          <video\r\n            height=\"100%\"\r\n            width=\"100%\"\r\n            preload=\"auto\"\r\n            x5-playsinline=\"true\"\r\n            webkit-playsinline=\"true\"\r\n            playsInline={true}\r\n            ref={videoRef}\r\n            controls\r\n            style={{ display: isShowCover ? 'none' : \"block\"}}\r\n          >\r\n            <source src={getVideoUrl(videoInfo.initUrl)} type={'video/mp4'}/>\r\n          </video>\r\n\r\n          { isShowCover && <img src={getPicUrl(videoInfo.pic, \"@480w_300h\")} className={'cover-img'}/> }\r\n          <div className={'play-or-pause'} onClick={onPlayOrPause} style={{ display: isShowCover ? 'block' : 'none'}}>\r\n            {\r\n              isPlay ? <TVPauseIcon className={'icon'}/> : <TVPlayIcon className={'icon'}/>\r\n            }\r\n          </div>\r\n        </Fragment>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nPlayer.defaultProps = defaultProps;\r\nPlayer.propTypes = propTypes;\r\n\r\nexport default Player\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 900V0h1800v1800H0V900z\",\n  fill: \"#b0b9c0\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#cbd1d8\"\n}, React.createElement(\"path\", {\n  d: \"M0 900V0h1800v1800h-525l-43-133c-24-72-52-152-64-177-11-24-30-65-41-90-12-25-23-48-25-52-2-5 44-8 103-8 119 0 149-10 189-62 39-52 49-139 44-381-5-229-10-252-61-305-40-42-80-52-202-52h-99l48-49c51-52 58-84 18-89-17-3-41 15-96 67l-73 71H834l-69-70c-70-71-106-87-119-53-5 11 7 31 39 63 25 25 45 48 45 52 0 3-53 7-117 9-141 5-177 21-215 97-22 44-23 60-26 275-4 250 4 311 44 364s70 63 185 63c92 0 101 2 94 18-30 71-108 293-127 360l-23 82H0V900z\"\n}), React.createElement(\"path\", {\n  d: \"M956 1480c-12-51-26-115-26-127 0-9 17-13 50-13 34 0 50 4 50 13-1 6-16 44-34 82-30 62-34 67-40 45zM794 1423c-16-37-30-71-32-75s22-8 53-8c55 0 57 1 51 23-3 12-11 46-17 75-7 28-15 52-19 52s-20-30-36-67zM464 1267c-38-33-43-83-36-372l5-250 28-27 27-28h834l27 28 28 27 5 250c7 280 2 334-32 370l-23 25H491l-27-23zm814-23c27-8 52-52 51-91-1-23-3-20-10 14-6 23-17 47-26 55-12 10-98 14-387 18l-371 5 360 3c198 1 370-1 383-4zm-767-30c-12-15-22-41-22-58-1-18-3-24-6-13-7 25 4 62 23 81 24 25 28 19 5-10zm-24-361c-1-49-3-9-3 87s2 136 3 88c2-49 2-127 0-175zm840 0c-1-49-3-9-3 87s2 136 3 88c2-49 2-127 0-175zm-443 230c4-5 26-8 48-8 27 0 44-6 51-17 18-27 1-32-24-7l-22 22-18-24-17-23-21 24-21 25-20-24c-11-13-23-21-26-18-11 11 5 37 28 47 29 11 33 12 42 3zM671 961c77-26 139-59 139-74 0-6-4-18-9-26-12-18-78-5-163 33-56 25-65 37-52 70 8 20 19 20 85-3zm554-12c4-11 5-22 3-24-15-13-123-61-162-71-44-12-51-11-62 4-8 9-14 20-14 23 0 12 36 36 85 56 94 39 141 43 150 12zM510 666c11-14 61-16 396-16h383l12 23c7 12 16 36 20 52l7 30 1-33c1-25-7-41-28-63l-29-29H913c-197 0-367 3-379 6-27 7-54 54-53 91 1 25 2 24 8-9 4-20 13-44 21-52z\"\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#e5e9ef\"\n}, React.createElement(\"path\", {\n  d: \"M0 900V0h1800v1800h-519l-30-92c-43-135-58-174-102-267-21-46-36-87-33-92s52-9 109-9c103 0 105 0 141-32 69-61 74-82 74-358 0-261-5-301-47-350-43-52-70-60-200-60h-117l48-49c49-50 56-75 24-95-15-9-30 1-96 67l-77 77H835l-77-77c-66-66-81-76-96-67-32 20-25 45 24 95l48 49H617c-125 0-153 7-194 52-49 52-53 80-53 346 0 256 4 290 42 345 34 48 70 59 185 59 56-1 103 1 103 3s-14 34-31 72c-30 67-96 258-118 341l-12 42H0V900z\"\n}), React.createElement(\"path\", {\n  d: \"M948 1424c-16-78-13-84 45-84 45 0 46 6 3 89l-33 64-15-69zM796 1419c-14-33-24-65-20-70 6-10 54-12 77-4 12 5 12 14-2 65-9 32-19 61-22 65-3 3-18-22-33-56zM468 1261l-33-29V648l33-29 32-29h810l32 29 33 29v581l-29 30-30 31H500l-32-29zm839-33c23-21 23-22 23-287 0-258-1-265-22-288l-21-23H906c-376 0-380 0-403 22-23 21-23 22-23 287 0 258 1 265 22 288l21 23h381c376 0 380 0 403-22z\"\n}), React.createElement(\"path\", {\n  d: \"M870 1233c-310-3-346-5-357-20-10-12-13-84-13-273 0-236 1-258 18-273s58-17 389-17c346 0 371 1 386 18 15 16 17 50 17 273 0 189-3 259-12 271-18 22-42 23-428 21zm18-155c9-9 15-9 24 0 19 19 42 14 67-12 27-29 10-47-20-20-18 16-20 16-40-2s-22-18-34-1c-15 21-44 22-51 2-6-15-34-22-34-8 0 4 10 17 22 30 24 25 48 29 66 11zM739 938c69-35 87-62 56-88-13-10-27-8-88 14-86 31-137 61-137 79 0 47 69 46 169-5zm479 30c28-28 13-49-63-84-91-42-130-51-150-34-31 26-18 50 43 77 58 26 128 51 148 52 5 1 15-4 22-11z\"\n}));\n\nvar SvgNoface = function SvgNoface(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 180,\n    height: 180,\n    viewBox: \"0 0 1800 1800\"\n  }, props), _ref, _ref2, _ref3);\n};\n\nexport default SvgNoface;","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport LazyLoadImg from \"./LazyLoadImg\";\r\nimport {getPicUrl, getPubdate} from \"../util/tools\";\r\nimport './style/commentListItem.scss'\r\nimport NoFaceIcon from '../public/img/noface.svg'\r\n\r\nlet propTypes = {\r\n  data: PropTypes.object\r\n}\r\n\r\nlet defaultProps = {\r\n  data: {},\r\n}\r\n\r\nfunction CommentListItem(props) {\r\n  let { data } = props;\r\n  return (\r\n    <div className={'comment-list-item-container'}>\r\n      <div className={'user-avatar-container'}>\r\n        <NoFaceIcon className={'no-avatar'}/>\r\n        <LazyLoadImg className={'avatar'} src={getPicUrl(data.member.avatar, \"@320w_200h\")}/>\r\n      </div>\r\n      <div className={'user-name-comment-container'}>\r\n        <div className={'user-name-container'}>\r\n          <span className={'user-name'}>{data.member.uname}</span>\r\n          <span className={'comment-publish-date'}>{getPubdate(data.ctime)}</span>\r\n        </div>\r\n        <div className={'comment-container'}>\r\n          <span>{data.content.message}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nCommentListItem.propTypes = propTypes;\r\nCommentListItem.defaultProps = defaultProps;\r\n\r\nexport default CommentListItem\r\n","import PropTypes from \"prop-types\";\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport {isEmpty} from \"../../util/tools\";\r\nimport CommentListItem from \"../../components/CommentListItem\";\r\nimport './style/comment.scss'\r\nimport api from \"../../api\";\r\n\r\nlet propTypes = {\r\n  data: PropTypes.array,\r\n  pageInfo: PropTypes.object,\r\n}\r\n\r\nlet defaultProps = {\r\n  data: [],\r\n  pageInfo: {},\r\n};\r\n\r\nfunction Comment(props) {\r\n  let { aid } = props;\r\n  let [currentPage, setCurrentPage] = useState(1);\r\n  let [commentListData, setCommentListData] = useState([]); // 评论列表\r\n  let [pageInfo, setPageInfo] = useState({}); // 分页信息\r\n  let loadingRef = useRef(false);\r\n\r\n  let resetState = () => {\r\n    setCurrentPage(1)\r\n    setCommentListData([])\r\n    setPageInfo({})\r\n  };\r\n\r\n  // aid改变代表切换了另一个视频\r\n  useEffect(() => {\r\n    resetState();\r\n  }, [aid]);\r\n\r\n  useEffect(() => {\r\n    loadingRef.current = true;\r\n    let _ = async () => {\r\n      let result = await getCommentData(aid, currentPage);\r\n      let data = result.data || {};\r\n      let replies = data.replies || [];\r\n      let pageInfo = data.page || {};\r\n      setCommentListData(commentListData => commentListData.concat(replies));\r\n      setPageInfo(pageInfo)\r\n      loadingRef.current = false\r\n    };\r\n    _()\r\n  }, [aid, currentPage]);\r\n\r\n  // 通过传参而不是直接用aid和commentPage， 是方便监听scroll事件时用最新的参数去请求评论\r\n  async function getCommentData(aid, commentPage) {\r\n    return  await api.fetchCommentData({ aid, pn: commentPage});\r\n  }\r\n\r\n  let onLoadMoreComment = () => {\r\n    if (!loadingRef.current) {\r\n      setCurrentPage(currentPage => currentPage + 1)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={'comment-list-container'}>\r\n      <div className={'comment-top-title'}>\r\n        评论\r\n        <span className={'total-num'}>（{pageInfo.acount || 0}）</span>\r\n      </div>\r\n      <div>\r\n        {\r\n          isEmpty(commentListData) ? <span>加载中...</span> :\r\n            commentListData.map(d => {\r\n              return (\r\n                <CommentListItem data={d} key={d.rpid}/>\r\n              )\r\n            })\r\n        }\r\n      </div>\r\n      {\r\n        !isEmpty(commentListData) &&\r\n        <div className={'load-more-container'} onClick={onLoadMoreComment}>\r\n          <span>点击加载更多</span>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nComment.propTypes = propTypes;\r\nComment.defaultProps = defaultProps;\r\n\r\nexport default Comment\r\n","import React, {Fragment, useEffect, useLayoutEffect, useRef, useState} from \"react\";\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport api from \"../../api/index\";\r\nimport {getPubdate, ifFetch, isEmpty, numberToW, setCacheData} from \"../../util/tools\";\r\nimport './style/video.scss';\r\nimport PopularIcon from '../../public/img/ic_popular.svg';\r\nimport ArrowDown from '../../public/img/arrow down.svg';\r\n\r\nimport Player from \"./Player\";\r\nimport VideoCard from \"../../components/VideoCard\";\r\nimport Comment from \"./Comment\";\r\nimport {Helmet} from \"react-helmet\";\r\nimport {useCacheState, useClearPageCache} from \"../../util/customHook\";\r\n\r\nfunction Video(props) {\r\n  let {match} = props;\r\n  let aid = match.params.aid;\r\n  let pageKey = `video/${aid}`, history = props.history;\r\n  let [videoInfo, setVideoInfo, getCacheVideoInfoMap] = useCacheState({}, pageKey, 'videoInfo', history, [pageKey]);\r\n  let [relatedVideo, setRelatedVideo, getCacheRelatedVideoMap] = useCacheState([], pageKey, 'relatedVideo', history, [pageKey]);\r\n  let [descOpen, setDescOpen, getCacheDescOpenMap] = useCacheState(false, pageKey, 'descOpen', history, [pageKey]);\r\n\r\n  useClearPageCache(pageKey, [pageKey]);\r\n\r\n  // 切换到别的视频时，清空当前视频的数据，这样才像重新到新的一个页面\r\n  let resetStateWhenToOtherVideo = () => {\r\n    setVideoInfo({});\r\n    setRelatedVideo([]);\r\n  };\r\n\r\n  // aid改变代表切换了另一个视频\r\n  useLayoutEffect(() => {\r\n    ifFetch(resetStateWhenToOtherVideo, history, pageKey);\r\n  }, [aid]);\r\n\r\n  useEffect(() => {\r\n    async function getVideoInfo() {\r\n      let result = await api.fetchVideoInfo({aid});\r\n      setVideoInfo(result.data.videoInfo);\r\n    }\r\n\r\n    ifFetch(getVideoInfo, history, pageKey);\r\n  }, [aid, history, pageKey]);\r\n\r\n  // 获取相关视频数据\r\n  useEffect(() => {\r\n    async function getRelatedVideo() {\r\n      let related = await api.fetchRelated({aid});\r\n      setRelatedVideo(related.data);\r\n    }\r\n\r\n    ifFetch(getRelatedVideo, history, pageKey);\r\n  }, [aid]);\r\n\r\n  let cacheData = () => {\r\n    setCacheData(pageKey, [getCacheVideoInfoMap, getCacheRelatedVideoMap, getCacheDescOpenMap]);\r\n  };\r\n\r\n  console.log(videoInfo, 'videoInfo');\r\n  return (\r\n    <div className={'video-container'} key={props.location.pathname}>\r\n      <Helmet>\r\n        <title>{videoInfo.title}</title>\r\n      </Helmet>\r\n      <Player videoInfo={videoInfo} className={'player-container'}/>\r\n      {/*视频详情介绍*/}\r\n      <div className={'video-desc'}>\r\n        {\r\n          isEmpty(videoInfo) ? <span>加载中...</span> :\r\n            <Fragment>\r\n              <div className={'title-container'}>\r\n                {/*<div className={'hot-tag'}>*/}\r\n                {/*  <PopularIcon className={'hot-tag-icon'}/>*/}\r\n                {/*  <span>热门</span>*/}\r\n                {/*</div>*/}\r\n                <div className={`title ${descOpen ? 'open' : ''}`}>\r\n                  {videoInfo.title}\r\n                </div>\r\n                <ArrowDown className={`arrow rotate-animation ${descOpen ? 'arrow-up' : ''}`}\r\n                           onClick={() => setDescOpen(!descOpen)}/>\r\n              </div>\r\n              <div className={`detail-container ${descOpen ? 'open' : ''}`}>\r\n                <div>\r\n                  <span className={'owner'}>{videoInfo.owner.name}</span>\r\n                  <span className={'view'}>{numberToW(videoInfo.stat.view)}次观看</span>\r\n                  <span className={'danmu'}>{videoInfo.stat.danmaku}弹幕</span>\r\n                  <span className={'date'}>{getPubdate(videoInfo.pubdate)}</span>\r\n                </div>\r\n                <div className={'warning-text'}>未经作者授权禁止转载</div>\r\n                <p className={'desc-detail'}>{videoInfo.desc}</p>\r\n                <div className={'bread-crumbs'}>\r\n                  <Link to={'/index'} className={'bread-item'}>主页</Link>\r\n                  <Link to={`/channel/${videoInfo.reid}`} className={'bread-item'}>{videoInfo.toptype}</Link>\r\n                  <Link to={`/channel/${videoInfo.tid}`} className={'bread-item'}>{videoInfo.tname}</Link>\r\n                  <span className={'desc-detail'}>av{aid}</span>\r\n                </div>\r\n              </div>\r\n            </Fragment>\r\n        }\r\n      </div>\r\n      <div className={'related-video-container'}>\r\n        {\r\n          relatedVideo.slice(0, 20).map(rv => {\r\n            return (\r\n              <VideoCard data={rv} key={rv.aid} isRelated={true} cacheData={cacheData}/>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n      <Comment aid={aid}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Video);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#999\"\n}, React.createElement(\"path\", {\n  d: \"M328 941C183 894 59 767 16 621c-21-71-21-211 0-282C59 191 184 65 331 19c82-26 216-26 298 0 147 46 272 172 315 320 21 71 21 211 0 282-43 148-168 274-315 320-81 25-222 25-301 0zm299-69c197-75 311-290 259-492C805 63 416-45 185 185c-270 270-66 731 315 711 41-2 98-13 127-24z\"\n}), React.createElement(\"path\", {\n  d: \"M570 582c-58-20-111-41-118-45-9-6-12-56-12-181 0-146 3-176 16-187 11-9 20-10 32-2 15 9 17 33 20 166l3 156 110 36c106 36 110 38 107 64-4 38-34 36-158-7z\"\n}));\n\nvar SvgHistory = function SvgHistory(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 96,\n    height: 96,\n    viewBox: \"0 0 960 960\"\n  }, props), _ref);\n};\n\nexport default SvgHistory;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M295 827C177 788 88 710 37 602 7 539 5 529 5 420s2-119 32-182C78 150 150 78 238 37 301 7 311 5 420 5s119 2 182 32c88 41 160 113 201 201 30 63 32 73 32 182s-2 119-32 182c-41 88-113 160-201 201-59 28-79 32-167 34-63 2-115-2-140-10z\",\n  fill: \"#ccc\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M252 588c-20-20-15-30 55-100l67-68-68-69c-47-48-67-74-63-85 15-38 38-29 108 40l69 68 69-68c48-47 74-67 85-63 38 15 29 38-40 108l-68 69 68 69c69 70 78 93 40 108-11 4-37-16-85-63l-69-68-68 67c-70 70-80 75-100 55z\",\n  fill: \"#fefefe\"\n});\n\nvar SvgSearchClose = function SvgSearchClose(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 84,\n    height: 84,\n    viewBox: \"0 0 840 840\"\n  }, props), _ref, _ref2);\n};\n\nexport default SvgSearchClose;","import React, {useEffect, useLayoutEffect, useMemo, useRef, useState} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport '../style/components/SearchResultPane.scss';\r\nimport api from '../../../api/index';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {renderMediaBangumi, renderMediaFt, renderOrder, renderUser} from \"./renderFunc\";\r\nimport {isEmpty} from \"../../../util/tools\";\r\n\r\nlet renderResultFuncs = {\r\n  media_bangumi: renderMediaBangumi,\r\n  bili_user: renderUser,\r\n  media_ft: renderMediaFt,\r\n  renderOrder: renderOrder,\r\n};\r\n\r\nlet SearchResultPane = withRouter((props) => {\r\n  let {isActive, tabData, setPageInfo} = props;\r\n  let [isRender, setIsRender] = useState(false);\r\n  let [searchResult, setSearchResult] = useState({});\r\n  let [activeOrder, setActiveOrder] = useState('totalrank');\r\n  let [page, setaPage] = useState(1);\r\n  let [pageSize, setPageSize] = useState(20);\r\n  let [fetching, setFeting] = useState(true)\r\n\r\n  let locationSearch = props.location.search;\r\n  // let keyword = ''\r\n  // console.log(props)\r\n  let keyword = useMemo(() => locationSearch.split('=')[1] || '', [locationSearch]);\r\n\r\n  useLayoutEffect(() => {\r\n    async function getSearchResult() {\r\n      if (!tabData.children && isActive && !isRender) {\r\n        setFeting(true)\r\n        let searchResult = [];\r\n        if (tabData.order && tabData.order === 'totalrank') {\r\n          searchResult = await api.getAllSearchResult({\r\n            pageSize,\r\n            page,\r\n            keyword,\r\n            order: tabData.order,\r\n            searchType: 'all'\r\n          });\r\n        } else {\r\n          searchResult = await api.getTypeSearchResult({pageSize, page, keyword, searchType: tabData.type || 'video', order: tabData.order});\r\n        }\r\n        setIsRender(true);\r\n        let data = searchResult.data || {};\r\n        if (tabData.order === 'totalrank') {\r\n          setPageInfo(data.pageinfo || {});\r\n        }\r\n        setSearchResult(data);\r\n        setFeting(false)\r\n      }\r\n    }\r\n\r\n    getSearchResult();\r\n  }, [keyword, page, pageSize, isActive, isRender]);\r\n\r\n  useEffect(() => {\r\n    if (!isRender && isActive) {\r\n      setIsRender(true);\r\n      // 请求相关标签内容\r\n    }\r\n  }, [isRender, isActive]);\r\n\r\n  let onOrderChange = order => {\r\n    setActiveOrder(order);\r\n  };\r\n\r\n  let getVideoData = () => {\r\n    if (tabData.order && tabData.order === 'totalrank') {\r\n      let result = [];\r\n      (searchResult.result || []).forEach(sr => {\r\n        if (sr.result_type === 'video') result = sr.data || [];\r\n      });\r\n      return result;\r\n    }\r\n    return searchResult.result || [];\r\n  };\r\n\r\n  let data = getVideoData();\r\n  console.log(fetching, 'data');\r\n  return (\r\n    <div className={`search-result-pane ${isActive ? 'active' : 'inactive'}`}>\r\n      {\r\n        isRender ? (\r\n          tabData.children ?\r\n            <div>\r\n              <div className={'search-result-sub-header'}>\r\n                {\r\n                  tabData.children.map(td => (\r\n                    <div className={`search-result-sub-header-item ${activeOrder === td.order ? 'selected' : ''}`}\r\n                         onClick={() => onOrderChange(td.order)} key={td.title}>\r\n                      {td.title}\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n              {\r\n                tabData.children.map(td => (\r\n                  <SearchResultPane isActive={activeOrder === td.order} tabData={td} setPageInfo={setPageInfo}\r\n                                    key={td.title}/>\r\n                ))\r\n              }\r\n            </div>\r\n            :\r\n            isEmpty(data) && !fetching\r\n              ? <div className={'not-found'}>\r\n                <img src={'static/img/notFound.png'}/>\r\n                <div>什么都没有找到啊 T_T</div>\r\n            </div>\r\n              : <div className={'search-result-content'}>\r\n                {\r\n                  !!tabData.order ?\r\n                    renderResultFuncs.renderOrder(data) :\r\n                    renderResultFuncs[tabData.type](data)\r\n                }\r\n              </div>\r\n\r\n\r\n\r\n        ) : null\r\n      }\r\n    </div>\r\n  );\r\n});\r\n\r\nSearchResultPane.defaultProps = {\r\n  tabData: {},\r\n  isActive: false,\r\n  setPageInfo() {\r\n  }\r\n};\r\n\r\nSearchResultPane.propTypes = {\r\n  tabData: PropTypes.object,\r\n  isActive: PropTypes.bool,\r\n  setPageInfo: PropTypes.func,\r\n};\r\n\r\nexport default SearchResultPane;\r\n","// up主\r\nimport React, {Fragment} from \"react\";\r\nimport LazyLoadImg from \"../../../components/LazyLoadImg\";\r\nimport {getPicUrl, isEmpty, numberToW} from \"../../../util/tools\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport let renderUser = (data) => {\r\n  return (\r\n    <Fragment>\r\n      {\r\n        data.map(d => {\r\n          return (\r\n            <div className={'bili-user-item'} key={d.id}>\r\n              <div className={'user-icon'}>\r\n                <LazyLoadImg src={getPicUrl(d.upic, '@320w_200h')}/>\r\n              </div>\r\n              <div className={'user-desc'}>\r\n                <span className={'user-name'}>{d.uname}</span>\r\n                <div className={'user-fans-and-videos'}>\r\n                  <span>粉丝：{numberToW(d.fans)}</span>\r\n                  <span>视频：{numberToW(d.videos)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })\r\n      }\r\n      {\r\n        !isEmpty(data) &&\r\n        <div className={'end'}>\r\n          <img src={'static/img/end.png'}/>\r\n          <div>刷到底了哟，从头再来吧 ~</div>\r\n        </div>\r\n      }\r\n\r\n    </Fragment>\r\n  );\r\n};\r\n\r\n// 影视\r\nexport let renderMediaFt = (data) => {\r\n};\r\n\r\n// 番剧\r\nexport let renderMediaBangumi = (data) => {\r\n};\r\n\r\n// 综合的所有排序\r\nexport let renderOrder = (data) => {\r\n  return (\r\n    <Fragment>\r\n      {\r\n        data.map(d => (\r\n          <Link className={'search-all-item'} key={d.id} to={'/video/' + d.id}>\r\n            <div className={'video-cover'}>\r\n              <LazyLoadImg src={getPicUrl(d.pic, '@480w_300h')}/>\r\n            </div>\r\n            <div className={'video-desc'}>\r\n              <div className={'video-title'} key={d.id} dangerouslySetInnerHTML={{__html: d.title}}/>\r\n              <div className={'video-author'}><img src={'static/img/ico_up.png'} className={'icon'}/>{d.author}</div>\r\n              <div className={'play-and-danmushu'}>\r\n                <span><img src={'static/img/ico_play.png'} className={'icon'}/>{numberToW(d.play)}</span>\r\n                <span><img src={'static/img/ico_danmu.png'} className={'icon'}/>{numberToW(d.video_review)}</span>\r\n              </div>\r\n            </div>\r\n          </Link>))\r\n      }\r\n      {\r\n        !isEmpty(data) &&\r\n        <div className={'end'}>\r\n          <img src={'static/img/end.png'}/>\r\n          <div>刷到底了哟，从头再来吧 ~</div>\r\n        </div>\r\n      }\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, {useState} from \"react\";\r\nimport SearchResultPane from \"./SearchResultPane\";\r\nimport '../style/components/SearchResult.scss'\r\n\r\nlet tabDatas = [{\r\n  title: '综合',\r\n  type: 'all',\r\n  children: [{\r\n    title: '默认排序',\r\n    order: 'totalrank',\r\n  }, {\r\n    title: '播放多',\r\n    order: 'click',\r\n  }, {\r\n    title: '新发布',\r\n    order: 'pubdate',\r\n  }, {\r\n    title: '弹幕多',\r\n    order: 'dm',\r\n  }],\r\n}, {\r\n  title: '番剧',\r\n  type: 'media_bangumi',\r\n}, {\r\n  title: 'UP主',\r\n  type: 'bili_user',\r\n}, {\r\n  title: '影视',\r\n  type: 'media_ft',\r\n}];\r\n\r\nfunction SearchResult() {\r\n  let [active, setActive] = useState('all');\r\n  let [pageInfo, setPageInfo] = useState({});\r\n\r\n  let onHeaderChange = (type) => {\r\n    setActive(type)\r\n  };\r\n\r\n  console.log(pageInfo, 'pageInfo')\r\n\r\n  return (\r\n    <div>\r\n      <div className={'search-result-header'}>\r\n        {\r\n          tabDatas.map(tabData => {\r\n            let numText = '';\r\n            if (tabData.type !== 'all') {\r\n              let num = (pageInfo[tabData.type] || {}).total || 0\r\n              numText = `(${num})`\r\n            }\r\n            return <div className={`search-result-header-item ${active === tabData.type ? 'selected' : ''}`} onClick={() => onHeaderChange(tabData.type)} key={tabData.title}>\r\n              {tabData.title}{numText}\r\n            </div>\r\n          })\r\n        }\r\n      </div>\r\n      {\r\n        tabDatas.map(tabData => (\r\n          <SearchResultPane tabData={tabData} isActive={tabData.type === active} setPageInfo={setPageInfo} key={tabData.title}/>\r\n        ))\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchResult;\r\n","import React, {useCallback, useEffect, useMemo, useRef, useState} from \"react\";\r\nimport './style/search.scss';\r\nimport SearchIcon from '../../public/img/search.svg';\r\nimport HistoryIcon from '../../public/img/history.svg';\r\nimport CloseIcon from '../../public/img/search-close.svg';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport api from '../../api/index';\r\nimport {SEARCH_HISTORY, SEARCH_REFERER} from \"../../util/constants\";\r\nimport {debounce} from \"../../util/tools\";\r\nimport SearchResult from \"./components/SearchResult\";\r\n\r\nlet suggestTag = 0;\r\n\r\nfunction Search(props) {\r\n  let {history} = props;\r\n  let [hotWord, setHotWord] = useState([]);\r\n  let [defaultSearch, setDefaultSearch] = useState('');\r\n  let [historyChange, setHistoryChange] = useState(0);\r\n  let [searchValue, setSearchValue] = useState('');\r\n  let [suggestData, setSuggestData] = useState([]);\r\n  let [showSuggestArea, setShowSuggestArea] = useState(false);\r\n  let [showSearchResult, setShowSearchResult] = useState(false);\r\n  let [searchResult, setSearchResult] = useState([])\r\n  let [updateKeyword, setUpdateKeyword] = useState(0)\r\n\r\n  let locationSearch = props.location.search;\r\n\r\n  let setSearchValueAndShowSuggestArea = (value) => {\r\n    let showSuggest = false;\r\n    if (value) showSuggest = true;\r\n    setSearchValue(value);\r\n    setShowSuggestArea(showSuggest);\r\n  };\r\n\r\n  useEffect(function getSearchResult() {\r\n    let keyword = locationSearch.split('=')[1] || '';\r\n    setSearchValueAndShowSuggestArea(decodeURI(keyword));\r\n    if (keyword) {\r\n      setShowSearchResult(true)\r\n      setShowSuggestArea(false)\r\n    }\r\n  }, [locationSearch, updateKeyword]);\r\n\r\n  useEffect(() => {\r\n    let getHotWord = async () => {\r\n      let hotWord = await api.getHotWord();\r\n      setHotWord(hotWord.data);\r\n    };\r\n    getHotWord();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      let defaultSearch = await api.getSearchDefault();\r\n      setDefaultSearch(defaultSearch.data);\r\n    })();\r\n  }, []);\r\n\r\n  let onCancelClick = () => {\r\n    history.goBack();\r\n  };\r\n\r\n  let getSearchHistory = () => {\r\n    return JSON.parse(localStorage.getItem(SEARCH_HISTORY) || '[]');\r\n  };\r\n\r\n  let setSearchHistory = (keyword) => () => {\r\n    let searchHistory = getSearchHistory();\r\n    if (!searchHistory.includes(keyword)) {\r\n      searchHistory.unshift(keyword);\r\n      localStorage.setItem(SEARCH_HISTORY, JSON.stringify(searchHistory.slice(0, 6)));\r\n      setHistoryChange(historyChange => historyChange + 1);\r\n    }\r\n    onKeywordClick(keyword);\r\n  };\r\n\r\n  let clearHistory = () => {\r\n    localStorage.removeItem(SEARCH_HISTORY);\r\n    setHistoryChange(historyChange => historyChange + 1);\r\n  };\r\n\r\n  let enterPageWithNewKeyword = keyword => {\r\n    history.replace('/search?keyword=' + keyword);\r\n  };\r\n\r\n  let onKeywordClick = (keyword) => {\r\n    enterPageWithNewKeyword(keyword);\r\n    setUpdateKeyword(updateKeyword => updateKeyword + 1)\r\n  };\r\n\r\n  let onSearchInputKeyDown = (e) => {\r\n    if (e.keyCode === 13) {\r\n      enterPageWithNewKeyword(searchValue);\r\n    }\r\n  };\r\n\r\n  let getSuggest = useCallback(debounce(function (value) {\r\n    if (!value) {\r\n      setSuggestData([]);\r\n      return;\r\n    }\r\n    let tag = ++suggestTag;\r\n    api.getSuggest(value).then(result => {\r\n      if (tag === suggestTag) {\r\n        setSuggestData(result.data.tag || []);\r\n      }\r\n    });\r\n  }, 100), []);\r\n\r\n  let onSearchInputValueChange = (e) => {\r\n    getSuggest(e.target.value);\r\n    setShowSearchResult(false);\r\n    setSearchValueAndShowSuggestArea(e.target.value);\r\n  };\r\n\r\n  let onCloseSearchClick = () => {\r\n    setSearchValueAndShowSuggestArea('');\r\n    setShowSearchResult(false);\r\n    setSearchResult([])\r\n  };\r\n\r\n  let searchHistory = useMemo(() => getSearchHistory(), [historyChange]);\r\n  return (\r\n    <div className={'search-page'}>\r\n      <div className={'fixed-search-container'}>\r\n        <div className={'search-input-container'}>\r\n          <SearchIcon className={'search-icon'}/>\r\n          <input className={'search-input'} value={searchValue} placeholder={defaultSearch.show_name}\r\n                 onChange={onSearchInputValueChange} onKeyDown={onSearchInputKeyDown}/>\r\n          {!!searchValue && <div className={'close-search-icon'} onClick={onCloseSearchClick}><CloseIcon/></div>}\r\n        </div>\r\n        <div className={'cancel-button'} onClick={onCancelClick}>取消</div>\r\n      </div>\r\n      {\r\n        !showSearchResult && !showSuggestArea &&\r\n        <div className={'search-content'}>\r\n          <div className={'hot-word-container'}>\r\n            <div className={'label'}>大家都在搜</div>\r\n            <div className={'hot-word-area'}>\r\n              {hotWord.map(hotWordItem => (\r\n                <div className={'hot-word-item'} key={hotWordItem.keyword}\r\n                     onClick={setSearchHistory(hotWordItem.keyword)}>{hotWordItem.keyword}</div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className={'search-history-container'}>\r\n            <div className={'label'}>历史搜索</div>\r\n            {\r\n              searchHistory.map(keyword => (\r\n                <div className={'search-history-item'} key={keyword} onClick={() => onKeywordClick(keyword)}>\r\n                  <HistoryIcon className={'history-icon'}/>\r\n                  <span>{keyword}</span>\r\n                </div>\r\n              ))\r\n            }\r\n            <div className={'clear-history-container'} onClick={clearHistory}>\r\n              {\r\n                searchHistory.length !== 0 &&\r\n                <span>清除历史记录</span>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      }\r\n      {\r\n        showSuggestArea &&\r\n        <div className={'suggest-area'}>\r\n          {\r\n            suggestData.map(sd =>\r\n              <div className={'suggest-item'} dangerouslySetInnerHTML={{__html: sd.name}} key={sd.value}\r\n                   onClick={setSearchHistory(sd.value)}/>)\r\n          }\r\n        </div>\r\n      }\r\n      {\r\n        showSearchResult &&\r\n          <SearchResult/>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Search);\r\n","import Channel from '../pages/channel/Channel'\r\nimport Index from \"../pages/index/Index\";\r\nimport Video from \"../pages/video/Video\";\r\nimport Search from \"../pages/search/Search\";\r\n\r\nexport default [\r\n  {\r\n    path: '/index',\r\n    component: Index\r\n  },\r\n  {\r\n    path: '/channel/:rid',\r\n    component: Channel\r\n  },\r\n  {\r\n    path: '/video/:aid',\r\n    component: Video\r\n  },\r\n  {\r\n    path: '/search',\r\n    component: Search\r\n  }\r\n]\r\n","import React, {useCallback, useEffect, useState} from 'react';\r\nimport ChannelBar from \"../../components/ChannelBar\";\r\nimport Carousel from \"../../components/Carousel\";\r\nimport Api from '../../api/index';\r\nimport VideoCard from \"../../components/VideoCard\";\r\nimport './style/index.scss';\r\nimport {clearPageCache, getPicUrl, globalEventBus, ifFetch, setCacheData} from \"../../util/tools\";\r\nimport {useCacheState, useClearPageCache} from \"../../util/customHook\";\r\nimport {CACHE_PAGE} from \"../../util/constants\";\r\n\r\nexport default function Index(props) {\r\n  let pageKey = 'index';\r\n  let history = props.history;\r\n  let [locData, setLocData, getCacheLocDataMap] = useCacheState([], pageKey, 'locData', history);\r\n  let [rankingData, setRankingData, getCacheRankingDataMap] = useCacheState([], pageKey, 'rankingData', history);\r\n\r\n  useClearPageCache(pageKey);\r\n\r\n  let cacheData = useCallback(() => {\r\n    setCacheData('index', [getCacheLocDataMap, getCacheRankingDataMap]);\r\n  }, [getCacheLocDataMap, getCacheRankingDataMap]);\r\n\r\n  useEffect(() => {\r\n    globalEventBus.on(CACHE_PAGE, cacheData);\r\n    return () => globalEventBus.remove(CACHE_PAGE, cacheData)\r\n  }, [cacheData]);\r\n\r\n  useState(async () => {\r\n    ifFetch(async () => {\r\n      let locData = await Api.fetchLoc();\r\n      setLocData(locData.data);\r\n    }, history, pageKey);\r\n  }, [locData, history]);\r\n\r\n  useState(async () => {\r\n    ifFetch(async () => {\r\n      let rankingIndex = await Api.fetchIndexRanking();\r\n      setRankingData(rankingIndex.data);\r\n    }, history, pageKey);\r\n  }, [rankingData, history]);\r\n\r\n  return (\r\n    <div className={'channel-index video-card-area'}>\r\n      <ChannelBar cacheData={cacheData}/>\r\n      <Carousel>\r\n        {\r\n          locData.map(imgItem => {\r\n            return (\r\n              <a href={imgItem.url} key={imgItem.id}>\r\n                <img alt='' src={getPicUrl(imgItem.pic, \"@480w_300h\")}/>\r\n              </a>\r\n            );\r\n          })\r\n        }\r\n      </Carousel>\r\n      <div className={'index-video-area-container'}>\r\n        {\r\n          rankingData.map(rkData => {\r\n            return (\r\n              <VideoCard data={rkData} key={rkData.aid} cacheData={cacheData}/>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\nimport routes from './routes'\r\n\r\nfunction NestRoutes() {\r\n  return (\r\n    <Switch>\r\n      {\r\n        routes.map(route => (\r\n          <Route\r\n            key={route.path}\r\n            exact={route.exact === undefined ? true : route.exact}\r\n            component={route.component}\r\n            path={route.path}\r\n          />\r\n        ))\r\n      }\r\n      <Redirect from={'/'} to={'/index'} exact={true}/>\r\n    </Switch>\r\n  )\r\n}\r\n\r\nexport default NestRoutes\r\n","const SET_CHANNEL_BAR = 'SET_CHANNEL_BAR';\r\nconst FETCH_CHANNEL_BAR = 'FETCH_CHANNEL_BAR';\r\n\r\n\r\nexport default {\r\n  SET_CHANNEL_BAR,\r\n  FETCH_CHANNEL_BAR\r\n}\r\n","import actionTypes from './action_types'\r\n\r\nexport function setChannelBar(channelBar) {\r\n  return { type: actionTypes.SET_CHANNEL_BAR, channelBar }\r\n}\r\n\r\nexport function fetchChannelBar() {\r\n  return { type: actionTypes.FETCH_CHANNEL_BAR }\r\n}\r\n","import React, {useEffect} from 'react';\r\nimport './public/style/app.scss';\r\nimport Header from \"./components/Header\";\r\nimport NestRoutes from \"./router/NestRoutes\";\r\nimport {BrowserRouter as Router, withRouter} from \"react-router-dom\";\r\nimport {fetchChannelBar} from \"./redux/actions\";\r\nimport {useDispatch} from \"redux-react-hook\";\r\nimport {Helmet} from \"react-helmet\";\r\nimport {NO_HEADER_PAGE} from \"./util/constants\";\r\n\r\nfunction App(props) {\r\n  let { location } = props\r\n  let dispatch = useDispatch();\r\n  // 获取导航栏的数据\r\n  useEffect(() => {\r\n    dispatch(fetchChannelBar())\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('popstate', (e) => {\r\n      console.log(e, 'popstate')\r\n    })\r\n  })\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('beforeunload', (e) => {\r\n      console.log(e, 'popstate')\r\n    })\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <Helmet>\r\n        <title>高仿哔哩哔哩-( ゜- ゜)つロ干杯~ - bilbili</title>\r\n      </Helmet>\r\n      {\r\n        !NO_HEADER_PAGE.includes(location.pathname) &&\r\n        <Header/>\r\n      }\r\n      <div className={'content-container'}>\r\n        <NestRoutes/>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport actionTypes from './action_types'\r\n\r\nconst initState = {\r\n  channelBar: {}\r\n}\r\n\r\nexport function channelBarReducer(channelBar=initState.channelBar, action) {\r\n  switch (action.type) {\r\n    case actionTypes.SET_CHANNEL_BAR:\r\n      return action.channelBar\r\n    default:\r\n      return channelBar\r\n  }\r\n}\r\n\r\nexport default combineReducers({\r\n  channelBar: channelBarReducer\r\n})\r\n","import { call, put, takeLatest } from 'redux-saga/effects'\r\nimport Api from '../../api/index'\r\nimport {setChannelBar} from \"../actions\";\r\nimport actionTypes from '../action_types'\r\nimport {createChannelBar} from \"../../util/tools\";\r\n\r\nfunction* fetchChannelBar() {\r\n  const result = yield call(Api.fetchChannelBar);\r\n  let channelBar = {};\r\n  if (result.success) {\r\n    channelBar = createChannelBar(result.data);\r\n  }\r\n  yield put(setChannelBar(channelBar))\r\n}\r\n\r\n\r\nfunction* mySaga() {\r\n  yield takeLatest(actionTypes.FETCH_CHANNEL_BAR, fetchChannelBar)\r\n}\r\n\r\nexport default mySaga\r\n","import {applyMiddleware, createStore, compose} from \"redux\";\r\nimport reducer from './reducers'\r\nimport mySaga from './saga/index'\r\nimport createSagaMiddleware from 'redux-saga'\r\n\r\nlet sagaMiddleware = createSagaMiddleware();\r\nlet composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport default createStore(\r\n  reducer,\r\n  composeEnhancers(applyMiddleware(sagaMiddleware))\r\n  )\r\n\r\nsagaMiddleware.run(mySaga);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './public/style/global.scss'\r\nimport './public/style/normalize.scss'\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {StoreContext} from 'redux-react-hook';\r\nimport store from './redux/store'\r\nimport {BrowserRouter as Router} from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <StoreContext.Provider value={store}>\r\n    <Router>\r\n      <App/>\r\n    </Router>\r\n  </StoreContext.Provider>,\r\n  document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}